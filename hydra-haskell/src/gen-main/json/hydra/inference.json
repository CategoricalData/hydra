{
  "description": [
    "Type inference following Algorithm W, extended for nominal terms and types"],
  "elements": [
    {
      "name": "hydra.inference.bindConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Bind type constraints and continue with substitution"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "application": {
                                "argument": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {"argument": {"variable": "s"}, "function": {"variable": "f"}}},
                                                "domain": null,
                                                "parameter": "_"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "s"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {"variable": "hydra.checking.checkTypeSubst"}}}}},
                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                      "domain": null,
                                      "parameter": "s"}}},
                                "function": {
                                  "application": {
                                    "argument": {
                                      "application": {
                                        "argument": {"variable": "constraints"},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "cx"},
                                                "function": {
                                                  "function": {
                                                    "elimination": {
                                                      "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                            "function": {"variable": "hydra.unification.unifyTypeConstraints"}}}}},
                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                            "domain": null,
                            "parameter": "constraints"}}},
                      "domain": null,
                      "parameter": "f"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.bindUnboundTypeVariables",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Place unbound type variables appearing anywhere under a typed let binding in the type scheme of that binding. These variables may appear in the binding type scheme itself or in that of a subterm, in domain types attached to functions, and in type abstraction and type application terms. This process attempts to capture type variables which have escaped unification, e.g. due to unused code. However, unbound type variables not appearing beneath any typed let binding remain unbound."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "svars",
                              "term": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.maps.keys"}}}},
                                  "function": {"function": {"primitive": "hydra.lib.sets.fromList"}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "rewrite",
                                  "term": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {"variable": "term"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {
                                                        "union": {
                                                          "cases": [
                                                            {
                                                              "name": "let",
                                                              "term": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "forBinding",
                                                                            "term": {
                                                                              "function": {
                                                                                "lambda": {
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "bname",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "b"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                                                          "type": null}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "bterm",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "b"},
                                                                                                  "function": {
                                                                                                    "function": {
                                                                                                      "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                                                              "type": null}],
                                                                                          "body": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "b"},
                                                                                                  "function": {
                                                                                                    "function": {
                                                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "function": {
                                                                                                      "lambda": {
                                                                                                        "body": {
                                                                                                          "let": {
                                                                                                            "bindings": [
                                                                                                              {
                                                                                                                "name": "bvars",
                                                                                                                "term": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "ts"},
                                                                                                                        "function": {
                                                                                                                          "function": {
                                                                                                                            "elimination": {
                                                                                                                              "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                    "function": {"function": {"primitive": "hydra.lib.sets.fromList"}}}},
                                                                                                                "type": null}],
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "unboundInType",
                                                                                                                    "term": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                            "function": {
                                                                                                                              "function": {
                                                                                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                        "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                                    "type": null}],
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "unboundInTerm",
                                                                                                                        "term": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "bterm"},
                                                                                                                            "function": {"variable": "hydra.rewriting.freeTypeVariablesInTerm"}}},
                                                                                                                        "type": null}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "unbound",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "bvars"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "svars"},
                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.sets.union"}}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "unboundInTerm"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "unboundInType"},
                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.sets.union"}}}}}},
                                                                                                                                        "function": {"function": {"primitive": "hydra.lib.sets.difference"}}}}}},
                                                                                                                                "function": {"function": {"primitive": "hydra.lib.sets.toList"}}}},
                                                                                                                            "type": null}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "ts2",
                                                                                                                                "term": {
                                                                                                                                  "record": {
                                                                                                                                    "fields": [
                                                                                                                                      {
                                                                                                                                        "name": "variables",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "unbound"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "ts"},
                                                                                                                                                    "function": {
                                                                                                                                                      "function": {
                                                                                                                                                        "elimination": {
                                                                                                                                                          "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.concat2"}}}}}}},
                                                                                                                                      {
                                                                                                                                        "name": "type",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                                            "function": {
                                                                                                                                              "function": {
                                                                                                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}}},
                                                                                                                                      {
                                                                                                                                        "name": "constraints",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                                            "function": {
                                                                                                                                              "function": {
                                                                                                                                                "elimination": {
                                                                                                                                                  "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}}}],
                                                                                                                                    "typeName": "hydra.core.TypeScheme"}},
                                                                                                                                "type": null}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "bterm2",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "unbound"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "bterm"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "function": {
                                                                                                                                                    "lambda": {
                                                                                                                                                      "body": {
                                                                                                                                                        "function": {
                                                                                                                                                          "lambda": {
                                                                                                                                                            "body": {
                                                                                                                                                              "union": {
                                                                                                                                                                "field": {
                                                                                                                                                                  "name": "typeLambda",
                                                                                                                                                                  "term": {
                                                                                                                                                                    "record": {
                                                                                                                                                                      "fields": [
                                                                                                                                                                        {"name": "parameter", "term": {"variable": "v"}},
                                                                                                                                                                        {"name": "body", "term": {"variable": "t"}}],
                                                                                                                                                                      "typeName": "hydra.core.TypeLambda"}}},
                                                                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                                                                            "domain": null,
                                                                                                                                                            "parameter": "v"}}},
                                                                                                                                                      "domain": null,
                                                                                                                                                      "parameter": "t"}}},
                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                                                                                                                                    "type": null}],
                                                                                                                                "body": {
                                                                                                                                  "record": {
                                                                                                                                    "fields": [
                                                                                                                                      {"name": "name", "term": {"variable": "bname"}},
                                                                                                                                      {"name": "term", "term": {"variable": "bterm2"}},
                                                                                                                                      {"name": "type", "term": {"maybe": [{"variable": "ts2"}]}}],
                                                                                                                                    "typeName": "hydra.core.Binding"}}}}}}}}}}}}}},
                                                                                                        "domain": null,
                                                                                                        "parameter": "ts"}}},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {"name": "name", "term": {"variable": "bname"}},
                                                                                                            {
                                                                                                              "name": "term",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "bterm"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "cx"},
                                                                                                                      "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}}},
                                                                                                            {"name": "type", "term": {"maybe": null}}],
                                                                                                          "typeName": "hydra.core.Binding"}},
                                                                                                      "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}}}}}},
                                                                                  "domain": null,
                                                                                  "parameter": "b"}}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "union": {
                                                                            "field": {
                                                                              "name": "let",
                                                                              "term": {
                                                                                "record": {
                                                                                  "fields": [
                                                                                    {
                                                                                      "name": "bindings",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "l"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "forBinding"},
                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}}},
                                                                                    {
                                                                                      "name": "body",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "l"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "cx"},
                                                                                              "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}}}],
                                                                                  "typeName": "hydra.core.Let"}}},
                                                                            "typeName": "hydra.core.Term"}}}},
                                                                    "domain": null,
                                                                    "parameter": "l"}}}}],
                                                          "default": [
                                                            {
                                                              "application": {
                                                                "argument": {"variable": "term"},
                                                                "function": {"variable": "recurse"}}}],
                                                          "typeName": "hydra.core.Term"}}}}}},
                                              "domain": null,
                                              "parameter": "term"}}},
                                        "domain": null,
                                        "parameter": "recurse"}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {"variable": "term0"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "rewrite"},
                                      "function": {"variable": "hydra.rewriting.rewriteTerm"}}}}}}}}},
                      "domain": null,
                      "parameter": "term0"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.buildTypeApplicationTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Fold a list of type variables over a term to build a type application term"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"variable": "tvars"},
                          "function": {
                            "application": {
                              "argument": {"variable": "body"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "union": {
                                                  "field": {
                                                    "name": "typeApplication",
                                                    "term": {
                                                      "record": {
                                                        "fields": [
                                                          {"name": "body", "term": {"variable": "t"}},
                                                          {
                                                            "name": "type",
                                                            "term": {
                                                              "union": {
                                                                "field": {"name": "variable", "term": {"variable": "v"}},
                                                                "typeName": "hydra.core.Type"}}}],
                                                        "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                  "typeName": "hydra.core.Term"}},
                                              "domain": null,
                                              "parameter": "v"}}},
                                        "domain": null,
                                        "parameter": "t"}}},
                                  "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                      "domain": null,
                      "parameter": "body"}}},
                "domain": null,
                "parameter": "tvars"}}}}},
      "type": null},
    {
      "name": "hydra.inference.emptyInferenceContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "An empty inference context"}}}],
          "body": {
            "record": {
              "fields": [
                {"name": "schemaTypes", "term": {"map": []}},
                {"name": "primitiveTypes", "term": {"map": []}},
                {"name": "dataTypes", "term": {"map": []}},
                {"name": "classConstraints", "term": {"map": []}},
                {"name": "debug", "term": {"literal": {"boolean": false}}}],
              "typeName": "hydra.typing.InferenceContext"}}}},
      "type": null},
    {
      "name": "hydra.inference.extendContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Add (term variable, type scheme) pairs to the typing environment"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "record": {
                          "fields": [
                            {
                              "name": "schemaTypes",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "primitiveTypes",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {
                                          "field": "primitiveTypes",
                                          "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "dataTypes",
                              "term": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "pairs"},
                                          "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                      "function": {"function": {"primitive": "hydra.lib.maps.union"}}}}}}},
                            {
                              "name": "classConstraints",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {
                                          "field": "classConstraints",
                                          "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "debug",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "debug", "typeName": "hydra.typing.InferenceContext"}}}}}}}],
                          "typeName": "hydra.typing.InferenceContext"}},
                      "domain": null,
                      "parameter": "cx"}}},
                "domain": null,
                "parameter": "pairs"}}}}},
      "type": null},
    {
      "name": "hydra.inference.finalizeInferredTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Finalize an inferred term by checking for unbound type variables, then normalizing type variables"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "term2",
                              "term": {
                                "application": {
                                  "argument": {"variable": "term"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}},
                              "type": null}],
                          "body": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "application": {
                                            "argument": {"variable": "term2"},
                                            "function": {"variable": "hydra.rewriting.normalizeTypeVariablesInTerm"}}},
                                        "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                    "domain": null,
                                    "parameter": "_"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "term2"},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {"variable": "hydra.checking.checkForUnboundTypeVariables"}}}}},
                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}},
                      "domain": null,
                      "parameter": "term"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.forInferredTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer a term's type and map over the result"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "desc"},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "term"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "f"},
                                          "function": {"function": {"primitive": "hydra.lib.flows.map"}}}}}},
                                  "domain": null,
                                  "parameter": "f"}}},
                            "domain": null,
                            "parameter": "desc"}}},
                      "domain": null,
                      "parameter": "term"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.freeVariablesInContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Get all free variables in an inference context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "application": {
                    "argument": {
                      "application": {
                        "argument": {
                          "application": {
                            "argument": {
                              "application": {
                                "argument": {"variable": "cx"},
                                "function": {
                                  "function": {
                                    "elimination": {
                                      "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                            "function": {"function": {"primitive": "hydra.lib.maps.elems"}}}},
                        "function": {
                          "application": {
                            "argument": {"variable": "hydra.rewriting.freeVariablesInTypeSchemeSimple"},
                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                    "function": {
                      "application": {
                        "argument": {"function": {"primitive": "hydra.lib.sets.empty"}},
                        "function": {
                          "application": {
                            "argument": {"function": {"primitive": "hydra.lib.sets.union"}},
                            "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.freshVariableType",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Generate a fresh type variable"}}}],
          "body": {
            "application": {
              "argument": {"variable": "hydra.schemas.freshName"},
              "function": {
                "application": {
                  "argument": {
                    "function": {
                      "lambda": {
                        "body": {
                          "union": {
                            "field": {"name": "variable", "term": {"variable": "x"}},
                            "typeName": "hydra.core.Type"}},
                        "domain": null,
                        "parameter": "x"}}},
                  "function": {"function": {"primitive": "hydra.lib.flows.map"}}}}}}}},
      "type": null},
    {
      "name": "hydra.inference.generalize",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Generalize a type to a type scheme"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "vars",
                              "term": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "typ"},
                                          "function": {"variable": "hydra.rewriting.freeVariablesInTypeOrdered"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {"variable": "hydra.inference.isUnbound"}}},
                                          "function": {"function": {"primitive": "hydra.lib.lists.filter"}}}}}},
                                  "function": {"function": {"primitive": "hydra.lib.lists.nub"}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "allConstraints",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {
                                              "field": "classConstraints",
                                              "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "relevantConstraints",
                                      "term": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "vars"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "function": {
                                                          "lambda": {
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"variable": "allConstraints"},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "v"},
                                                                        "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "pair": {"@first": {"variable": "v"}, "@second": {"variable": "meta"}}},
                                                                          "domain": null,
                                                                          "parameter": "meta"}}},
                                                                    "function": {"function": {"primitive": "hydra.lib.maybes.map"}}}}}},
                                                            "domain": null,
                                                            "parameter": "v"}}},
                                                      "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                              "function": {"function": {"primitive": "hydra.lib.maybes.cat"}}}},
                                          "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "constraintsMaybe",
                                          "term": {
                                            "application": {
                                              "argument": {"maybe": [{"variable": "relevantConstraints"}]},
                                              "function": {
                                                "application": {
                                                  "argument": {"maybe": null},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "relevantConstraints"},
                                                          "function": {"function": {"primitive": "hydra.lib.maps.null"}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}},
                                          "type": null}],
                                      "body": {
                                        "record": {
                                          "fields": [
                                            {"name": "variables", "term": {"variable": "vars"}},
                                            {"name": "type", "term": {"variable": "typ"}},
                                            {"name": "constraints", "term": {"variable": "constraintsMaybe"}}],
                                          "typeName": "hydra.core.TypeScheme"}}}}}}}}}},
                      "domain": null,
                      "parameter": "typ"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferGraphTypes",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer types for all elements in a graph"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "let": {
                    "bindings": [
                      {
                        "name": "fromLetTerm",
                        "term": {
                          "function": {
                            "lambda": {
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "bindings",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "l"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "body",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "l"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                          "type": null}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "fromBinding",
                                              "term": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "pair": {
                                                        "@first": {
                                                          "application": {
                                                            "argument": {"variable": "b"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                        "@second": {"variable": "b"}}},
                                                    "domain": null,
                                                    "parameter": "b"}}},
                                              "type": null}],
                                          "body": {
                                            "record": {
                                              "fields": [
                                                {
                                                  "name": "elements",
                                                  "term": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "bindings"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "fromBinding"},
                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}}},
                                                {
                                                  "name": "environment",
                                                  "term": {"function": {"primitive": "hydra.lib.maps.empty"}}},
                                                {
                                                  "name": "types",
                                                  "term": {"function": {"primitive": "hydra.lib.maps.empty"}}},
                                                {"name": "body", "term": {"variable": "body"}},
                                                {
                                                  "name": "primitives",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "g0"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "primitives", "typeName": "hydra.graph.Graph"}}}}}}},
                                                {
                                                  "name": "schema",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "g0"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "schema", "typeName": "hydra.graph.Graph"}}}}}}}],
                                              "typeName": "hydra.graph.Graph"}}}}}}}},
                              "domain": null,
                              "parameter": "l"}}},
                        "type": null}],
                    "body": {
                      "let": {
                        "bindings": [
                          {
                            "name": "toLetTerm",
                            "term": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "toBinding",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "record": {
                                                    "fields": [
                                                      {
                                                        "name": "name",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "el"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}}},
                                                      {
                                                        "name": "term",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "el"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}}},
                                                      {
                                                        "name": "type",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "el"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}}}],
                                                    "typeName": "hydra.core.Binding"}},
                                                "domain": null,
                                                "parameter": "el"}}},
                                          "type": null}],
                                      "body": {
                                        "union": {
                                          "field": {
                                            "name": "let",
                                            "term": {
                                              "record": {
                                                "fields": [
                                                  {
                                                    "name": "bindings",
                                                    "term": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "g"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "elements", "typeName": "hydra.graph.Graph"}}}}}},
                                                            "function": {"function": {"primitive": "hydra.lib.maps.elems"}}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "toBinding"},
                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}}},
                                                  {
                                                    "name": "body",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "g"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {"record": {"field": "body", "typeName": "hydra.graph.Graph"}}}}}}}],
                                                "typeName": "hydra.core.Let"}}},
                                          "typeName": "hydra.core.Term"}}}},
                                  "domain": null,
                                  "parameter": "g"}}},
                            "type": null}],
                        "body": {
                          "let": {
                            "bindings": [
                              {
                                "name": "forFinal",
                                "term": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "application": {
                                          "argument": {"variable": "finalized"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "union": {
                                                  "cases": [
                                                    {
                                                      "name": "let",
                                                      "term": {
                                                        "function": {
                                                          "lambda": {
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"variable": "l"},
                                                                    "function": {"variable": "fromLetTerm"}}},
                                                                "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                            "domain": null,
                                                            "parameter": "l"}}}},
                                                    {
                                                      "name": "variable",
                                                      "term": {
                                                        "function": {
                                                          "lambda": {
                                                            "body": {
                                                              "application": {
                                                                "argument": {"literal": {"string": "Expected inferred graph as let term"}},
                                                                "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                                            "domain": null,
                                                            "parameter": "_"}}}}],
                                                  "default": null,
                                                  "typeName": "hydra.core.Term"}}}}}},
                                      "domain": null,
                                      "parameter": "finalized"}}},
                                "type": null}],
                            "body": {
                              "application": {
                                "argument": {
                                  "application": {
                                    "argument": {
                                      "function": {
                                        "lambda": {
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "term",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "result"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "ts",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "application": {
                                                                          "argument": {"variable": "finalized"},
                                                                          "function": {"variable": "forFinal"}}},
                                                                      "domain": null,
                                                                      "parameter": "finalized"}}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "term"},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "cx"},
                                                                            "function": {"variable": "hydra.inference.finalizeInferredTerm"}}}}},
                                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                                    "domain": null,
                                                    "parameter": "result"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"literal": {"string": "graph term"}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "g0"},
                                                              "function": {"variable": "toLetTerm"}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                          "domain": null,
                                          "parameter": "cx"}}},
                                    "function": {
                                      "application": {
                                        "argument": {
                                          "application": {
                                            "argument": {"variable": "g0"},
                                            "function": {"variable": "hydra.schemas.graphToInferenceContext"}}},
                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                "function": {
                                  "application": {
                                    "argument": {"literal": {"string": "graph inference"}},
                                    "function": {"variable": "hydra.monads.withTrace"}}}}}}}}}}},
                "domain": null,
                "parameter": "g0"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferInGraphContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a term in graph context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "application": {
                    "argument": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {"literal": {"string": "single term"}},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "term"},
                                            "function": {
                                              "application": {
                                                "argument": {"variable": "cx"},
                                                "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                    "domain": null,
                                    "parameter": "cx"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "g"},
                                      "function": {"variable": "hydra.schemas.graphToInferenceContext"}}},
                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                          "domain": null,
                          "parameter": "g"}}},
                    "function": {
                      "application": {
                        "argument": {"variable": "hydra.monads.getState"},
                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                "domain": null,
                "parameter": "term"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferMany",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer types for multiple terms"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "dflt",
                              "term": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "e",
                                      "term": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "pairs"},
                                              "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "desc",
                                          "term": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "pairs"},
                                                  "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                          "type": null}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "tl",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "pairs"},
                                                  "function": {"function": {"primitive": "hydra.lib.lists.tail"}}}},
                                              "type": null}],
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "e1",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "result1"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "t1",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result1"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "s1",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "result1"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "type": null}],
                                                                "body": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "e2",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "result2"},
                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "t2",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "result2"},
                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                      "type": null}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "s2",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "result2"},
                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                          "type": null}],
                                                                                      "body": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "pair": {
                                                                                              "@first": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "e2"},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "e1"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "s2"},
                                                                                                              "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.cons"}}}}}},
                                                                                              "@second": {
                                                                                                "pair": {
                                                                                                  "@first": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "t2"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "t1"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "s2"},
                                                                                                                  "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.cons"}}}}}},
                                                                                                  "@second": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "s2"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "s1"},
                                                                                                          "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}}}}}},
                                                                                          "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}},
                                                                          "domain": null,
                                                                          "parameter": "result2"}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "tl"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "cx"},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "s1"},
                                                                                        "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                                                    "domain": null,
                                                    "parameter": "result1"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "desc"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "e"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                              "type": null}],
                          "body": {
                            "application": {
                              "argument": {"variable": "dflt"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "pair": {
                                          "@first": {"list": []},
                                          "@second": {
                                            "pair": {
                                              "@first": {"list": []},
                                              "@second": {"variable": "hydra.substitution.idTypeSubst"}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "pairs"},
                                          "function": {"function": {"primitive": "hydra.lib.lists.null"}}}},
                                      "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}}}},
                      "domain": null,
                      "parameter": "pairs"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfAnnotatedTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of an annotated term"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "term",
                              "term": {
                                "application": {
                                  "argument": {"variable": "at"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "body", "typeName": "hydra.core.AnnotatedTerm"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "ann",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "at"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "annotation", "typeName": "hydra.core.AnnotatedTerm"}}}}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "iterm",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "result"},
                                                    "function": {
                                                      "function": {
                                                        "elimination": {
                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "itype",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "result"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "isubst",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "result"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {
                                                                  "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "iconstraints",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "result"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {
                                                                        "field": "classConstraints",
                                                                        "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "record": {
                                                                "fields": [
                                                                  {
                                                                    "name": "term",
                                                                    "term": {
                                                                      "union": {
                                                                        "field": {
                                                                          "name": "annotated",
                                                                          "term": {
                                                                            "record": {
                                                                              "fields": [
                                                                                {"name": "body", "term": {"variable": "iterm"}},
                                                                                {"name": "annotation", "term": {"variable": "ann"}}],
                                                                              "typeName": "hydra.core.AnnotatedTerm"}}},
                                                                        "typeName": "hydra.core.Term"}}},
                                                                  {"name": "type", "term": {"variable": "itype"}},
                                                                  {"name": "subst", "term": {"variable": "isubst"}},
                                                                  {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                "typeName": "hydra.typing.InferenceResult"}},
                                                            "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "result"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"literal": {"string": "annotated term"}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "term"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                      "domain": null,
                      "parameter": "at"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfApplication",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a function application"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "e0",
                              "term": {
                                "application": {
                                  "argument": {"variable": "app"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "function", "typeName": "hydra.core.Application"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "e1",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "app"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "argument", "typeName": "hydra.core.Application"}}}}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "a",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "lhsResult"},
                                                    "function": {
                                                      "function": {
                                                        "elimination": {
                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "t0",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "lhsResult"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "s0",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "lhsResult"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {
                                                                  "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "c0",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "lhsResult"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {
                                                                        "field": "classConstraints",
                                                                        "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "b",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "rhsResult"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "t1",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "rhsResult"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "s1",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "rhsResult"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {
                                                                                            "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "c1",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "rhsResult"},
                                                                                          "function": {
                                                                                            "function": {
                                                                                              "elimination": {
                                                                                                "record": {
                                                                                                  "field": "classConstraints",
                                                                                                  "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                      "type": null}],
                                                                                  "body": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "rExpr",
                                                                                                                        "term": {
                                                                                                                          "union": {
                                                                                                                            "field": {
                                                                                                                              "name": "application",
                                                                                                                              "term": {
                                                                                                                                "record": {
                                                                                                                                  "fields": [
                                                                                                                                    {
                                                                                                                                      "name": "function",
                                                                                                                                      "term": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "a"},
                                                                                                                                          "function": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "s2"},
                                                                                                                                                  "function": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "s1"},
                                                                                                                                                      "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                              "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                                                                                                                    {
                                                                                                                                      "name": "argument",
                                                                                                                                      "term": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "b"},
                                                                                                                                          "function": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "s2"},
                                                                                                                                              "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}}],
                                                                                                                                  "typeName": "hydra.core.Application"}}},
                                                                                                                            "typeName": "hydra.core.Term"}},
                                                                                                                        "type": null}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "rType",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "union": {
                                                                                                                                    "field": {"name": "variable", "term": {"variable": "v"}},
                                                                                                                                    "typeName": "hydra.core.Type"}},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "s2"},
                                                                                                                                    "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                            "type": null}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "rSubst",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"list": [{"variable": "s0"}, {"variable": "s1"}, {"variable": "s2"}]},
                                                                                                                                    "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                                "type": null}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "c0Subst",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "c0"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "s1"},
                                                                                                                                                "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "s2"},
                                                                                                                                            "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                    "type": null}],
                                                                                                                                "body": {
                                                                                                                                  "let": {
                                                                                                                                    "bindings": [
                                                                                                                                      {
                                                                                                                                        "name": "c1Subst",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "c1"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "s2"},
                                                                                                                                                "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                        "type": null}],
                                                                                                                                    "body": {
                                                                                                                                      "let": {
                                                                                                                                        "bindings": [
                                                                                                                                          {
                                                                                                                                            "name": "rConstraints",
                                                                                                                                            "term": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "c1Subst"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "c0Subst"},
                                                                                                                                                    "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                            "type": null}],
                                                                                                                                        "body": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {
                                                                                                                                              "record": {
                                                                                                                                                "fields": [
                                                                                                                                                  {"name": "term", "term": {"variable": "rExpr"}},
                                                                                                                                                  {"name": "type", "term": {"variable": "rType"}},
                                                                                                                                                  {"name": "subst", "term": {"variable": "rSubst"}},
                                                                                                                                                  {"name": "classConstraints", "term": {"variable": "rConstraints"}}],
                                                                                                                                                "typeName": "hydra.typing.InferenceResult"}},
                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}}}}}}}},
                                                                                                                "domain": null,
                                                                                                                "parameter": "_"}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "s2"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "cx"},
                                                                                                                      "function": {"variable": "hydra.checking.checkTypeSubst"}}}}},
                                                                                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                                                      "domain": null,
                                                                                                      "parameter": "s2"}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"literal": {"string": "application lhs"}},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "union": {
                                                                                                                "field": {
                                                                                                                  "name": "function",
                                                                                                                  "term": {
                                                                                                                    "record": {
                                                                                                                      "fields": [
                                                                                                                        {"name": "domain", "term": {"variable": "t1"}},
                                                                                                                        {
                                                                                                                          "name": "codomain",
                                                                                                                          "term": {
                                                                                                                            "union": {
                                                                                                                              "field": {"name": "variable", "term": {"variable": "v"}},
                                                                                                                              "typeName": "hydra.core.Type"}}}],
                                                                                                                      "typeName": "hydra.core.FunctionType"}}},
                                                                                                                "typeName": "hydra.core.Type"}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "application": {
                                                                                                                    "argument": {"variable": "t0"},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "s1"},
                                                                                                                        "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "cx"},
                                                                                                                        "function": {
                                                                                                                          "function": {
                                                                                                                            "elimination": {
                                                                                                                              "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                    "function": {"variable": "hydra.unification.unifyTypes"}}}}}}}}},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                                            "domain": null,
                                                                                            "parameter": "v"}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "hydra.schemas.freshName"},
                                                                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                                                                  "domain": null,
                                                                  "parameter": "rhsResult"}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"literal": {"string": "rhs"}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "e1"},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "cx"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "s0"},
                                                                                    "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                            "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "lhsResult"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"literal": {"string": "lhs"}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "e0"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                      "domain": null,
                      "parameter": "app"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfCaseStatement",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a case statement"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "tname",
                              "term": {
                                "application": {
                                  "argument": {"variable": "caseStmt"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "typeName", "typeName": "hydra.core.CaseStatement"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "dflt",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "caseStmt"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "default", "typeName": "hydra.core.CaseStatement"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "cases",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "caseStmt"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "cases", "typeName": "hydra.core.CaseStatement"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "fnames",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "cases"},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}},
                                                  "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                          "type": null}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "svars",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "schemaType"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {
                                                                  "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "stype",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "schemaType"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "function": {
                                                                          "lambda": {
                                                                            "body": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "function": {
                                                                                    "lambda": {
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "iterms",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "caseResults"},
                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                              "type": null}],
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "itypes",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "caseResults"},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                  "type": null}],
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "isubst",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "caseResults"},
                                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                      "type": null}],
                                                                                                  "body": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "function": {
                                                                                                          "lambda": {
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "cod",
                                                                                                                    "term": {
                                                                                                                      "union": {
                                                                                                                        "field": {"name": "variable", "term": {"variable": "codv"}},
                                                                                                                        "typeName": "hydra.core.Type"}},
                                                                                                                    "type": null}],
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "caseMap",
                                                                                                                        "term": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "sfields"},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "function": {
                                                                                                                                        "lambda": {
                                                                                                                                          "body": {
                                                                                                                                            "pair": {
                                                                                                                                              "@first": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "ft"},
                                                                                                                                                  "function": {
                                                                                                                                                    "function": {
                                                                                                                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.FieldType"}}}}}},
                                                                                                                                              "@second": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "ft"},
                                                                                                                                                  "function": {
                                                                                                                                                    "function": {
                                                                                                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.FieldType"}}}}}}}},
                                                                                                                                          "domain": null,
                                                                                                                                          "parameter": "ft"}}},
                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                            "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                                                                                                        "type": null}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "dfltConstraints",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "dfltResult"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "function": {
                                                                                                                                            "lambda": {
                                                                                                                                              "body": {
                                                                                                                                                "record": {
                                                                                                                                                  "fields": [
                                                                                                                                                    {"name": "left", "term": {"variable": "cod"}},
                                                                                                                                                    {
                                                                                                                                                      "name": "right",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "r"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {
                                                                                                                                                                "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}}},
                                                                                                                                                    {"name": "comment", "term": {"literal": {"string": "match default"}}}],
                                                                                                                                                  "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                                              "domain": null,
                                                                                                                                              "parameter": "r"}}},
                                                                                                                                        "function": {"function": {"primitive": "hydra.lib.maybes.map"}}}}}},
                                                                                                                                "function": {"variable": "hydra.monads.maybeToList"}}},
                                                                                                                            "type": null}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "caseConstraints",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "itypes"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "fnames"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "function": {
                                                                                                                                                    "lambda": {
                                                                                                                                                      "body": {
                                                                                                                                                        "function": {
                                                                                                                                                          "lambda": {
                                                                                                                                                            "body": {
                                                                                                                                                              "application": {
                                                                                                                                                                "argument": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {"variable": "caseMap"},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "fname"},
                                                                                                                                                                        "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                                                                                                                                                                "function": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {
                                                                                                                                                                      "function": {
                                                                                                                                                                        "lambda": {
                                                                                                                                                                          "body": {
                                                                                                                                                                            "record": {
                                                                                                                                                                              "fields": [
                                                                                                                                                                                {"name": "left", "term": {"variable": "itype"}},
                                                                                                                                                                                {
                                                                                                                                                                                  "name": "right",
                                                                                                                                                                                  "term": {
                                                                                                                                                                                    "union": {
                                                                                                                                                                                      "field": {
                                                                                                                                                                                        "name": "function",
                                                                                                                                                                                        "term": {
                                                                                                                                                                                          "record": {
                                                                                                                                                                                            "fields": [
                                                                                                                                                                                              {"name": "domain", "term": {"variable": "ftype"}},
                                                                                                                                                                                              {"name": "codomain", "term": {"variable": "cod"}}],
                                                                                                                                                                                            "typeName": "hydra.core.FunctionType"}}},
                                                                                                                                                                                      "typeName": "hydra.core.Type"}}},
                                                                                                                                                                                {"name": "comment", "term": {"literal": {"string": "case type"}}}],
                                                                                                                                                                              "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                                                                          "domain": null,
                                                                                                                                                                          "parameter": "ftype"}}},
                                                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.maybes.map"}}}}}},
                                                                                                                                                            "domain": null,
                                                                                                                                                            "parameter": "itype"}}},
                                                                                                                                                      "domain": null,
                                                                                                                                                      "parameter": "fname"}}},
                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.zipWith"}}}}}}}},
                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.maybes.cat"}}}},
                                                                                                                                "type": null}],
                                                                                                                            "body": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "list": [{"variable": "dfltConstraints"}, {"variable": "caseConstraints"}]},
                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.lists.concat"}}}},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "function": {
                                                                                                                                        "lambda": {
                                                                                                                                          "body": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "list": [
                                                                                                                                                          {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "dfltResult"},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {
                                                                                                                                                                        "function": {
                                                                                                                                                                          "elimination": {
                                                                                                                                                                            "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}},
                                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.maybes.map"}}}}}},
                                                                                                                                                              "function": {"variable": "hydra.monads.maybeToList"}}},
                                                                                                                                                          {"list": [{"variable": "isubst"}, {"variable": "subst"}]}]},
                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.concat"}}}},
                                                                                                                                                  "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                                              "function": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "union": {
                                                                                                                                                      "field": {
                                                                                                                                                        "name": "function",
                                                                                                                                                        "term": {
                                                                                                                                                          "record": {
                                                                                                                                                            "fields": [
                                                                                                                                                              {
                                                                                                                                                                "name": "domain",
                                                                                                                                                                "term": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "svars"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {
                                                                                                                                                                              "function": {
                                                                                                                                                                                "lambda": {
                                                                                                                                                                                  "body": {
                                                                                                                                                                                    "union": {
                                                                                                                                                                                      "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                                                                                      "typeName": "hydra.core.Type"}},
                                                                                                                                                                                  "domain": null,
                                                                                                                                                                                  "parameter": "x"}}},
                                                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "tname"},
                                                                                                                                                                        "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                                                                                                              {"name": "codomain", "term": {"variable": "cod"}}],
                                                                                                                                                            "typeName": "hydra.core.FunctionType"}}},
                                                                                                                                                      "typeName": "hydra.core.Type"}},
                                                                                                                                                  "function": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "union": {
                                                                                                                                                              "field": {
                                                                                                                                                                "name": "function",
                                                                                                                                                                "term": {
                                                                                                                                                                  "union": {
                                                                                                                                                                    "field": {
                                                                                                                                                                      "name": "elimination",
                                                                                                                                                                      "term": {
                                                                                                                                                                        "union": {
                                                                                                                                                                          "field": {
                                                                                                                                                                            "name": "union",
                                                                                                                                                                            "term": {
                                                                                                                                                                              "record": {
                                                                                                                                                                                "fields": [
                                                                                                                                                                                  {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                                                                                  {
                                                                                                                                                                                    "name": "default",
                                                                                                                                                                                    "term": {
                                                                                                                                                                                      "application": {
                                                                                                                                                                                        "argument": {"variable": "dfltResult"},
                                                                                                                                                                                        "function": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {
                                                                                                                                                                                              "function": {
                                                                                                                                                                                                "elimination": {
                                                                                                                                                                                                  "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}},
                                                                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.maybes.map"}}}}}}},
                                                                                                                                                                                  {
                                                                                                                                                                                    "name": "cases",
                                                                                                                                                                                    "term": {
                                                                                                                                                                                      "application": {
                                                                                                                                                                                        "argument": {"variable": "iterms"},
                                                                                                                                                                                        "function": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "fnames"},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                    "lambda": {
                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                        "function": {
                                                                                                                                                                                                          "lambda": {
                                                                                                                                                                                                            "body": {
                                                                                                                                                                                                              "record": {
                                                                                                                                                                                                                "fields": [
                                                                                                                                                                                                                  {"name": "name", "term": {"variable": "n"}},
                                                                                                                                                                                                                  {"name": "term", "term": {"variable": "t"}}],
                                                                                                                                                                                                                "typeName": "hydra.core.Field"}},
                                                                                                                                                                                                            "domain": null,
                                                                                                                                                                                                            "parameter": "t"}}},
                                                                                                                                                                                                      "domain": null,
                                                                                                                                                                                                      "parameter": "n"}}},
                                                                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.zipWith"}}}}}}}}}],
                                                                                                                                                                                "typeName": "hydra.core.CaseStatement"}}},
                                                                                                                                                                          "typeName": "hydra.core.Elimination"}}},
                                                                                                                                                                    "typeName": "hydra.core.Function"}}},
                                                                                                                                                              "typeName": "hydra.core.Term"}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "svars"},
                                                                                                                                                              "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                                                                      "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                                          "domain": null,
                                                                                                                                          "parameter": "subst"}}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "cx"},
                                                                                                                                        "function": {"variable": "hydra.inference.mapConstraints"}}}}}}}}}}}}}}},
                                                                                                            "domain": null,
                                                                                                            "parameter": "codv"}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "hydra.schemas.freshName"},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                                                                                      "domain": null,
                                                                                      "parameter": "caseResults"}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "cases"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "pair": {
                                                                                                          "@first": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "f"},
                                                                                                              "function": {
                                                                                                                "function": {
                                                                                                                  "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                                                                                          "@second": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "list": [
                                                                                                                  {"literal": {"string": "case "}},
                                                                                                                  {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "tname"},
                                                                                                                      "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                                                                  {"literal": {"string": "."}},
                                                                                                                  {
                                                                                                                    "application": {
                                                                                                                      "argument": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "f"},
                                                                                                                          "function": {
                                                                                                                            "function": {
                                                                                                                              "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                                                                                                      "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}}]},
                                                                                                              "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}}}},
                                                                                                      "domain": null,
                                                                                                      "parameter": "f"}}},
                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "cx"},
                                                                                            "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                            "domain": null,
                                                                            "parameter": "dfltResult"}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {"variable": "dflt"},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "function": {
                                                                                      "lambda": {
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "list": [
                                                                                                    {"literal": {"string": "case "}},
                                                                                                    {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "tname"},
                                                                                                        "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                                                    {"literal": {"string": ".<default>"}}]},
                                                                                                "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "t"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "cx"},
                                                                                                    "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                                                        "domain": null,
                                                                                        "parameter": "t"}}},
                                                                                  "function": {"function": {"primitive": "hydra.lib.flows.mapMaybe"}}}}}},
                                                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                  "domain": null,
                                                                  "parameter": "sfields"}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"variable": "stype"},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "tname"},
                                                                        "function": {"variable": "hydra.extract.core.unionType"}}}}},
                                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                                "domain": null,
                                                "parameter": "schemaType"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "tname"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "caseStmt"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfCollection",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a collection"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "function": {
                                                              "lambda": {
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "terms",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {"variable": "results"},
                                                                            "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                        "type": null}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "types",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "results"},
                                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "subst1",
                                                                                "term": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "results"},
                                                                                        "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                "type": null}],
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "constraints",
                                                                                    "term": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "types"},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {
                                                                                                          "name": "left",
                                                                                                          "term": {
                                                                                                            "union": {
                                                                                                              "field": {"name": "variable", "term": {"variable": "var"}},
                                                                                                              "typeName": "hydra.core.Type"}}},
                                                                                                        {"name": "right", "term": {"variable": "t"}},
                                                                                                        {"name": "comment", "term": {"variable": "desc"}}],
                                                                                                      "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                  "domain": null,
                                                                                                  "parameter": "t"}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                    "type": null}],
                                                                                "body": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "constraints"},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "function": {
                                                                                            "lambda": {
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "iterm",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "terms"},
                                                                                                          "function": {"variable": "trmCons"}}},
                                                                                                      "type": null}],
                                                                                                  "body": {
                                                                                                    "let": {
                                                                                                      "bindings": [
                                                                                                        {
                                                                                                          "name": "itype",
                                                                                                          "term": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "union": {
                                                                                                                  "field": {"name": "variable", "term": {"variable": "var"}},
                                                                                                                  "typeName": "hydra.core.Type"}},
                                                                                                              "function": {"variable": "typCons"}}},
                                                                                                          "type": null}],
                                                                                                      "body": {
                                                                                                        "let": {
                                                                                                          "bindings": [
                                                                                                            {
                                                                                                              "name": "isubst",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "subst2"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "subst1"},
                                                                                                                      "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                              "type": null}],
                                                                                                          "body": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "isubst"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "itype"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "iterm"},
                                                                                                                      "function": {"variable": "hydra.inference.yield"}}}}}}}}}}}}},
                                                                                              "domain": null,
                                                                                              "parameter": "subst2"}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "cx"},
                                                                                            "function": {"variable": "hydra.inference.mapConstraints"}}}}}}}}}}}}}}},
                                                                "domain": null,
                                                                "parameter": "results"}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"literal": {"integer": {"int32": 1.0}}},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "els"},
                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.length"}}}},
                                                                                      "function": {"function": {"primitive": "hydra.lib.math.add"}}}}}},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"literal": {"integer": {"int32": 1.0}}},
                                                                                  "function": {"function": {"primitive": "hydra.lib.math.range"}}}}}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "function": {
                                                                                  "lambda": {
                                                                                    "body": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "list": [
                                                                                            {"literal": {"string": "#"}},
                                                                                            {
                                                                                              "application": {
                                                                                                "argument": {"variable": "i"},
                                                                                                "function": {"function": {"primitive": "hydra.lib.literals.showInt32"}}}}]},
                                                                                        "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                    "domain": null,
                                                                                    "parameter": "i"}}},
                                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "els"},
                                                                          "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "union": {
                                                                              "field": {"name": "variable", "term": {"variable": "var"}},
                                                                              "typeName": "hydra.core.Type"}},
                                                                          "function": {"variable": "typCons"}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {"argument": {"list": []}, "function": {"variable": "trmCons"}}},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"list": [{"variable": "var"}]},
                                                                                  "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                          "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                              "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "els"},
                                                                  "function": {"function": {"primitive": "hydra.lib.lists.null"}}}},
                                                              "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}},
                                                  "domain": null,
                                                  "parameter": "var"}}},
                                            "function": {
                                              "application": {
                                                "argument": {"variable": "hydra.schemas.freshName"},
                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                        "domain": null,
                                        "parameter": "els"}}},
                                  "domain": null,
                                  "parameter": "desc"}}},
                            "domain": null,
                            "parameter": "trmCons"}}},
                      "domain": null,
                      "parameter": "typCons"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOf",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Infer the type of a term and return a type scheme"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "letTerm",
                              "term": {
                                "union": {
                                  "field": {
                                    "name": "let",
                                    "term": {
                                      "record": {
                                        "fields": [
                                          {
                                            "name": "bindings",
                                            "term": {
                                              "list": [
                                                {
                                                  "record": {
                                                    "fields": [
                                                      {
                                                        "name": "name",
                                                        "term": {
                                                          "wrap": {
                                                            "body": {"literal": {"string": "ignoredVariableName"}},
                                                            "typeName": "hydra.core.Name"}}},
                                                      {"name": "term", "term": {"variable": "term"}},
                                                      {"name": "type", "term": {"maybe": null}}],
                                                    "typeName": "hydra.core.Binding"}}]}},
                                          {
                                            "name": "body",
                                            "term": {
                                              "union": {
                                                "field": {
                                                  "name": "literal",
                                                  "term": {
                                                    "union": {
                                                      "field": {"name": "string", "term": {"literal": {"string": "ignoredBody"}}},
                                                      "typeName": "hydra.core.Literal"}}},
                                                "typeName": "hydra.core.Term"}}}],
                                        "typeName": "hydra.core.Let"}}},
                                  "typeName": "hydra.core.Term"}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "forBindings",
                                  "term": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "binding",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "bindings"},
                                                    "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "term1",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "binding"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "mts",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "binding"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "application": {
                                                        "argument": {"variable": "mts"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "pair": {"@first": {"variable": "term1"}, "@second": {"variable": "ts"}}},
                                                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                                  "domain": null,
                                                                  "parameter": "ts"}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"literal": {"string": "Expected a type scheme"}},
                                                                    "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                                                "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "bindings"}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "unifyAndSubst",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "subst",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "result"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "bindings",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {"variable": "letResult"},
                                                                                "function": {
                                                                                  "function": {
                                                                                    "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "list": [
                                                                                        {
                                                                                          "literal": {"string": "Expected a single binding with a type scheme, but got: "}},
                                                                                        {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "bindings"},
                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.length"}}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.literals.showInt32"}}}},
                                                                                        {"literal": {"string": " bindings"}}]},
                                                                                    "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "bindings"},
                                                                                    "function": {"variable": "forBindings"}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "bindings"},
                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.length"}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"literal": {"integer": {"int32": 1.0}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.equality.equal"}}}}}},
                                                                                    "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}}}},
                                                                    "domain": null,
                                                                    "parameter": "letResult"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {"variable": "finalized"},
                                                                          "function": {"variable": "hydra.extract.core.let"}}},
                                                                      "function": {"variable": "hydra.lexical.withEmptyGraph"}}},
                                                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                          "domain": null,
                                                          "parameter": "finalized"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "result"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "cx"},
                                                                "function": {"variable": "hydra.inference.finalizeInferredTerm"}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}},
                                            "domain": null,
                                            "parameter": "result"}}},
                                      "type": null}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "result"},
                                                "function": {"variable": "unifyAndSubst"}}},
                                            "domain": null,
                                            "parameter": "result"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"literal": {"string": "infer type of term"}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "letTerm"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "term"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfEither",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of an either value"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"variable": "e"},
                          "function": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "iterm",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "r1"},
                                                          "function": {
                                                            "function": {
                                                              "elimination": {
                                                                "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                      "type": null}],
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "rightType",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "r1"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                          "type": null}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "subst",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "r1"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                              "type": null}],
                                                          "body": {
                                                            "application": {
                                                              "argument": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "eitherTerm",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {
                                                                                  "name": "either",
                                                                                  "term": {"either": {"@right": {"variable": "iterm"}}}},
                                                                                "typeName": "hydra.core.Term"}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "termWithLeftType",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "typeApplication",
                                                                                      "term": {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {"name": "body", "term": {"variable": "eitherTerm"}},
                                                                                            {"name": "type", "term": {"variable": "leftType"}}],
                                                                                          "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                    "typeName": "hydra.core.Term"}},
                                                                                "type": null}],
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "termWithBothTypes",
                                                                                    "term": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "typeApplication",
                                                                                          "term": {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {"name": "body", "term": {"variable": "termWithLeftType"}},
                                                                                                {"name": "type", "term": {"variable": "rightType"}}],
                                                                                              "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                        "typeName": "hydra.core.Term"}},
                                                                                    "type": null}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "eitherType",
                                                                                        "term": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "either",
                                                                                              "term": {
                                                                                                "record": {
                                                                                                  "fields": [
                                                                                                    {"name": "left", "term": {"variable": "leftType"}},
                                                                                                    {"name": "right", "term": {"variable": "rightType"}}],
                                                                                                  "typeName": "hydra.core.EitherType"}}},
                                                                                            "typeName": "hydra.core.Type"}},
                                                                                        "type": null}],
                                                                                    "body": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "subst"},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "eitherType"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "termWithBothTypes"},
                                                                                                "function": {"variable": "hydra.inference.yieldChecked"}}}}}}}}}}}}}}},
                                                                    "domain": null,
                                                                    "parameter": "leftType"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "hydra.inference.freshVariableType"},
                                                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                                              "domain": null,
                                              "parameter": "r1"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"literal": {"string": "either right value"}},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "r"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                    "domain": null,
                                    "parameter": "r"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "iterm",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "r1"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                          "type": null}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "leftType",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "r1"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                              "type": null}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "subst",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "r1"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "application": {
                                                                  "argument": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "eitherTerm",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "either",
                                                                                      "term": {"either": {"@left": {"variable": "iterm"}}}},
                                                                                    "typeName": "hydra.core.Term"}},
                                                                                "type": null}],
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "termWithLeftType",
                                                                                    "term": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "typeApplication",
                                                                                          "term": {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {"name": "body", "term": {"variable": "eitherTerm"}},
                                                                                                {"name": "type", "term": {"variable": "leftType"}}],
                                                                                              "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                        "typeName": "hydra.core.Term"}},
                                                                                    "type": null}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "termWithBothTypes",
                                                                                        "term": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "typeApplication",
                                                                                              "term": {
                                                                                                "record": {
                                                                                                  "fields": [
                                                                                                    {"name": "body", "term": {"variable": "termWithLeftType"}},
                                                                                                    {"name": "type", "term": {"variable": "rightType"}}],
                                                                                                  "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                            "typeName": "hydra.core.Term"}},
                                                                                        "type": null}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "eitherType",
                                                                                            "term": {
                                                                                              "union": {
                                                                                                "field": {
                                                                                                  "name": "either",
                                                                                                  "term": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {"name": "left", "term": {"variable": "leftType"}},
                                                                                                        {"name": "right", "term": {"variable": "rightType"}}],
                                                                                                      "typeName": "hydra.core.EitherType"}}},
                                                                                                "typeName": "hydra.core.Type"}},
                                                                                            "type": null}],
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "subst"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "eitherType"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "termWithBothTypes"},
                                                                                                    "function": {"variable": "hydra.inference.yieldChecked"}}}}}}}}}}}}}}},
                                                                        "domain": null,
                                                                        "parameter": "rightType"}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "hydra.inference.freshVariableType"},
                                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                                                  "domain": null,
                                                  "parameter": "r1"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"literal": {"string": "either left value"}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "l"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "cx"},
                                                            "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                        "domain": null,
                                        "parameter": "l"}}},
                                  "function": {"function": {"primitive": "hydra.lib.eithers.either"}}}}}}}},
                      "domain": null,
                      "parameter": "e"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfElimination",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of an elimination"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"variable": "elm"},
                          "function": {
                            "function": {
                              "elimination": {
                                "union": {
                                  "cases": [
                                    {
                                      "name": "record",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "p"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfProjection"}}}}},
                                            "domain": null,
                                            "parameter": "p"}}}},
                                    {
                                      "name": "union",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "c"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfCaseStatement"}}}}},
                                            "domain": null,
                                            "parameter": "c"}}}},
                                    {
                                      "name": "wrap",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "tname"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfUnwrap"}}}}},
                                            "domain": null,
                                            "parameter": "tname"}}}}],
                                  "default": null,
                                  "typeName": "hydra.core.Elimination"}}}}}},
                      "domain": null,
                      "parameter": "elm"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfFunction",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a function"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"variable": "f"},
                          "function": {
                            "function": {
                              "elimination": {
                                "union": {
                                  "cases": [
                                    {
                                      "name": "elimination",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "elm"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfElimination"}}}}},
                                            "domain": null,
                                            "parameter": "elm"}}}},
                                    {
                                      "name": "lambda",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "l"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfLambda"}}}}},
                                            "domain": null,
                                            "parameter": "l"}}}},
                                    {
                                      "name": "primitive",
                                      "term": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {"variable": "name"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "cx"},
                                                    "function": {"variable": "hydra.inference.inferTypeOfPrimitive"}}}}},
                                            "domain": null,
                                            "parameter": "name"}}}}],
                                  "default": null,
                                  "typeName": "hydra.core.Function"}}}}}},
                      "domain": null,
                      "parameter": "f"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfInjection",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a union injection"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "tname",
                              "term": {
                                "application": {
                                  "argument": {"variable": "injection"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Injection"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "field",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "injection"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "field", "typeName": "hydra.core.Injection"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "fname",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "field"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "term",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "field"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                          "type": null}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "svars",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "schemaType"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "stype",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "schemaType"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "iterm",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "result"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "ityp",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "result"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "isubst",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "result"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {
                                                                                            "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "function": {
                                                                                      "lambda": {
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "list": [
                                                                                                          {
                                                                                                            "record": {
                                                                                                              "fields": [
                                                                                                                {"name": "left", "term": {"variable": "ftyp"}},
                                                                                                                {"name": "right", "term": {"variable": "ityp"}},
                                                                                                                {
                                                                                                                  "name": "comment",
                                                                                                                  "term": {"literal": {"string": "schema type of injected field"}}}],
                                                                                                              "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "subst"},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "isubst"},
                                                                                                                            "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "svars"},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "function": {
                                                                                                                                        "lambda": {
                                                                                                                                          "body": {
                                                                                                                                            "union": {
                                                                                                                                              "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                                              "typeName": "hydra.core.Type"}},
                                                                                                                                          "domain": null,
                                                                                                                                          "parameter": "x"}}},
                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "tname"},
                                                                                                                                "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "union": {
                                                                                                                                    "field": {
                                                                                                                                      "name": "union",
                                                                                                                                      "term": {
                                                                                                                                        "record": {
                                                                                                                                          "fields": [
                                                                                                                                            {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                                            {
                                                                                                                                              "name": "field",
                                                                                                                                              "term": {
                                                                                                                                                "record": {
                                                                                                                                                  "fields": [
                                                                                                                                                    {"name": "name", "term": {"variable": "fname"}},
                                                                                                                                                    {"name": "term", "term": {"variable": "iterm"}}],
                                                                                                                                                  "typeName": "hydra.core.Field"}}}],
                                                                                                                                          "typeName": "hydra.core.Injection"}}},
                                                                                                                                    "typeName": "hydra.core.Term"}},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "svars"},
                                                                                                                                    "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                                            "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                "domain": null,
                                                                                                                "parameter": "subst"}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "cx"},
                                                                                                              "function": {"variable": "hydra.inference.mapConstraints"}}}}}}},
                                                                                                  "domain": null,
                                                                                                  "parameter": "ftyp"}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "sfields"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "fname"},
                                                                                                        "function": {"variable": "hydra.schemas.findFieldType"}}}}},
                                                                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                                        "domain": null,
                                                                                        "parameter": "sfields"}}},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "stype"},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "tname"},
                                                                                              "function": {"variable": "hydra.extract.core.unionType"}}}}},
                                                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}}}},
                                                          "domain": null,
                                                          "parameter": "schemaType"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "tname"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "cx"},
                                                                "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                "domain": null,
                                                "parameter": "result"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"literal": {"string": "injected term"}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "term"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "cx"},
                                                          "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "injection"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfLambda",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a lambda function"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "var",
                              "term": {
                                "application": {
                                  "argument": {"variable": "lambda"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "parameter", "typeName": "hydra.core.Lambda"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "body",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "lambda"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.Lambda"}}}}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "dom",
                                                "term": {
                                                  "union": {
                                                    "field": {"name": "variable", "term": {"variable": "vdom"}},
                                                    "typeName": "hydra.core.Type"}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "cx2",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "list": [
                                                                {
                                                                  "pair": {
                                                                    "@first": {"variable": "var"},
                                                                    "@second": {
                                                                      "record": {
                                                                        "fields": [
                                                                          {"name": "variables", "term": {"list": []}},
                                                                          {"name": "type", "term": {"variable": "dom"}},
                                                                          {"name": "constraints", "term": {"maybe": null}}],
                                                                        "typeName": "hydra.core.TypeScheme"}}}}]},
                                                            "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "iterm",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "result"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "icod",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "result"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "isubst",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "result"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "rdom",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "dom"},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "isubst"},
                                                                                      "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "rterm",
                                                                                  "term": {
                                                                                    "union": {
                                                                                      "field": {
                                                                                        "name": "function",
                                                                                        "term": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "lambda",
                                                                                              "term": {
                                                                                                "record": {
                                                                                                  "fields": [
                                                                                                    {"name": "parameter", "term": {"variable": "var"}},
                                                                                                    {"name": "domain", "term": {"maybe": [{"variable": "rdom"}]}},
                                                                                                    {"name": "body", "term": {"variable": "iterm"}}],
                                                                                                  "typeName": "hydra.core.Lambda"}}},
                                                                                            "typeName": "hydra.core.Function"}}},
                                                                                      "typeName": "hydra.core.Term"}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "rtype",
                                                                                      "term": {
                                                                                        "union": {
                                                                                          "field": {
                                                                                            "name": "function",
                                                                                            "term": {
                                                                                              "record": {
                                                                                                "fields": [
                                                                                                  {"name": "domain", "term": {"variable": "rdom"}},
                                                                                                  {"name": "codomain", "term": {"variable": "icod"}}],
                                                                                                "typeName": "hydra.core.FunctionType"}}},
                                                                                          "typeName": "hydra.core.Type"}},
                                                                                      "type": null}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "vars",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "list": [
                                                                                                  {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "rdom"},
                                                                                                      "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                  {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "icod"},
                                                                                                      "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                  {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "cx2"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "isubst"},
                                                                                                              "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                      "function": {"variable": "hydra.inference.freeVariablesInContext"}}}]},
                                                                                              "function": {"function": {"primitive": "hydra.lib.sets.unions"}}}},
                                                                                          "type": null}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "cx3",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "cx"},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "isubst"},
                                                                                                      "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                              "type": null}],
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "iconstraints",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "result"},
                                                                                                          "function": {
                                                                                                            "function": {
                                                                                                              "elimination": {
                                                                                                                "record": {
                                                                                                                  "field": "classConstraints",
                                                                                                                  "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "isubst"},
                                                                                                          "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                  "type": null}],
                                                                                              "body": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {"name": "term", "term": {"variable": "rterm"}},
                                                                                                        {"name": "type", "term": {"variable": "rtype"}},
                                                                                                        {"name": "subst", "term": {"variable": "isubst"}},
                                                                                                        {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                                                      "typeName": "hydra.typing.InferenceResult"}},
                                                                                                  "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}}}}}}}}}}}}}},
                                                          "domain": null,
                                                          "parameter": "result"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"literal": {"string": "lambda body"}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "body"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "cx2"},
                                                                    "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "vdom"}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "hydra.schemas.freshName"},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                      "domain": null,
                      "parameter": "lambda"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfLetNormalized",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Infer the type of a let (letrec) term which is already in a normal form"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "bins0",
                              "term": {
                                "application": {
                                  "argument": {"variable": "letTerm"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "body0",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "letTerm"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "bnames",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "bins0"},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}},
                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "tbins0",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "bvars"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "union": {
                                                                      "field": {"name": "variable", "term": {"variable": "x"}},
                                                                      "typeName": "hydra.core.Type"}},
                                                                  "domain": null,
                                                                  "parameter": "x"}}},
                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "cx1",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "cx0"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "tbins0"},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "function": {
                                                                                "lambda": {
                                                                                  "body": {
                                                                                    "record": {
                                                                                      "fields": [
                                                                                        {"name": "variables", "term": {"list": []}},
                                                                                        {"name": "type", "term": {"variable": "t"}},
                                                                                        {"name": "constraints", "term": {"maybe": null}}],
                                                                                      "typeName": "hydra.core.TypeScheme"}},
                                                                                  "domain": null,
                                                                                  "parameter": "t"}}},
                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "bnames"},
                                                                        "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                                "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "bterms1",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "inferredResult"},
                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "tbins1",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"variable": "inferredResult"},
                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "substAndConstraints",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "inferredResult"},
                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "s1",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "substAndConstraints"},
                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "inferredConstraints",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "substAndConstraints"},
                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                      "type": null}],
                                                                                  "body": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "let": {
                                                                                                          "bindings": [
                                                                                                            {
                                                                                                              "name": "g2base",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "cx0"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s1"},
                                                                                                                              "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                      "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                              "type": null}],
                                                                                                          "body": {
                                                                                                            "let": {
                                                                                                              "bindings": [
                                                                                                                {
                                                                                                                  "name": "constraintsWithS2",
                                                                                                                  "term": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "inferredConstraints"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                          "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                  "type": null}],
                                                                                                              "body": {
                                                                                                                "let": {
                                                                                                                  "bindings": [
                                                                                                                    {
                                                                                                                      "name": "composedSubst",
                                                                                                                      "term": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s1"},
                                                                                                                              "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                      "type": null}],
                                                                                                                  "body": {
                                                                                                                    "let": {
                                                                                                                      "bindings": [
                                                                                                                        {
                                                                                                                          "name": "originalBindingConstraints",
                                                                                                                          "term": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "bins0"},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {
                                                                                                                                        "function": {
                                                                                                                                          "lambda": {
                                                                                                                                            "body": {
                                                                                                                                              "function": {
                                                                                                                                                "lambda": {
                                                                                                                                                  "body": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "b"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "function": {
                                                                                                                                                              "lambda": {
                                                                                                                                                                "body": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "ts"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "function": {
                                                                                                                                                                            "elimination": {
                                                                                                                                                                              "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {
                                                                                                                                                                          "function": {
                                                                                                                                                                            "lambda": {
                                                                                                                                                                              "body": {
                                                                                                                                                                                "application": {
                                                                                                                                                                                  "argument": {"variable": "c"},
                                                                                                                                                                                  "function": {
                                                                                                                                                                                    "application": {
                                                                                                                                                                                      "argument": {"variable": "acc"},
                                                                                                                                                                                      "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                                                              "domain": null,
                                                                                                                                                                              "parameter": "c"}}},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "acc"},
                                                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                                                                                                                                                                "domain": null,
                                                                                                                                                                "parameter": "ts"}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "acc"},
                                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                                                                                                                                                  "domain": null,
                                                                                                                                                  "parameter": "b"}}},
                                                                                                                                            "domain": null,
                                                                                                                                            "parameter": "acc"}}},
                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                                                                                                                          "type": null}],
                                                                                                                      "body": {
                                                                                                                        "let": {
                                                                                                                          "bindings": [
                                                                                                                            {
                                                                                                                              "name": "originalConstraintsSubst",
                                                                                                                              "term": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "originalBindingConstraints"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "composedSubst"},
                                                                                                                                      "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                              "type": null}],
                                                                                                                          "body": {
                                                                                                                            "let": {
                                                                                                                              "bindings": [
                                                                                                                                {
                                                                                                                                  "name": "allInferredConstraints",
                                                                                                                                  "term": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "originalConstraintsSubst"},
                                                                                                                                      "function": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "constraintsWithS2"},
                                                                                                                                          "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                  "type": null}],
                                                                                                                              "body": {
                                                                                                                                "let": {
                                                                                                                                  "bindings": [
                                                                                                                                    {
                                                                                                                                      "name": "mergedConstraints",
                                                                                                                                      "term": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "allInferredConstraints"},
                                                                                                                                          "function": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "g2base"},
                                                                                                                                                  "function": {
                                                                                                                                                    "function": {
                                                                                                                                                      "elimination": {
                                                                                                                                                        "record": {
                                                                                                                                                          "field": "classConstraints",
                                                                                                                                                          "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                                              "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                      "type": null}],
                                                                                                                                  "body": {
                                                                                                                                    "let": {
                                                                                                                                      "bindings": [
                                                                                                                                        {
                                                                                                                                          "name": "g2",
                                                                                                                                          "term": {
                                                                                                                                            "record": {
                                                                                                                                              "fields": [
                                                                                                                                                {
                                                                                                                                                  "name": "schemaTypes",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "g2base"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {
                                                                                                                                                            "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                {
                                                                                                                                                  "name": "primitiveTypes",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "g2base"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {
                                                                                                                                                            "record": {
                                                                                                                                                              "field": "primitiveTypes",
                                                                                                                                                              "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                {
                                                                                                                                                  "name": "dataTypes",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "g2base"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {
                                                                                                                                                            "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                {
                                                                                                                                                  "name": "classConstraints",
                                                                                                                                                  "term": {"variable": "mergedConstraints"}},
                                                                                                                                                {
                                                                                                                                                  "name": "debug",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "g2base"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {
                                                                                                                                                            "record": {"field": "debug", "typeName": "hydra.typing.InferenceContext"}}}}}}}],
                                                                                                                                              "typeName": "hydra.typing.InferenceContext"}},
                                                                                                                                          "type": null}],
                                                                                                                                      "body": {
                                                                                                                                        "let": {
                                                                                                                                          "bindings": [
                                                                                                                                            {
                                                                                                                                              "name": "bterms1Subst",
                                                                                                                                              "term": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "bterms1"},
                                                                                                                                                  "function": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                                                          "function": {"variable": "hydra.substitution.substTypesInTerm"}}},
                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                                              "type": null}],
                                                                                                                                          "body": {
                                                                                                                                            "let": {
                                                                                                                                              "bindings": [
                                                                                                                                                {
                                                                                                                                                  "name": "tsbins1",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "tbins1"},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "lambda": {
                                                                                                                                                                    "body": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "t"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "s2"},
                                                                                                                                                                                "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "g2"},
                                                                                                                                                                            "function": {"variable": "hydra.inference.generalize"}}}}},
                                                                                                                                                                    "domain": null,
                                                                                                                                                                    "parameter": "t"}}},
                                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "bnames"},
                                                                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                                                                                                                  "type": null}],
                                                                                                                                              "body": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "function": {
                                                                                                                                                      "lambda": {
                                                                                                                                                        "body": {
                                                                                                                                                          "let": {
                                                                                                                                                            "bindings": [
                                                                                                                                                              {
                                                                                                                                                                "name": "body1",
                                                                                                                                                                "term": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {"variable": "bodyResult"},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "function": {
                                                                                                                                                                        "elimination": {
                                                                                                                                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                "type": null}],
                                                                                                                                                            "body": {
                                                                                                                                                              "let": {
                                                                                                                                                                "bindings": [
                                                                                                                                                                  {
                                                                                                                                                                    "name": "tbody",
                                                                                                                                                                    "term": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "bodyResult"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "function": {
                                                                                                                                                                            "elimination": {
                                                                                                                                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                    "type": null}],
                                                                                                                                                                "body": {
                                                                                                                                                                  "let": {
                                                                                                                                                                    "bindings": [
                                                                                                                                                                      {
                                                                                                                                                                        "name": "sbody",
                                                                                                                                                                        "term": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "bodyResult"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "function": {
                                                                                                                                                                                "elimination": {
                                                                                                                                                                                  "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                        "type": null}],
                                                                                                                                                                    "body": {
                                                                                                                                                                      "let": {
                                                                                                                                                                        "bindings": [
                                                                                                                                                                          {
                                                                                                                                                                            "name": "st1",
                                                                                                                                                                            "term": {
                                                                                                                                                                              "wrap": {
                                                                                                                                                                                "body": {
                                                                                                                                                                                  "application": {
                                                                                                                                                                                    "argument": {
                                                                                                                                                                                      "application": {
                                                                                                                                                                                        "argument": {"variable": "tsbins1"},
                                                                                                                                                                                        "function": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {
                                                                                                                                                                                              "function": {
                                                                                                                                                                                                "lambda": {
                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                    "let": {
                                                                                                                                                                                                      "bindings": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                          "name": "name",
                                                                                                                                                                                                          "term": {
                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                              "argument": {"variable": "pair"},
                                                                                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                                                                                                                          "type": null}],
                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                        "let": {
                                                                                                                                                                                                          "bindings": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                              "name": "ts",
                                                                                                                                                                                                              "term": {
                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                  "argument": {"variable": "pair"},
                                                                                                                                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                                                                                                              "type": null}],
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "pair": {
                                                                                                                                                                                                              "@first": {"variable": "name"},
                                                                                                                                                                                                              "@second": {
                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                  "argument": {
                                                                                                                                                                                                                    "union": {
                                                                                                                                                                                                                      "field": {"name": "variable", "term": {"variable": "name"}},
                                                                                                                                                                                                                      "typeName": "hydra.core.Term"}},
                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "ts"},
                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                            "function": {
                                                                                                                                                                                                                              "elimination": {
                                                                                                                                                                                                                                "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                                                                      "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}}}}}}}},
                                                                                                                                                                                                  "domain": null,
                                                                                                                                                                                                  "parameter": "pair"}}},
                                                                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                                                                                                                                                                "typeName": "hydra.typing.TermSubst"}},
                                                                                                                                                                            "type": null}],
                                                                                                                                                                        "body": {
                                                                                                                                                                          "let": {
                                                                                                                                                                            "bindings": [
                                                                                                                                                                              {
                                                                                                                                                                                "name": "createBinding",
                                                                                                                                                                                "term": {
                                                                                                                                                                                  "function": {
                                                                                                                                                                                    "lambda": {
                                                                                                                                                                                      "body": {
                                                                                                                                                                                        "let": {
                                                                                                                                                                                          "bindings": [
                                                                                                                                                                                            {
                                                                                                                                                                                              "name": "nameTsPair",
                                                                                                                                                                                              "term": {
                                                                                                                                                                                                "application": {
                                                                                                                                                                                                  "argument": {"variable": "bindingPair"},
                                                                                                                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                                                                                                              "type": null}],
                                                                                                                                                                                          "body": {
                                                                                                                                                                                            "let": {
                                                                                                                                                                                              "bindings": [
                                                                                                                                                                                                {
                                                                                                                                                                                                  "name": "term",
                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                      "argument": {"variable": "bindingPair"},
                                                                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                                                                                                  "type": null}],
                                                                                                                                                                                              "body": {
                                                                                                                                                                                                "let": {
                                                                                                                                                                                                  "bindings": [
                                                                                                                                                                                                    {
                                                                                                                                                                                                      "name": "name",
                                                                                                                                                                                                      "term": {
                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                          "argument": {"variable": "nameTsPair"},
                                                                                                                                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                                                                                                                      "type": null}],
                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                    "let": {
                                                                                                                                                                                                      "bindings": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                          "name": "ts",
                                                                                                                                                                                                          "term": {
                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                              "argument": {"variable": "nameTsPair"},
                                                                                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                                                                                                          "type": null}],
                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                        "let": {
                                                                                                                                                                                                          "bindings": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                              "name": "typeLambdaTerm",
                                                                                                                                                                                                              "term": {
                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                  "argument": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "ts"},
                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                            "function": {
                                                                                                                                                                                                                              "elimination": {
                                                                                                                                                                                                                                "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.reverse"}}}},
                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "term"},
                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {"variable": "st1"},
                                                                                                                                                                                                                              "function": {"variable": "hydra.substitution.substituteInTerm"}}}}},
                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {
                                                                                                                                                                                                                            "function": {
                                                                                                                                                                                                                              "lambda": {
                                                                                                                                                                                                                                "body": {
                                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                                    "lambda": {
                                                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                                                        "union": {
                                                                                                                                                                                                                                          "field": {
                                                                                                                                                                                                                                            "name": "typeLambda",
                                                                                                                                                                                                                                            "term": {
                                                                                                                                                                                                                                              "record": {
                                                                                                                                                                                                                                                "fields": [
                                                                                                                                                                                                                                                  {"name": "parameter", "term": {"variable": "v"}},
                                                                                                                                                                                                                                                  {"name": "body", "term": {"variable": "b"}}],
                                                                                                                                                                                                                                                "typeName": "hydra.core.TypeLambda"}}},
                                                                                                                                                                                                                                          "typeName": "hydra.core.Term"}},
                                                                                                                                                                                                                                      "domain": null,
                                                                                                                                                                                                                                      "parameter": "v"}}},
                                                                                                                                                                                                                                "domain": null,
                                                                                                                                                                                                                                "parameter": "b"}}},
                                                                                                                                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                                                                                                                                                                                                              "type": null}],
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "let": {
                                                                                                                                                                                                              "bindings": [
                                                                                                                                                                                                                {
                                                                                                                                                                                                                  "name": "finalTs",
                                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {"variable": "ts"},
                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "sbody"},
                                                                                                                                                                                                                          "function": {"variable": "hydra.substitution.substInTypeScheme"}}}}},
                                                                                                                                                                                                                  "type": null}],
                                                                                                                                                                                                              "body": {
                                                                                                                                                                                                                "record": {
                                                                                                                                                                                                                  "fields": [
                                                                                                                                                                                                                    {"name": "name", "term": {"variable": "name"}},
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                      "name": "term",
                                                                                                                                                                                                                      "term": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "typeLambdaTerm"},
                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {"variable": "s2"},
                                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                                      "argument": {"variable": "sbody"},
                                                                                                                                                                                                                                      "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                                                                                                              "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                                                                                                                                                                                                    {"name": "type", "term": {"maybe": [{"variable": "finalTs"}]}}],
                                                                                                                                                                                                                  "typeName": "hydra.core.Binding"}}}}}}}}}}}}}},
                                                                                                                                                                                      "domain": null,
                                                                                                                                                                                      "parameter": "bindingPair"}}},
                                                                                                                                                                                "type": null}],
                                                                                                                                                                            "body": {
                                                                                                                                                                              "let": {
                                                                                                                                                                                "bindings": [
                                                                                                                                                                                  {
                                                                                                                                                                                    "name": "bins1",
                                                                                                                                                                                    "term": {
                                                                                                                                                                                      "application": {
                                                                                                                                                                                        "argument": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "bterms1Subst"},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "tsbins1"},
                                                                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                                                                                                                                                        "function": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "createBinding"},
                                                                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                                                                                    "type": null}],
                                                                                                                                                                                "body": {
                                                                                                                                                                                  "let": {
                                                                                                                                                                                    "bindings": [
                                                                                                                                                                                      {
                                                                                                                                                                                        "name": "bodyConstraints",
                                                                                                                                                                                        "term": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "bodyResult"},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                    "elimination": {
                                                                                                                                                                                                      "record": {
                                                                                                                                                                                                        "field": "classConstraints",
                                                                                                                                                                                                        "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "sbody"},
                                                                                                                                                                                                "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                                                                        "type": null}],
                                                                                                                                                                                    "body": {
                                                                                                                                                                                      "let": {
                                                                                                                                                                                        "bindings": [
                                                                                                                                                                                          {
                                                                                                                                                                                            "name": "bindingConstraintsSubst",
                                                                                                                                                                                            "term": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "constraintsWithS2"},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "sbody"},
                                                                                                                                                                                                    "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                                                                            "type": null}],
                                                                                                                                                                                        "body": {
                                                                                                                                                                                          "let": {
                                                                                                                                                                                            "bindings": [
                                                                                                                                                                                              {
                                                                                                                                                                                                "name": "allConstraints",
                                                                                                                                                                                                "term": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "bodyConstraints"},
                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                      "application": {
                                                                                                                                                                                                        "argument": {"variable": "bindingConstraintsSubst"},
                                                                                                                                                                                                        "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                                                                                "type": null}],
                                                                                                                                                                                            "body": {
                                                                                                                                                                                              "let": {
                                                                                                                                                                                                "bindings": [
                                                                                                                                                                                                  {
                                                                                                                                                                                                    "name": "ret",
                                                                                                                                                                                                    "term": {
                                                                                                                                                                                                      "record": {
                                                                                                                                                                                                        "fields": [
                                                                                                                                                                                                          {
                                                                                                                                                                                                            "name": "term",
                                                                                                                                                                                                            "term": {
                                                                                                                                                                                                              "union": {
                                                                                                                                                                                                                "field": {
                                                                                                                                                                                                                  "name": "let",
                                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                                    "record": {
                                                                                                                                                                                                                      "fields": [
                                                                                                                                                                                                                        {"name": "bindings", "term": {"variable": "bins1"}},
                                                                                                                                                                                                                        {"name": "body", "term": {"variable": "body1"}}],
                                                                                                                                                                                                                      "typeName": "hydra.core.Let"}}},
                                                                                                                                                                                                                "typeName": "hydra.core.Term"}}},
                                                                                                                                                                                                          {"name": "type", "term": {"variable": "tbody"}},
                                                                                                                                                                                                          {
                                                                                                                                                                                                            "name": "subst",
                                                                                                                                                                                                            "term": {
                                                                                                                                                                                                              "application": {
                                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                                  "list": [{"variable": "s1"}, {"variable": "s2"}, {"variable": "sbody"}]},
                                                                                                                                                                                                                "function": {"variable": "hydra.substitution.composeTypeSubstList"}}}},
                                                                                                                                                                                                          {"name": "classConstraints", "term": {"variable": "allConstraints"}}],
                                                                                                                                                                                                        "typeName": "hydra.typing.InferenceResult"}},
                                                                                                                                                                                                    "type": null}],
                                                                                                                                                                                                "body": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "ret"},
                                                                                                                                                                                                    "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}}}}}}}}}}}}}}}},
                                                                                                                                                        "domain": null,
                                                                                                                                                        "parameter": "bodyResult"}}},
                                                                                                                                                  "function": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"literal": {"string": "let body"}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "body0"},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {"variable": "g2"},
                                                                                                                                                                      "function": {
                                                                                                                                                                        "application": {
                                                                                                                                                                          "argument": {"variable": "tsbins1"},
                                                                                                                                                                          "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                                                                                                                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}}}}}}}}}}}}}},
                                                                                                      "domain": null,
                                                                                                      "parameter": "_"}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "s2"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "cx0"},
                                                                                                            "function": {"variable": "hydra.checking.checkTypeSubst"}}}}},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                                            "domain": null,
                                                                                            "parameter": "s2"}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"literal": {"string": "temporary type bindings"}},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "tbins1"},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "tbins0"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "s1"},
                                                                                                                  "function": {"variable": "hydra.substitution.substInType"}}},
                                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "cx0"},
                                                                                                              "function": {
                                                                                                                "function": {
                                                                                                                  "elimination": {
                                                                                                                    "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                          "function": {"variable": "hydra.unification.unifyTypeLists"}}}}}}}}},
                                                                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}}}},
                                                              "domain": null,
                                                              "parameter": "inferredResult"}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "bins0"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "cx1"},
                                                                    "function": {"variable": "hydra.inference.inferTypesOfTemporaryBindings"}}}}},
                                                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                            "domain": null,
                                            "parameter": "bvars"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "bins0"},
                                                  "function": {"function": {"primitive": "hydra.lib.lists.length"}}}},
                                              "function": {"variable": "hydra.schemas.freshNames"}}},
                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "letTerm"}}},
                "domain": null,
                "parameter": "cx0"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfLet",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Normalize a let term before inferring its type"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "bindings0",
                              "term": {
                                "application": {
                                  "argument": {"variable": "let0"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "body0",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "let0"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "names",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "bindings0"},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}},
                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "nameSet",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "names"},
                                              "function": {"function": {"primitive": "hydra.lib.sets.fromList"}}}},
                                          "type": null}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "toPair",
                                              "term": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "name",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "binding"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "term",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "binding"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "pair": {
                                                                "@first": {"variable": "name"},
                                                                "@second": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "term"},
                                                                            "function": {"variable": "hydra.rewriting.freeVariablesInTerm"}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.sets.toList"}}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "function": {
                                                                            "lambda": {
                                                                              "body": {
                                                                                "application": {
                                                                                  "argument": {"variable": "nameSet"},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "n"},
                                                                                      "function": {"function": {"primitive": "hydra.lib.sets.member"}}}}}},
                                                                              "domain": null,
                                                                              "parameter": "n"}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.lists.filter"}}}}}}}}}}}},
                                                    "domain": null,
                                                    "parameter": "binding"}}},
                                              "type": null}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "adjList",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "bindings0"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "toPair"},
                                                          "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                  "type": null}],
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "groups",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "adjList"},
                                                          "function": {"variable": "hydra.sorting.topologicalSortComponents"}}},
                                                      "type": null}],
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "bindingMap",
                                                          "term": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "bindings0"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "names"},
                                                                      "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                              "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                                          "type": null}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "createLet",
                                                              "term": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "union": {
                                                                              "field": {
                                                                                "name": "let",
                                                                                "term": {
                                                                                  "record": {
                                                                                    "fields": [
                                                                                      {
                                                                                        "name": "bindings",
                                                                                        "term": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "group"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "function": {
                                                                                                        "lambda": {
                                                                                                          "body": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "bindingMap"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "n"},
                                                                                                                  "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                                                                                                          "domain": null,
                                                                                                          "parameter": "n"}}},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.maybes.cat"}}}}},
                                                                                      {"name": "body", "term": {"variable": "e"}}],
                                                                                    "typeName": "hydra.core.Let"}}},
                                                                              "typeName": "hydra.core.Term"}},
                                                                          "domain": null,
                                                                          "parameter": "group"}}},
                                                                    "domain": null,
                                                                    "parameter": "e"}}},
                                                              "type": null}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "rewrittenLet",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {"variable": "groups"},
                                                                          "function": {"function": {"primitive": "hydra.lib.lists.reverse"}}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "body0"},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "createLet"},
                                                                              "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "restoreLet",
                                                                      "term": {
                                                                        "function": {
                                                                          "lambda": {
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "helper",
                                                                                    "term": {
                                                                                      "function": {
                                                                                        "lambda": {
                                                                                          "body": {
                                                                                            "function": {
                                                                                              "lambda": {
                                                                                                "body": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "let": {
                                                                                                          "bindings": [
                                                                                                            {
                                                                                                              "name": "nonzero",
                                                                                                              "term": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "term"},
                                                                                                                        "function": {
                                                                                                                          "function": {
                                                                                                                            "elimination": {
                                                                                                                              "union": {
                                                                                                                                "cases": [
                                                                                                                                  {
                                                                                                                                    "name": "let",
                                                                                                                                    "term": {
                                                                                                                                      "function": {
                                                                                                                                        "lambda": {
                                                                                                                                          "body": {
                                                                                                                                            "let": {
                                                                                                                                              "bindings": [
                                                                                                                                                {
                                                                                                                                                  "name": "bs",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "l"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                                                                                                  "type": null}],
                                                                                                                                              "body": {
                                                                                                                                                "let": {
                                                                                                                                                  "bindings": [
                                                                                                                                                    {
                                                                                                                                                      "name": "e",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "l"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                                                                                                                                      "type": null}],
                                                                                                                                                  "body": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "e"},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"list": [{"variable": "bs"}, {"variable": "bins"}]},
                                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.concat"}}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"literal": {"integer": {"int32": 1.0}}},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {"variable": "level"},
                                                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.math.sub"}}}}}},
                                                                                                                                                              "function": {"variable": "helper"}}}}}}}}}}},
                                                                                                                                          "domain": null,
                                                                                                                                          "parameter": "l"}}}}],
                                                                                                                                "default": null,
                                                                                                                                "typeName": "hydra.core.Term"}}}}}},
                                                                                                                    "domain": null,
                                                                                                                    "parameter": "term"}}},
                                                                                                              "type": null}],
                                                                                                          "body": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "term"},
                                                                                                                  "function": {"variable": "nonzero"}}},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "pair": {"@first": {"variable": "bins"}, "@second": {"variable": "term"}}},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"literal": {"integer": {"int32": 0.0}}},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "level"},
                                                                                                                              "function": {"function": {"primitive": "hydra.lib.equality.equal"}}}}}},
                                                                                                                      "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}}}},
                                                                                                      "domain": null,
                                                                                                      "parameter": "term"}}},
                                                                                                "domain": null,
                                                                                                "parameter": "bins"}}},
                                                                                          "domain": null,
                                                                                          "parameter": "level"}}},
                                                                                    "type": null}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "result",
                                                                                        "term": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "iterm"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"list": []},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "groups"},
                                                                                                        "function": {"function": {"primitive": "hydra.lib.lists.length"}}}},
                                                                                                    "function": {"variable": "helper"}}}}}}},
                                                                                        "type": null}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "bindingList",
                                                                                            "term": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "result"},
                                                                                                "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                            "type": null}],
                                                                                        "body": {
                                                                                          "let": {
                                                                                            "bindings": [
                                                                                              {
                                                                                                "name": "e",
                                                                                                "term": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "result"},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                "type": null}],
                                                                                            "body": {
                                                                                              "let": {
                                                                                                "bindings": [
                                                                                                  {
                                                                                                    "name": "bindingMap2",
                                                                                                    "term": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "bindingList"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "function": {
                                                                                                                    "lambda": {
                                                                                                                      "body": {
                                                                                                                        "pair": {
                                                                                                                          "@first": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "b"},
                                                                                                                              "function": {
                                                                                                                                "function": {
                                                                                                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                                                                                          "@second": {"variable": "b"}}},
                                                                                                                      "domain": null,
                                                                                                                      "parameter": "b"}}},
                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                        "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}},
                                                                                                    "type": null}],
                                                                                                "body": {
                                                                                                  "union": {
                                                                                                    "field": {
                                                                                                      "name": "let",
                                                                                                      "term": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {
                                                                                                              "name": "bindings",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "names"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {
                                                                                                                            "function": {
                                                                                                                              "lambda": {
                                                                                                                                "body": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "bindingMap2"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "n"},
                                                                                                                                        "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                                                                                                                                "domain": null,
                                                                                                                                "parameter": "n"}}},
                                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                                  "function": {"function": {"primitive": "hydra.lib.maybes.cat"}}}}},
                                                                                                            {"name": "body", "term": {"variable": "e"}}],
                                                                                                          "typeName": "hydra.core.Let"}}},
                                                                                                    "typeName": "hydra.core.Term"}}}}}}}}}}}},
                                                                            "domain": null,
                                                                            "parameter": "iterm"}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "rewriteResult",
                                                                          "term": {
                                                                            "function": {
                                                                              "lambda": {
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "iterm",
                                                                                        "term": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "result"},
                                                                                            "function": {
                                                                                              "function": {
                                                                                                "elimination": {
                                                                                                  "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                        "type": null}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "itype",
                                                                                            "term": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "result"},
                                                                                                "function": {
                                                                                                  "function": {
                                                                                                    "elimination": {
                                                                                                      "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                            "type": null}],
                                                                                        "body": {
                                                                                          "let": {
                                                                                            "bindings": [
                                                                                              {
                                                                                                "name": "isubst",
                                                                                                "term": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "result"},
                                                                                                    "function": {
                                                                                                      "function": {
                                                                                                        "elimination": {
                                                                                                          "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                "type": null}],
                                                                                            "body": {
                                                                                              "let": {
                                                                                                "bindings": [
                                                                                                  {
                                                                                                    "name": "iconstraints",
                                                                                                    "term": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "result"},
                                                                                                        "function": {
                                                                                                          "function": {
                                                                                                            "elimination": {
                                                                                                              "record": {
                                                                                                                "field": "classConstraints",
                                                                                                                "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                    "type": null}],
                                                                                                "body": {
                                                                                                  "record": {
                                                                                                    "fields": [
                                                                                                      {
                                                                                                        "name": "term",
                                                                                                        "term": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "iterm"},
                                                                                                            "function": {"variable": "restoreLet"}}}},
                                                                                                      {"name": "type", "term": {"variable": "itype"}},
                                                                                                      {"name": "subst", "term": {"variable": "isubst"}},
                                                                                                      {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                                                    "typeName": "hydra.typing.InferenceResult"}}}}}}}}}},
                                                                                "domain": null,
                                                                                "parameter": "result"}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "res",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "rewrittenLet"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "union": {
                                                                                          "cases": [
                                                                                            {
                                                                                              "name": "let",
                                                                                              "term": {
                                                                                                "function": {
                                                                                                  "lambda": {
                                                                                                    "body": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "l"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "cx"},
                                                                                                            "function": {"variable": "hydra.inference.inferTypeOfLetNormalized"}}}}},
                                                                                                    "domain": null,
                                                                                                    "parameter": "l"}}}}],
                                                                                          "default": [
                                                                                            {
                                                                                              "application": {
                                                                                                "argument": {"literal": {"string": "empty let term"}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "rewrittenLet"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "cx"},
                                                                                                        "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}}],
                                                                                          "typeName": "hydra.core.Term"}}}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "application": {
                                                                              "argument": {"variable": "res"},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"variable": "rewriteResult"},
                                                                                  "function": {"function": {"primitive": "hydra.lib.flows.map"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "let0"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfList",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a list"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "application": {
                    "argument": {"literal": {"string": "list element"}},
                    "function": {
                      "application": {
                        "argument": {
                          "function": {
                            "lambda": {
                              "body": {
                                "union": {
                                  "field": {"name": "list", "term": {"variable": "x"}},
                                  "typeName": "hydra.core.Term"}},
                              "domain": null,
                              "parameter": "x"}}},
                        "function": {
                          "application": {
                            "argument": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "union": {
                                      "field": {"name": "list", "term": {"variable": "x"}},
                                      "typeName": "hydra.core.Type"}},
                                  "domain": null,
                                  "parameter": "x"}}},
                            "function": {
                              "application": {
                                "argument": {"variable": "cx"},
                                "function": {"variable": "hydra.inference.inferTypeOfCollection"}}}}}}}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfLiteral",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a literal"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "record": {
                              "fields": [
                                {
                                  "name": "term",
                                  "term": {
                                    "union": {
                                      "field": {"name": "literal", "term": {"variable": "lit"}},
                                      "typeName": "hydra.core.Term"}}},
                                {
                                  "name": "type",
                                  "term": {
                                    "union": {
                                      "field": {
                                        "name": "literal",
                                        "term": {
                                          "application": {
                                            "argument": {"variable": "lit"},
                                            "function": {"variable": "hydra.reflect.literalType"}}}},
                                      "typeName": "hydra.core.Type"}}},
                                {
                                  "name": "subst",
                                  "term": {"variable": "hydra.substitution.idTypeSubst"}},
                                {
                                  "name": "classConstraints",
                                  "term": {"function": {"primitive": "hydra.lib.maps.empty"}}}],
                              "typeName": "hydra.typing.InferenceResult"}},
                          "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                      "domain": null,
                      "parameter": "lit"}}},
                "domain": null,
                "parameter": "_"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfMap",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a map"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "application": {
                                    "argument": {
                                      "function": {
                                        "lambda": {
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "kterms",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "kresults"},
                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "ktypes",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "kresults"},
                                                                            "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                    "type": null}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "ksubst",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "kresults"},
                                                                                "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                            "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                        "type": null}],
                                                                    "body": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "function": {
                                                                            "lambda": {
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "vterms",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "vresults"},
                                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                      "type": null}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "vtypes",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "vresults"},
                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                          "type": null}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "vsubst",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "vresults"},
                                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                              "type": null}],
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "kcons",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "ktypes"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "record": {
                                                                                                                    "fields": [
                                                                                                                      {
                                                                                                                        "name": "left",
                                                                                                                        "term": {
                                                                                                                          "union": {
                                                                                                                            "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                                                            "typeName": "hydra.core.Type"}}},
                                                                                                                      {"name": "right", "term": {"variable": "t"}},
                                                                                                                      {"name": "comment", "term": {"literal": {"string": "map key"}}}],
                                                                                                                    "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                "domain": null,
                                                                                                                "parameter": "t"}}},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                  "type": null}],
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "vcons",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "vtypes"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "record": {
                                                                                                                        "fields": [
                                                                                                                          {
                                                                                                                            "name": "left",
                                                                                                                            "term": {
                                                                                                                              "union": {
                                                                                                                                "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                                                                "typeName": "hydra.core.Type"}}},
                                                                                                                          {"name": "right", "term": {"variable": "t"}},
                                                                                                                          {"name": "comment", "term": {"literal": {"string": "map value"}}}],
                                                                                                                        "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                    "domain": null,
                                                                                                                    "parameter": "t"}}},
                                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                      "type": null}],
                                                                                                  "body": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"list": [{"variable": "kcons"}, {"variable": "vcons"}]},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.concat"}}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "list": [
                                                                                                                            {"variable": "ksubst"},
                                                                                                                            {"variable": "vsubst"},
                                                                                                                            {"variable": "subst"}]},
                                                                                                                        "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "union": {
                                                                                                                            "field": {
                                                                                                                              "name": "map",
                                                                                                                              "term": {
                                                                                                                                "record": {
                                                                                                                                  "fields": [
                                                                                                                                    {
                                                                                                                                      "name": "keys",
                                                                                                                                      "term": {
                                                                                                                                        "union": {
                                                                                                                                          "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                                                                          "typeName": "hydra.core.Type"}}},
                                                                                                                                    {
                                                                                                                                      "name": "values",
                                                                                                                                      "term": {
                                                                                                                                        "union": {
                                                                                                                                          "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                                                                          "typeName": "hydra.core.Type"}}}],
                                                                                                                                  "typeName": "hydra.core.MapType"}}},
                                                                                                                            "typeName": "hydra.core.Type"}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "union": {
                                                                                                                                "field": {
                                                                                                                                  "name": "map",
                                                                                                                                  "term": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "vterms"},
                                                                                                                                          "function": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "kterms"},
                                                                                                                                              "function": {"function": {"primitive": "hydra.lib.lists.zip"}}}}}},
                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.maps.fromList"}}}}},
                                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                                            "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                "domain": null,
                                                                                                                "parameter": "subst"}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "cx"},
                                                                                                              "function": {"variable": "hydra.inference.mapConstraints"}}}}}}}}}}}}}}}}},
                                                                              "domain": null,
                                                                              "parameter": "vresults"}}},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "m"},
                                                                                        "function": {"function": {"primitive": "hydra.lib.maps.elems"}}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "function": {
                                                                                            "lambda": {
                                                                                              "body": {
                                                                                                "pair": {
                                                                                                  "@first": {"variable": "v"},
                                                                                                  "@second": {"literal": {"string": "map value"}}}},
                                                                                              "domain": null,
                                                                                              "parameter": "v"}}},
                                                                                        "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "cx"},
                                                                                    "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                                                        "domain": null,
                                                        "parameter": "kresults"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "m"},
                                                                  "function": {"function": {"primitive": "hydra.lib.maps.keys"}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "pair": {
                                                                            "@first": {"variable": "k"},
                                                                            "@second": {"literal": {"string": "map key"}}}},
                                                                        "domain": null,
                                                                        "parameter": "k"}}},
                                                                  "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "union": {
                                                                  "field": {
                                                                    "name": "map",
                                                                    "term": {
                                                                      "record": {
                                                                        "fields": [
                                                                          {
                                                                            "name": "keys",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                "typeName": "hydra.core.Type"}}},
                                                                          {
                                                                            "name": "values",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                "typeName": "hydra.core.Type"}}}],
                                                                        "typeName": "hydra.core.MapType"}}},
                                                                  "typeName": "hydra.core.Type"}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "union": {
                                                                          "field": {
                                                                            "name": "map",
                                                                            "term": {"function": {"primitive": "hydra.lib.maps.empty"}}},
                                                                          "typeName": "hydra.core.Term"}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"list": [{"variable": "kvar"}, {"variable": "vvar"}]},
                                                                          "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                  "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "m"},
                                                          "function": {"function": {"primitive": "hydra.lib.maps.null"}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}},
                                          "domain": null,
                                          "parameter": "vvar"}}},
                                    "function": {
                                      "application": {
                                        "argument": {"variable": "hydra.schemas.freshName"},
                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                "domain": null,
                                "parameter": "kvar"}}},
                          "function": {
                            "application": {
                              "argument": {"variable": "hydra.schemas.freshName"},
                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                      "domain": null,
                      "parameter": "m"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfOptional",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of an optional"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "trmCons",
                              "term": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "union": {
                                            "field": {
                                              "name": "maybe",
                                              "term": {
                                                "maybe": [
                                                  {
                                                    "application": {
                                                      "argument": {"variable": "terms"},
                                                      "function": {"function": {"primitive": "hydra.lib.lists.head"}}}}]}},
                                            "typeName": "hydra.core.Term"}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "union": {
                                                "field": {"name": "maybe", "term": {"maybe": null}},
                                                "typeName": "hydra.core.Term"}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "terms"},
                                                    "function": {"function": {"primitive": "hydra.lib.lists.null"}}}},
                                                "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}},
                                    "domain": null,
                                    "parameter": "terms"}}},
                              "type": null}],
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "m"},
                                  "function": {
                                    "application": {
                                      "argument": {"function": {"primitive": "hydra.lib.lists.singleton"}},
                                      "function": {
                                        "application": {
                                          "argument": {"list": []},
                                          "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                              "function": {
                                "application": {
                                  "argument": {"literal": {"string": "optional element"}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "trmCons"},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "union": {
                                                    "field": {"name": "maybe", "term": {"variable": "x"}},
                                                    "typeName": "hydra.core.Type"}},
                                                "domain": null,
                                                "parameter": "x"}}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {"variable": "hydra.inference.inferTypeOfCollection"}}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "m"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfPair",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a pair"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {
                                "list": [
                                  {
                                    "pair": {
                                      "@first": {
                                        "application": {
                                          "argument": {"variable": "p"},
                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                      "@second": {"literal": {"string": "pair first element"}}}},
                                  {
                                    "pair": {
                                      "@first": {
                                        "application": {
                                          "argument": {"variable": "p"},
                                          "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                      "@second": {"literal": {"string": "pair second element"}}}}]},
                              "function": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {"variable": "hydra.inference.inferMany"}}}}},
                          "function": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "let": {
                                        "bindings": [
                                          {
                                            "name": "iterms",
                                            "term": {
                                              "application": {
                                                "argument": {"variable": "results"},
                                                "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                            "type": null}],
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "itypes",
                                                "term": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"variable": "results"},
                                                        "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                    "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "isubst",
                                                    "term": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "results"},
                                                            "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                    "type": null}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "ifst",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "iterms"},
                                                            "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                                        "type": null}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "isnd",
                                                            "term": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"variable": "iterms"},
                                                                    "function": {"function": {"primitive": "hydra.lib.lists.tail"}}}},
                                                                "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                                            "type": null}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "tyFst",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "itypes"},
                                                                    "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "tySnd",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "itypes"},
                                                                            "function": {"function": {"primitive": "hydra.lib.lists.tail"}}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                                                    "type": null}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "pairTerm",
                                                                        "term": {
                                                                          "union": {
                                                                            "field": {
                                                                              "name": "pair",
                                                                              "term": {
                                                                                "pair": {"@first": {"variable": "ifst"}, "@second": {"variable": "isnd"}}}},
                                                                            "typeName": "hydra.core.Term"}},
                                                                        "type": null}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "termWithTypes",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {
                                                                                  "name": "typeApplication",
                                                                                  "term": {
                                                                                    "record": {
                                                                                      "fields": [
                                                                                        {
                                                                                          "name": "body",
                                                                                          "term": {
                                                                                            "union": {
                                                                                              "field": {
                                                                                                "name": "typeApplication",
                                                                                                "term": {
                                                                                                  "record": {
                                                                                                    "fields": [
                                                                                                      {"name": "body", "term": {"variable": "pairTerm"}},
                                                                                                      {"name": "type", "term": {"variable": "tyFst"}}],
                                                                                                    "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                              "typeName": "hydra.core.Term"}}},
                                                                                        {"name": "type", "term": {"variable": "tySnd"}}],
                                                                                      "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                "typeName": "hydra.core.Term"}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {"variable": "isubst"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "pair",
                                                                                      "term": {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {"name": "first", "term": {"variable": "tyFst"}},
                                                                                            {"name": "second", "term": {"variable": "tySnd"}}],
                                                                                          "typeName": "hydra.core.PairType"}}},
                                                                                    "typeName": "hydra.core.Type"}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "termWithTypes"},
                                                                                    "function": {"variable": "hydra.inference.yield"}}}}}}}}}}}}}}}}}}}}}}}}},
                                    "domain": null,
                                    "parameter": "results"}}},
                              "function": {"function": {"primitive": "hydra.lib.flows.map"}}}}}},
                      "domain": null,
                      "parameter": "p"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfPrimitive",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Infer the type of a primitive function. Class constraints from the primitive's type scheme are propagated to the inference result."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {
                                          "field": "primitiveTypes",
                                          "typeName": "hydra.typing.InferenceContext"}}}}}},
                              "function": {
                                "application": {
                                  "argument": {"variable": "name"},
                                  "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                          "function": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "constraints",
                                                      "term": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "ts"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                              "function": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}}}}}},
                                                      "type": null}],
                                                  "body": {
                                                    "application": {
                                                      "argument": {"variable": "constraints"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "ts"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "union": {
                                                                          "field": {
                                                                            "name": "function",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {"name": "primitive", "term": {"variable": "name"}},
                                                                                "typeName": "hydra.core.Function"}}},
                                                                          "typeName": "hydra.core.Term"}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {"variable": "ts"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                          "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                  "function": {"variable": "hydra.inference.yieldCheckedWithConstraints"}}}}}}}}}}},
                                              "domain": null,
                                              "parameter": "ts"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "scheme"},
                                                "function": {"variable": "hydra.schemas.instantiateTypeScheme"}}},
                                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                    "domain": null,
                                    "parameter": "scheme"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "name"},
                                              "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {"literal": {"string": "No such primitive: "}},
                                              "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                  "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                      "domain": null,
                      "parameter": "name"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfProjection",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a record projection"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "tname",
                              "term": {
                                "application": {
                                  "argument": {"variable": "proj"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Projection"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "fname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "proj"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "field", "typeName": "hydra.core.Projection"}}}}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "svars",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "schemaType"},
                                                    "function": {
                                                      "function": {
                                                        "elimination": {
                                                          "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "stype",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "schemaType"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "function",
                                                                                      "term": {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {
                                                                                              "name": "domain",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "svars"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "union": {
                                                                                                                    "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                    "typeName": "hydra.core.Type"}},
                                                                                                                "domain": null,
                                                                                                                "parameter": "x"}}},
                                                                                                          "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "tname"},
                                                                                                      "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                                            {"name": "codomain", "term": {"variable": "ftyp"}}],
                                                                                          "typeName": "hydra.core.FunctionType"}}},
                                                                                    "typeName": "hydra.core.Type"}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "function",
                                                                                              "term": {
                                                                                                "union": {
                                                                                                  "field": {
                                                                                                    "name": "elimination",
                                                                                                    "term": {
                                                                                                      "union": {
                                                                                                        "field": {
                                                                                                          "name": "record",
                                                                                                          "term": {
                                                                                                            "record": {
                                                                                                              "fields": [
                                                                                                                {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                {"name": "field", "term": {"variable": "fname"}}],
                                                                                                              "typeName": "hydra.core.Projection"}}},
                                                                                                        "typeName": "hydra.core.Elimination"}}},
                                                                                                  "typeName": "hydra.core.Function"}}},
                                                                                            "typeName": "hydra.core.Term"}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "svars"},
                                                                                            "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                    "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                        "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                                    "domain": null,
                                                                    "parameter": "ftyp"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "sfields"},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "fname"},
                                                                          "function": {"variable": "hydra.schemas.findFieldType"}}}}},
                                                                  "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                          "domain": null,
                                                          "parameter": "sfields"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "stype"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "tname"},
                                                                "function": {"variable": "hydra.extract.core.recordType"}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "schemaType"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "tname"},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                      "domain": null,
                      "parameter": "proj"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfRecord",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a record"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "tname",
                              "term": {
                                "application": {
                                  "argument": {"variable": "record"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Record"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "fields",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "record"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "fields", "typeName": "hydra.core.Record"}}}}}},
                                  "type": null}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "fnames",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "fields"},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}},
                                              "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                      "type": null}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "function": {
                                                    "lambda": {
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "svars",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "schemaType"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "type": null}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "stype",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "schemaType"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "iterms",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "results"},
                                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "itypes",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"variable": "results"},
                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                              "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "isubst",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "results"},
                                                                                      "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                  "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "ityp",
                                                                                  "term": {
                                                                                    "union": {
                                                                                      "field": {
                                                                                        "name": "record",
                                                                                        "term": {
                                                                                          "record": {
                                                                                            "fields": [
                                                                                              {"name": "typeName", "term": {"variable": "tname"}},
                                                                                              {
                                                                                                "name": "fields",
                                                                                                "term": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "itypes"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "fnames"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "function": {
                                                                                                                "lambda": {
                                                                                                                  "body": {
                                                                                                                    "function": {
                                                                                                                      "lambda": {
                                                                                                                        "body": {
                                                                                                                          "record": {
                                                                                                                            "fields": [
                                                                                                                              {"name": "name", "term": {"variable": "n"}},
                                                                                                                              {"name": "type", "term": {"variable": "t"}}],
                                                                                                                            "typeName": "hydra.core.FieldType"}},
                                                                                                                        "domain": null,
                                                                                                                        "parameter": "t"}}},
                                                                                                                  "domain": null,
                                                                                                                  "parameter": "n"}}},
                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.zipWith"}}}}}}}}}],
                                                                                            "typeName": "hydra.core.RowType"}}},
                                                                                      "typeName": "hydra.core.Type"}},
                                                                                  "type": null}],
                                                                              "body": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "list": [
                                                                                      {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {"name": "left", "term": {"variable": "stype"}},
                                                                                            {"name": "right", "term": {"variable": "ityp"}},
                                                                                            {
                                                                                              "name": "comment",
                                                                                              "term": {"literal": {"string": "schema type of record"}}}],
                                                                                          "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "subst"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "isubst"},
                                                                                                        "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "svars"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "function": {
                                                                                                                    "lambda": {
                                                                                                                      "body": {
                                                                                                                        "union": {
                                                                                                                          "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                          "typeName": "hydra.core.Type"}},
                                                                                                                      "domain": null,
                                                                                                                      "parameter": "x"}}},
                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "tname"},
                                                                                                            "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "union": {
                                                                                                                "field": {
                                                                                                                  "name": "record",
                                                                                                                  "term": {
                                                                                                                    "record": {
                                                                                                                      "fields": [
                                                                                                                        {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                        {
                                                                                                                          "name": "fields",
                                                                                                                          "term": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "iterms"},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "fnames"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {
                                                                                                                                        "function": {
                                                                                                                                          "lambda": {
                                                                                                                                            "body": {
                                                                                                                                              "function": {
                                                                                                                                                "lambda": {
                                                                                                                                                  "body": {
                                                                                                                                                    "record": {
                                                                                                                                                      "fields": [
                                                                                                                                                        {"name": "name", "term": {"variable": "n"}},
                                                                                                                                                        {"name": "term", "term": {"variable": "t"}}],
                                                                                                                                                      "typeName": "hydra.core.Field"}},
                                                                                                                                                  "domain": null,
                                                                                                                                                  "parameter": "t"}}},
                                                                                                                                            "domain": null,
                                                                                                                                            "parameter": "n"}}},
                                                                                                                                      "function": {"function": {"primitive": "hydra.lib.lists.zipWith"}}}}}}}}}],
                                                                                                                      "typeName": "hydra.core.Record"}}},
                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "svars"},
                                                                                                                "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                        "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                            "domain": null,
                                                                                            "parameter": "subst"}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "cx"},
                                                                                          "function": {"variable": "hydra.inference.mapConstraints"}}}}}}}}}}}}}}}}}}},
                                                      "domain": null,
                                                      "parameter": "results"}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "fields"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "pair": {
                                                                          "@first": {
                                                                            "application": {
                                                                              "argument": {"variable": "f"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                                                          "@second": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "f"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"literal": {"string": "field "}},
                                                                                  "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}}}},
                                                                      "domain": null,
                                                                      "parameter": "f"}}},
                                                                "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "cx"},
                                                            "function": {"variable": "hydra.inference.inferMany"}}}}},
                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                            "domain": null,
                                            "parameter": "schemaType"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "tname"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                                          "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}},
                      "domain": null,
                      "parameter": "record"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfSet",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a set"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {"variable": "s"},
                              "function": {"function": {"primitive": "hydra.lib.sets.toList"}}}},
                          "function": {
                            "application": {
                              "argument": {"literal": {"string": "set element"}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "union": {
                                            "field": {
                                              "name": "set",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "terms"},
                                                  "function": {"function": {"primitive": "hydra.lib.sets.fromList"}}}}},
                                            "typeName": "hydra.core.Term"}},
                                        "domain": null,
                                        "parameter": "terms"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "union": {
                                                "field": {"name": "set", "term": {"variable": "x"}},
                                                "typeName": "hydra.core.Type"}},
                                            "domain": null,
                                            "parameter": "x"}}},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {"variable": "hydra.inference.inferTypeOfCollection"}}}}}}}}}}},
                      "domain": null,
                      "parameter": "s"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a given term"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "let": {
                                "bindings": [
                                  {
                                    "name": "matchTerm",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {
                                          "function": {
                                            "elimination": {
                                              "union": {
                                                "cases": [
                                                  {
                                                    "name": "annotated",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "a"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfAnnotatedTerm"}}}}},
                                                          "domain": null,
                                                          "parameter": "a"}}}},
                                                  {
                                                    "name": "application",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "a"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfApplication"}}}}},
                                                          "domain": null,
                                                          "parameter": "a"}}}},
                                                  {
                                                    "name": "either",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "e"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfEither"}}}}},
                                                          "domain": null,
                                                          "parameter": "e"}}}},
                                                  {
                                                    "name": "function",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "f"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfFunction"}}}}},
                                                          "domain": null,
                                                          "parameter": "f"}}}},
                                                  {
                                                    "name": "let",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "l"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfLet"}}}}},
                                                          "domain": null,
                                                          "parameter": "l"}}}},
                                                  {
                                                    "name": "list",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "els"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfList"}}}}},
                                                          "domain": null,
                                                          "parameter": "els"}}}},
                                                  {
                                                    "name": "literal",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "l"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfLiteral"}}}}},
                                                          "domain": null,
                                                          "parameter": "l"}}}},
                                                  {
                                                    "name": "map",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "m"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfMap"}}}}},
                                                          "domain": null,
                                                          "parameter": "m"}}}},
                                                  {
                                                    "name": "maybe",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "m"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfOptional"}}}}},
                                                          "domain": null,
                                                          "parameter": "m"}}}},
                                                  {
                                                    "name": "pair",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "p"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfPair"}}}}},
                                                          "domain": null,
                                                          "parameter": "p"}}}},
                                                  {
                                                    "name": "record",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "r"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfRecord"}}}}},
                                                          "domain": null,
                                                          "parameter": "r"}}}},
                                                  {
                                                    "name": "set",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "s"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfSet"}}}}},
                                                          "domain": null,
                                                          "parameter": "s"}}}},
                                                  {
                                                    "name": "typeApplication",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "tt"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfTypeApplication"}}}}},
                                                          "domain": null,
                                                          "parameter": "tt"}}}},
                                                  {
                                                    "name": "typeLambda",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "ta"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfTypeLambda"}}}}},
                                                          "domain": null,
                                                          "parameter": "ta"}}}},
                                                  {
                                                    "name": "union",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "i"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfInjection"}}}}},
                                                          "domain": null,
                                                          "parameter": "i"}}}},
                                                  {
                                                    "name": "unit",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "hydra.inference.inferTypeOfUnit"},
                                                              "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                          "domain": null,
                                                          "parameter": "_"}}}},
                                                  {
                                                    "name": "variable",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "name"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfVariable"}}}}},
                                                          "domain": null,
                                                          "parameter": "name"}}}},
                                                  {
                                                    "name": "wrap",
                                                    "term": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {"variable": "w"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfWrappedTerm"}}}}},
                                                          "domain": null,
                                                          "parameter": "w"}}}}],
                                                "default": null,
                                                "typeName": "hydra.core.Term"}}}}}},
                                    "type": null}],
                                "body": {
                                  "application": {
                                    "argument": {"variable": "matchTerm"},
                                    "function": {
                                      "application": {
                                        "argument": {"variable": "desc"},
                                        "function": {"variable": "hydra.monads.withTrace"}}}}}}},
                            "domain": null,
                            "parameter": "desc"}}},
                      "domain": null,
                      "parameter": "term"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfTypeLambda",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Infer the type of a type abstraction; just pass through to the lambda body."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"literal": {"string": "type abstraction"}},
                          "function": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "ta"},
                                  "function": {
                                    "function": {
                                      "elimination": {"record": {"field": "body", "typeName": "hydra.core.TypeLambda"}}}}}},
                              "function": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                      "domain": null,
                      "parameter": "ta"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfTypeApplication",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Infer the type of a type application; just pass through to the inner term."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"literal": {"string": "type application term"}},
                          "function": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "tt"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "body", "typeName": "hydra.core.TypeApplicationTerm"}}}}}},
                              "function": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                      "domain": null,
                      "parameter": "tt"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfUnit",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "The trivial inference rule for the unit term"}}}],
          "body": {
            "record": {
              "fields": [
                {
                  "name": "term",
                  "term": {
                    "union": {
                      "field": {"name": "unit", "term": {"unit": {}}},
                      "typeName": "hydra.core.Term"}}},
                {
                  "name": "type",
                  "term": {
                    "union": {
                      "field": {"name": "unit", "term": {"unit": {}}},
                      "typeName": "hydra.core.Type"}}},
                {
                  "name": "subst",
                  "term": {"variable": "hydra.substitution.idTypeSubst"}},
                {
                  "name": "classConstraints",
                  "term": {"function": {"primitive": "hydra.lib.maps.empty"}}}],
              "typeName": "hydra.typing.InferenceResult"}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfUnwrap",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of an unwrap operation"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "let": {
                                    "bindings": [
                                      {
                                        "name": "svars",
                                        "term": {
                                          "application": {
                                            "argument": {"variable": "schemaType"},
                                            "function": {
                                              "function": {
                                                "elimination": {
                                                  "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                        "type": null}],
                                    "body": {
                                      "let": {
                                        "bindings": [
                                          {
                                            "name": "stype",
                                            "term": {
                                              "application": {
                                                "argument": {"variable": "schemaType"},
                                                "function": {
                                                  "function": {
                                                    "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                            "type": null}],
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "union": {
                                                                  "field": {
                                                                    "name": "function",
                                                                    "term": {
                                                                      "record": {
                                                                        "fields": [
                                                                          {
                                                                            "name": "domain",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "svars"},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "function": {
                                                                                            "lambda": {
                                                                                              "body": {
                                                                                                "union": {
                                                                                                  "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                  "typeName": "hydra.core.Type"}},
                                                                                              "domain": null,
                                                                                              "parameter": "x"}}},
                                                                                        "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "tname"},
                                                                                    "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                          {"name": "codomain", "term": {"variable": "wtyp"}}],
                                                                        "typeName": "hydra.core.FunctionType"}}},
                                                                  "typeName": "hydra.core.Type"}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "union": {
                                                                          "field": {
                                                                            "name": "function",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {
                                                                                  "name": "elimination",
                                                                                  "term": {
                                                                                    "union": {
                                                                                      "field": {"name": "wrap", "term": {"variable": "tname"}},
                                                                                      "typeName": "hydra.core.Elimination"}}},
                                                                                "typeName": "hydra.core.Function"}}},
                                                                          "typeName": "hydra.core.Term"}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "svars"},
                                                                          "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                  "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                  "domain": null,
                                                  "parameter": "wtyp"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "stype"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "tname"},
                                                        "function": {"variable": "hydra.extract.core.wrappedType"}}}}},
                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                "domain": null,
                                "parameter": "schemaType"}}},
                          "function": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "tname"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                      "domain": null,
                      "parameter": "tname"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfVariable",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a variable"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                              "function": {
                                "application": {
                                  "argument": {"variable": "name"},
                                  "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                          "function": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "constraints",
                                                      "term": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "ts"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                              "function": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}}}}}},
                                                      "type": null}],
                                                  "body": {
                                                    "application": {
                                                      "argument": {
                                                        "record": {
                                                          "fields": [
                                                            {
                                                              "name": "term",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {
                                                                    "union": {
                                                                      "field": {"name": "variable", "term": {"variable": "name"}},
                                                                      "typeName": "hydra.core.Term"}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {"variable": "ts"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                      "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}}},
                                                            {
                                                              "name": "type",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "ts"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}}},
                                                            {
                                                              "name": "subst",
                                                              "term": {"variable": "hydra.substitution.idTypeSubst"}},
                                                            {"name": "classConstraints", "term": {"variable": "constraints"}}],
                                                          "typeName": "hydra.typing.InferenceResult"}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}},
                                              "domain": null,
                                              "parameter": "ts"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "scheme"},
                                                "function": {"variable": "hydra.schemas.instantiateTypeScheme"}}},
                                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                    "domain": null,
                                    "parameter": "scheme"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "name"},
                                              "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {"literal": {"string": "Variable not bound to type: "}},
                                              "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                  "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                      "domain": null,
                      "parameter": "name"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypeOfWrappedTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a wrapped term"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "tname",
                              "term": {
                                "application": {
                                  "argument": {"variable": "wt"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "typeName", "typeName": "hydra.core.WrappedTerm"}}}}}},
                              "type": null}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "term",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "wt"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.WrappedTerm"}}}}}},
                                  "type": null}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "svars",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "schemaType"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                          "type": null}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "stype",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "schemaType"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "type": null}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "iterm",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "result"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                  "type": null}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "itype",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "result"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                      "type": null}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "isubst",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "result"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": null}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "ityp",
                                                                              "term": {
                                                                                "union": {
                                                                                  "field": {
                                                                                    "name": "wrap",
                                                                                    "term": {
                                                                                      "record": {
                                                                                        "fields": [
                                                                                          {"name": "typeName", "term": {"variable": "tname"}},
                                                                                          {"name": "body", "term": {"variable": "itype"}}],
                                                                                        "typeName": "hydra.core.WrappedType"}}},
                                                                                  "typeName": "hydra.core.Type"}},
                                                                              "type": null}],
                                                                          "body": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "list": [
                                                                                  {
                                                                                    "record": {
                                                                                      "fields": [
                                                                                        {"name": "left", "term": {"variable": "stype"}},
                                                                                        {"name": "right", "term": {"variable": "ityp"}},
                                                                                        {
                                                                                          "name": "comment",
                                                                                          "term": {"literal": {"string": "schema type of wrapper"}}}],
                                                                                      "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "function": {
                                                                                      "lambda": {
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "subst"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "isubst"},
                                                                                                    "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "svars"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "function": {
                                                                                                                "lambda": {
                                                                                                                  "body": {
                                                                                                                    "union": {
                                                                                                                      "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                      "typeName": "hydra.core.Type"}},
                                                                                                                  "domain": null,
                                                                                                                  "parameter": "x"}}},
                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.map"}}}}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "tname"},
                                                                                                        "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "union": {
                                                                                                            "field": {
                                                                                                              "name": "wrap",
                                                                                                              "term": {
                                                                                                                "record": {
                                                                                                                  "fields": [
                                                                                                                    {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                    {"name": "body", "term": {"variable": "iterm"}}],
                                                                                                                  "typeName": "hydra.core.WrappedTerm"}}},
                                                                                                            "typeName": "hydra.core.Term"}},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "svars"},
                                                                                                            "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                    "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                        "domain": null,
                                                                                        "parameter": "subst"}}},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "cx"},
                                                                                      "function": {"variable": "hydra.inference.mapConstraints"}}}}}}}}}}}}}}}}}}},
                                                  "domain": null,
                                                  "parameter": "result"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"literal": {"string": "wrapped term"}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "term"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "cx"},
                                                            "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                        "domain": null,
                                        "parameter": "schemaType"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "tname"},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {"variable": "hydra.schemas.requireSchemaType"}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                      "domain": null,
                      "parameter": "wt"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.inferTypesOfTemporaryBindings",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Infer types for temporary let bindings. Returns a 4-tuple of (terms, types, substitution, accumulated constraints)"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "dflt",
                              "term": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "binding",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "bins"},
                                          "function": {"function": {"primitive": "hydra.lib.lists.head"}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "k",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "binding"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                          "type": null}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "v",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "binding"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                              "type": null}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "tl",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "bins"},
                                                      "function": {"function": {"primitive": "hydra.lib.lists.tail"}}}},
                                                  "type": null}],
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "j",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result1"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": null}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "u_prime",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "result1"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "type": null}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "u",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {"variable": "result1"},
                                                                            "function": {
                                                                              "function": {
                                                                                "elimination": {
                                                                                  "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                        "type": null}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "c1Inferred",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {"variable": "result1"},
                                                                                "function": {
                                                                                  "function": {
                                                                                    "elimination": {
                                                                                      "record": {
                                                                                        "field": "classConstraints",
                                                                                        "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "function": {
                                                                                "lambda": {
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "c1",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "originalBindingConstraints"},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "c1Inferred"},
                                                                                                  "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                          "type": null}],
                                                                                      "body": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "function": {
                                                                                              "lambda": {
                                                                                                "body": {
                                                                                                  "let": {
                                                                                                    "bindings": [
                                                                                                      {
                                                                                                        "name": "h",
                                                                                                        "term": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "result2"},
                                                                                                            "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                        "type": null}],
                                                                                                    "body": {
                                                                                                      "let": {
                                                                                                        "bindings": [
                                                                                                          {
                                                                                                            "name": "r_prime",
                                                                                                            "term": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "application": {
                                                                                                                    "argument": {"variable": "result2"},
                                                                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                            "type": null}],
                                                                                                        "body": {
                                                                                                          "let": {
                                                                                                            "bindings": [
                                                                                                              {
                                                                                                                "name": "restPair",
                                                                                                                "term": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "result2"},
                                                                                                                        "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                    "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                "type": null}],
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "r",
                                                                                                                    "term": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "restPair"},
                                                                                                                        "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                                                                                    "type": null}],
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "c2",
                                                                                                                        "term": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "restPair"},
                                                                                                                            "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                                                                                        "type": null}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "c1Subst",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "c1"},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "r"},
                                                                                                                                    "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                            "type": null}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "mergedConstraints",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "c2"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "c1Subst"},
                                                                                                                                        "function": {"variable": "hydra.inference.mergeClassConstraints"}}}}},
                                                                                                                                "type": null}],
                                                                                                                            "body": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "pair": {
                                                                                                                                    "@first": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "h"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "j"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "r"},
                                                                                                                                                    "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                                                                                                            "function": {"function": {"primitive": "hydra.lib.lists.cons"}}}}}},
                                                                                                                                    "@second": {
                                                                                                                                      "pair": {
                                                                                                                                        "@first": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "r_prime"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "u_prime"},
                                                                                                                                                    "function": {
                                                                                                                                                      "application": {
                                                                                                                                                        "argument": {"variable": "r"},
                                                                                                                                                        "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                                                "function": {"function": {"primitive": "hydra.lib.lists.cons"}}}}}},
                                                                                                                                        "@second": {
                                                                                                                                          "pair": {
                                                                                                                                            "@first": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "r"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "u"},
                                                                                                                                                    "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                            "@second": {"variable": "mergedConstraints"}}}}}}},
                                                                                                                                "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}}}}}}}}}},
                                                                                                "domain": null,
                                                                                                "parameter": "result2"}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "tl"},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "cx"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "u"},
                                                                                                              "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                      "function": {"variable": "hydra.inference.inferTypesOfTemporaryBindings"}}}}},
                                                                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}},
                                                                                  "domain": null,
                                                                                  "parameter": "originalBindingConstraints"}}},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "binding"},
                                                                                        "function": {
                                                                                          "function": {
                                                                                            "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "function": {
                                                                                            "lambda": {
                                                                                              "body": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "function": {
                                                                                                      "lambda": {
                                                                                                        "body": {
                                                                                                          "let": {
                                                                                                            "bindings": [
                                                                                                              {
                                                                                                                "name": "freshConstraints",
                                                                                                                "term": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "instantiatedTs"},
                                                                                                                        "function": {
                                                                                                                          "function": {
                                                                                                                            "elimination": {
                                                                                                                              "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                                        "function": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}}}}}},
                                                                                                                "type": null}],
                                                                                                            "body": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "function": {
                                                                                                                    "lambda": {
                                                                                                                      "body": {
                                                                                                                        "application": {
                                                                                                                          "argument": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "freshConstraints"},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "unifySubst"},
                                                                                                                                  "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                          "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                                                                                      "domain": null,
                                                                                                                      "parameter": "unifySubst"}}},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"literal": {"string": "original binding type"}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "u_prime"},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "instantiatedTs"},
                                                                                                                                    "function": {
                                                                                                                                      "function": {
                                                                                                                                        "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "cx"},
                                                                                                                                        "function": {
                                                                                                                                          "function": {
                                                                                                                                            "elimination": {
                                                                                                                                              "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                                    "function": {"variable": "hydra.unification.unifyTypes"}}}}}}}}},
                                                                                                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}},
                                                                                                        "domain": null,
                                                                                                        "parameter": "instantiatedTs"}}},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "ts"},
                                                                                                          "function": {"variable": "hydra.schemas.instantiateTypeScheme"}}},
                                                                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                                                                              "domain": null,
                                                                                              "parameter": "ts"}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}},
                                                                                "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                                                        "domain": null,
                                                        "parameter": "result1"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "list": [
                                                                  {"literal": {"string": "temporary let binding '"}},
                                                                  {
                                                                    "application": {
                                                                      "argument": {"variable": "k"},
                                                                      "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                  {"literal": {"string": "'"}}]},
                                                              "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "v"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {"variable": "hydra.inference.inferTypeOfTerm"}}}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}}}}}},
                              "type": null}],
                          "body": {
                            "application": {
                              "argument": {"variable": "dflt"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "pair": {
                                          "@first": {"list": []},
                                          "@second": {
                                            "pair": {
                                              "@first": {"list": []},
                                              "@second": {
                                                "pair": {
                                                  "@first": {"variable": "hydra.substitution.idTypeSubst"},
                                                  "@second": {"function": {"primitive": "hydra.lib.maps.empty"}}}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "bins"},
                                          "function": {"function": {"primitive": "hydra.lib.lists.null"}}}},
                                      "function": {"function": {"primitive": "hydra.lib.logic.ifElse"}}}}}}}}}},
                      "domain": null,
                      "parameter": "bins"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.initialTypeContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Create an initial type context from a graph"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "let": {
                    "bindings": [
                      {
                        "name": "toPair",
                        "term": {
                          "function": {
                            "lambda": {
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "name",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "pair"},
                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                      "type": null}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "el",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "pair"},
                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                          "type": null}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "el"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "pair": {
                                                            "@first": {"variable": "name"},
                                                            "@second": {
                                                              "application": {
                                                                "argument": {"variable": "ts"},
                                                                "function": {"variable": "hydra.schemas.typeSchemeToFType"}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                    "domain": null,
                                                    "parameter": "ts"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "name"},
                                                              "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"literal": {"string": "untyped element: "}},
                                                              "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                                      "function": {"function": {"primitive": "hydra.lib.flows.fail"}}}},
                                                  "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}}}}}},
                              "domain": null,
                              "parameter": "pair"}}},
                        "type": null}],
                    "body": {
                      "application": {
                        "argument": {
                          "function": {
                            "lambda": {
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "record": {
                                                "fields": [
                                                  {"name": "types", "term": {"variable": "types"}},
                                                  {
                                                    "name": "metadata",
                                                    "term": {"function": {"primitive": "hydra.lib.maps.empty"}}},
                                                  {
                                                    "name": "typeVariables",
                                                    "term": {"function": {"primitive": "hydra.lib.sets.empty"}}},
                                                  {
                                                    "name": "lambdaVariables",
                                                    "term": {"function": {"primitive": "hydra.lib.sets.empty"}}},
                                                  {"name": "inferenceContext", "term": {"variable": "ix"}}],
                                                "typeName": "hydra.typing.TypeContext"}},
                                            "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                        "domain": null,
                                        "parameter": "types"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "g"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "elements", "typeName": "hydra.graph.Graph"}}}}}},
                                                  "function": {"function": {"primitive": "hydra.lib.maps.toList"}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "toPair"},
                                                  "function": {"function": {"primitive": "hydra.lib.flows.mapList"}}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                              "function": {"function": {"primitive": "hydra.lib.flows.map"}}}}}},
                                      "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                              "domain": null,
                              "parameter": "ix"}}},
                        "function": {
                          "application": {
                            "argument": {
                              "application": {
                                "argument": {"variable": "g"},
                                "function": {"variable": "hydra.schemas.graphToInferenceContext"}}},
                            "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}},
                "domain": null,
                "parameter": "g"}}}}},
      "type": null},
    {
      "name": "hydra.inference.isUnbound",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Check if a variable is unbound in context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "v"},
                                      "function": {"function": {"primitive": "hydra.lib.maps.member"}}}}}},
                              "function": {"function": {"primitive": "hydra.lib.logic.not"}}}},
                          "function": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {"variable": "hydra.inference.freeVariablesInContext"}}},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "v"},
                                          "function": {"function": {"primitive": "hydra.lib.sets.member"}}}}}},
                                  "function": {"function": {"primitive": "hydra.lib.logic.not"}}}},
                              "function": {"function": {"primitive": "hydra.lib.logic.and"}}}}}},
                      "domain": null,
                      "parameter": "v"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.mapConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Map over type constraints after unification"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "application": {
                                "argument": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {"argument": {"variable": "s"}, "function": {"variable": "f"}}},
                                                    "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                "domain": null,
                                                "parameter": "_"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "s"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {"variable": "hydra.checking.checkTypeSubst"}}}}},
                                              "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                                      "domain": null,
                                      "parameter": "s"}}},
                                "function": {
                                  "application": {
                                    "argument": {
                                      "application": {
                                        "argument": {"variable": "constraints"},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "cx"},
                                                "function": {
                                                  "function": {
                                                    "elimination": {
                                                      "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                            "function": {"variable": "hydra.unification.unifyTypeConstraints"}}}}},
                                    "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}},
                            "domain": null,
                            "parameter": "constraints"}}},
                      "domain": null,
                      "parameter": "f"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.mergeClassConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Merge two maps of class constraints. When both maps have constraints for the same variable, union the class sets."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {"variable": "m2"},
                              "function": {"function": {"primitive": "hydra.lib.maps.toList"}}}},
                          "function": {
                            "application": {
                              "argument": {"variable": "m1"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "k",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "pair"},
                                                          "function": {"function": {"primitive": "hydra.lib.pairs.first"}}}},
                                                      "type": null}],
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "v",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "pair"},
                                                              "function": {"function": {"primitive": "hydra.lib.pairs.second"}}}},
                                                          "type": null}],
                                                      "body": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "acc"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "k"},
                                                                  "function": {"function": {"primitive": "hydra.lib.maps.lookup"}}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "merged",
                                                                            "term": {
                                                                              "record": {
                                                                                "fields": [
                                                                                  {
                                                                                    "name": "classes",
                                                                                    "term": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "v"},
                                                                                            "function": {
                                                                                              "function": {
                                                                                                "elimination": {
                                                                                                  "record": {"field": "classes", "typeName": "hydra.core.TypeVariableMetadata"}}}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "existing"},
                                                                                                "function": {
                                                                                                  "function": {
                                                                                                    "elimination": {
                                                                                                      "record": {"field": "classes", "typeName": "hydra.core.TypeVariableMetadata"}}}}}},
                                                                                            "function": {"function": {"primitive": "hydra.lib.sets.union"}}}}}}}],
                                                                                "typeName": "hydra.core.TypeVariableMetadata"}},
                                                                            "type": null}],
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {"variable": "acc"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {"variable": "merged"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "k"},
                                                                                    "function": {"function": {"primitive": "hydra.lib.maps.insert"}}}}}}}}}},
                                                                    "domain": null,
                                                                    "parameter": "existing"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "acc"},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "v"},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "k"},
                                                                              "function": {"function": {"primitive": "hydra.lib.maps.insert"}}}}}}}},
                                                                  "function": {"function": {"primitive": "hydra.lib.maybes.maybe"}}}}}}}}}}}},
                                              "domain": null,
                                              "parameter": "pair"}}},
                                        "domain": null,
                                        "parameter": "acc"}}},
                                  "function": {"function": {"primitive": "hydra.lib.lists.foldl"}}}}}}}},
                      "domain": null,
                      "parameter": "m2"}}},
                "domain": null,
                "parameter": "m1"}}}}},
      "type": null},
    {
      "name": "hydra.inference.showInferenceResult",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Show an inference result for debugging"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "let": {
                    "bindings": [
                      {
                        "name": "term",
                        "term": {
                          "application": {
                            "argument": {"variable": "result"},
                            "function": {
                              "function": {
                                "elimination": {
                                  "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                        "type": null}],
                    "body": {
                      "let": {
                        "bindings": [
                          {
                            "name": "typ",
                            "term": {
                              "application": {
                                "argument": {"variable": "result"},
                                "function": {
                                  "function": {
                                    "elimination": {
                                      "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                            "type": null}],
                        "body": {
                          "let": {
                            "bindings": [
                              {
                                "name": "subst",
                                "term": {
                                  "application": {
                                    "argument": {"variable": "result"},
                                    "function": {
                                      "function": {
                                        "elimination": {
                                          "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                "type": null}],
                            "body": {
                              "application": {
                                "argument": {
                                  "list": [
                                    {"literal": {"string": "{term="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {"variable": "hydra.show.core.term"}}},
                                    {"literal": {"string": ", type="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "typ"},
                                        "function": {"variable": "hydra.show.core.type"}}},
                                    {"literal": {"string": ", subst="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "subst"},
                                        "function": {"variable": "hydra.show.typing.typeSubst"}}},
                                    {"literal": {"string": "}"}}]},
                                "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}}}}}}}},
                "domain": null,
                "parameter": "result"}}}}},
      "type": null},
    {
      "name": "hydra.inference.yield",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create an inference result with no class constraints"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "record": {
                                "fields": [
                                  {
                                    "name": "term",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "subst"},
                                            "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                  {
                                    "name": "type",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "typ"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "subst"},
                                            "function": {"variable": "hydra.substitution.substInType"}}}}}},
                                  {"name": "subst", "term": {"variable": "subst"}},
                                  {
                                    "name": "classConstraints",
                                    "term": {"function": {"primitive": "hydra.lib.maps.empty"}}}],
                                "typeName": "hydra.typing.InferenceResult"}},
                            "domain": null,
                            "parameter": "subst"}}},
                      "domain": null,
                      "parameter": "typ"}}},
                "domain": null,
                "parameter": "term"}}}}},
      "type": null},
    {
      "name": "hydra.inference.yieldChecked",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Create a checked inference result"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "let": {
                                "bindings": [
                                  {
                                    "name": "iterm",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "subst"},
                                            "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                    "type": null}],
                                "body": {
                                  "let": {
                                    "bindings": [
                                      {
                                        "name": "itype",
                                        "term": {
                                          "application": {
                                            "argument": {"variable": "typ"},
                                            "function": {
                                              "application": {
                                                "argument": {"variable": "subst"},
                                                "function": {"variable": "hydra.substitution.substInType"}}}}},
                                        "type": null}],
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "record": {
                                            "fields": [
                                              {"name": "term", "term": {"variable": "iterm"}},
                                              {"name": "type", "term": {"variable": "itype"}},
                                              {"name": "subst", "term": {"variable": "subst"}},
                                              {
                                                "name": "classConstraints",
                                                "term": {"function": {"primitive": "hydra.lib.maps.empty"}}}],
                                            "typeName": "hydra.typing.InferenceResult"}},
                                        "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}},
                            "domain": null,
                            "parameter": "subst"}}},
                      "domain": null,
                      "parameter": "typ"}}},
                "domain": null,
                "parameter": "term"}}}}},
      "type": null},
    {
      "name": "hydra.inference.yieldCheckedWithConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create a checked inference result with class constraints"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "iterm",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "term"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "subst"},
                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                          "type": null}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "itype",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "typ"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "subst"},
                                                      "function": {"variable": "hydra.substitution.substInType"}}}}},
                                              "type": null}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "iconstraints",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "constraints"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "subst"},
                                                          "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                  "type": null}],
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "record": {
                                                      "fields": [
                                                        {"name": "term", "term": {"variable": "iterm"}},
                                                        {"name": "type", "term": {"variable": "itype"}},
                                                        {"name": "subst", "term": {"variable": "subst"}},
                                                        {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                      "typeName": "hydra.typing.InferenceResult"}},
                                                  "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}}}}}}}},
                                  "domain": null,
                                  "parameter": "constraints"}}},
                            "domain": null,
                            "parameter": "subst"}}},
                      "domain": null,
                      "parameter": "typ"}}},
                "domain": null,
                "parameter": "term"}}}}},
      "type": null},
    {
      "name": "hydra.inference.yieldDebug",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create an inference result with debug output"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "rterm",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "term"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "subst"},
                                                        "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                "type": null}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "rtyp",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "typ"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "subst"},
                                                            "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                    "type": null}],
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "application": {
                                                              "argument": {
                                                                "record": {
                                                                  "fields": [
                                                                    {"name": "term", "term": {"variable": "rterm"}},
                                                                    {"name": "type", "term": {"variable": "rtyp"}},
                                                                    {"name": "subst", "term": {"variable": "subst"}},
                                                                    {
                                                                      "name": "classConstraints",
                                                                      "term": {"function": {"primitive": "hydra.lib.maps.empty"}}}],
                                                                  "typeName": "hydra.typing.InferenceResult"}},
                                                              "function": {"function": {"primitive": "hydra.lib.flows.pure"}}}},
                                                          "domain": null,
                                                          "parameter": "result"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {
                                                                  "list": [
                                                                    {"literal": {"string": "\n\tterm: "}},
                                                                    {
                                                                      "application": {
                                                                        "argument": {"variable": "term"},
                                                                        "function": {"variable": "hydra.show.core.term"}}},
                                                                    {"literal": {"string": "\n\ttyp: "}},
                                                                    {
                                                                      "application": {
                                                                        "argument": {"variable": "typ"},
                                                                        "function": {"variable": "hydra.show.core.type"}}},
                                                                    {"literal": {"string": "\n\tsubst: "}},
                                                                    {
                                                                      "application": {
                                                                        "argument": {"variable": "subst"},
                                                                        "function": {"variable": "hydra.show.typing.typeSubst"}}},
                                                                    {"literal": {"string": "\n\trterm: "}},
                                                                    {
                                                                      "application": {
                                                                        "argument": {"variable": "rterm"},
                                                                        "function": {"variable": "hydra.show.core.term"}}},
                                                                    {"literal": {"string": "\n\trtyp: "}},
                                                                    {
                                                                      "application": {
                                                                        "argument": {"variable": "rtyp"},
                                                                        "function": {"variable": "hydra.show.core.type"}}}]},
                                                                "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "debugId"},
                                                                "function": {"variable": "hydra.annotations.debugIf"}}}}},
                                                        "function": {"function": {"primitive": "hydra.lib.flows.bind"}}}}}}}}}},
                                        "domain": null,
                                        "parameter": "subst"}}},
                                  "domain": null,
                                  "parameter": "typ"}}},
                            "domain": null,
                            "parameter": "term"}}},
                      "domain": null,
                      "parameter": "debugId"}}},
                "domain": null,
                "parameter": "cx"}}}}},
      "type": null},
    {
      "name": "hydra.inference.yieldWithConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create an inference result with class constraints"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "record": {
                                      "fields": [
                                        {
                                          "name": "term",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "term"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "subst"},
                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                        {
                                          "name": "type",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "typ"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "subst"},
                                                  "function": {"variable": "hydra.substitution.substInType"}}}}}},
                                        {"name": "subst", "term": {"variable": "subst"}},
                                        {"name": "classConstraints", "term": {"variable": "constraints"}}],
                                      "typeName": "hydra.typing.InferenceResult"}},
                                  "domain": null,
                                  "parameter": "constraints"}}},
                            "domain": null,
                            "parameter": "subst"}}},
                      "domain": null,
                      "parameter": "typ"}}},
                "domain": null,
                "parameter": "term"}}}}},
      "type": null}],
  "namespace": "hydra.inference",
  "termDependencies": [
    "hydra.annotations",
    "hydra.checking",
    "hydra.extract.core",
    "hydra.lexical",
    "hydra.monads",
    "hydra.reflect",
    "hydra.rewriting",
    "hydra.schemas",
    "hydra.show.core",
    "hydra.show.typing",
    "hydra.sorting",
    "hydra.substitution",
    "hydra.unification"],
  "typeDependencies": [
    "hydra.accessors",
    "hydra.ast",
    "hydra.classes",
    "hydra.coders",
    "hydra.compute",
    "hydra.constraints",
    "hydra.core",
    "hydra.grammar",
    "hydra.graph",
    "hydra.json",
    "hydra.module",
    "hydra.parsing",
    "hydra.phantoms",
    "hydra.query",
    "hydra.relational",
    "hydra.tabular",
    "hydra.testing",
    "hydra.topology",
    "hydra.typing",
    "hydra.util",
    "hydra.variants",
    "hydra.workflow"]}
