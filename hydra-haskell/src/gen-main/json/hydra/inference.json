{
  "description": [
    "Type inference following Algorithm W, extended for nominal terms and types"],
  "elements": [
    {
      "name": "hydra.inference.bindConstraints",
      "term": {
        "typeLambda": {
          "body": {
            "typeLambda": {
              "body": {
                "annotated": {
                  "annotation": [
                    {
                      "@key": "description",
                      "@value": {
                        "literal": {"string": "Bind type constraints and continue with substitution"}}}],
                  "body": {
                    "function": {
                      "lambda": {
                        "body": {
                          "function": {
                            "lambda": {
                              "body": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "application": {"argument": {"variable": "s"}, "function": {"variable": "f"}}},
                                                        "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                        "parameter": "_"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "s"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {"variable": "hydra.checking.checkTypeSubst"},
                                                                  "type": {"variable": "t0"}}}}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                          "type": {"variable": "t1"}}}}}}},
                                              "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                              "parameter": "s"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "constraints"},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.unification.unifyTypeConstraints"},
                                                            "type": {"variable": "hydra.core.TypeScheme"}}},
                                                        "type": {"variable": "t0"}}}}}}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                        "type": {"variable": "t0"}}},
                                                    "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                "type": {"variable": "t1"}}}}}}},
                                    "domain": [{"list": {"variable": "hydra.typing.TypeConstraint"}}],
                                    "parameter": "constraints"}}},
                              "domain": [
                                {
                                  "function": {
                                    "codomain": {
                                      "application": {
                                        "argument": {"variable": "t1"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "t0"},
                                            "function": {"variable": "hydra.compute.Flow"}}}}},
                                    "domain": {"variable": "hydra.typing.TypeSubst"}}}],
                              "parameter": "f"}}},
                        "domain": [{"variable": "hydra.typing.InferenceContext"}],
                        "parameter": "cx"}}}}},
              "parameter": "t1"}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "application": {
                          "argument": {"variable": "t1"},
                          "function": {
                            "application": {
                              "argument": {"variable": "t0"},
                              "function": {"variable": "hydra.compute.Flow"}}}}},
                      "domain": {"list": {"variable": "hydra.typing.TypeConstraint"}}}},
                  "domain": {
                    "function": {
                      "codomain": {
                        "application": {
                          "argument": {"variable": "t1"},
                          "function": {
                            "application": {
                              "argument": {"variable": "t0"},
                              "function": {"variable": "hydra.compute.Flow"}}}}},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0", "t1"]}]},
    {
      "name": "hydra.inference.bindUnboundTypeVariables",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Place unbound type variables appearing anywhere under a typed let binding in the type scheme of that binding. These variables may appear in the binding type scheme itself or in that of a subterm, in domain types attached to functions, and in type abstraction and type application terms. This process attempts to capture type variables which have escaped unification, e.g. due to unused code. However, unbound type variables not appearing beneath any typed let binding remain unbound."}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "svars",
                              "term": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maps.keys"}},
                                              "type": {"variable": "hydra.core.Name"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {"function": {"primitive": "hydra.lib.sets.fromList"}},
                                      "type": {"variable": "hydra.core.Name"}}}}},
                              "type": [
                                {
                                  "constraints": null,
                                  "type": {"set": {"variable": "hydra.core.Name"}},
                                  "variables": []}]}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "rewrite",
                                  "term": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {"variable": "term"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {
                                                        "union": {
                                                          "cases": [
                                                            {
                                                              "name": "let",
                                                              "term": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "forBinding",
                                                                            "term": {
                                                                              "function": {
                                                                                "lambda": {
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "bname",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "b"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {"variable": "hydra.core.Name"},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "bterm",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "b"},
                                                                                                  "function": {
                                                                                                    "function": {
                                                                                                      "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                                                              "type": [
                                                                                                {
                                                                                                  "constraints": null,
                                                                                                  "type": {"variable": "hydra.core.Term"},
                                                                                                  "variables": []}]}],
                                                                                          "body": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "b"},
                                                                                                  "function": {
                                                                                                    "function": {
                                                                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "function": {
                                                                                                      "lambda": {
                                                                                                        "body": {
                                                                                                          "let": {
                                                                                                            "bindings": [
                                                                                                              {
                                                                                                                "name": "bvars",
                                                                                                                "term": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "ts"},
                                                                                                                        "function": {
                                                                                                                          "function": {
                                                                                                                            "elimination": {
                                                                                                                              "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                    "function": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {"function": {"primitive": "hydra.lib.sets.fromList"}},
                                                                                                                        "type": {"variable": "hydra.core.Name"}}}}},
                                                                                                                "type": [
                                                                                                                  {
                                                                                                                    "constraints": null,
                                                                                                                    "type": {"set": {"variable": "hydra.core.Name"}},
                                                                                                                    "variables": []}]}],
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "unboundInType",
                                                                                                                    "term": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                            "function": {
                                                                                                                              "function": {
                                                                                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                        "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                                    "type": [
                                                                                                                      {
                                                                                                                        "constraints": null,
                                                                                                                        "type": {"set": {"variable": "hydra.core.Name"}},
                                                                                                                        "variables": []}]}],
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "unboundInTerm",
                                                                                                                        "term": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "bterm"},
                                                                                                                            "function": {"variable": "hydra.rewriting.freeTypeVariablesInTerm"}}},
                                                                                                                        "type": [
                                                                                                                          {
                                                                                                                            "constraints": null,
                                                                                                                            "type": {"set": {"variable": "hydra.core.Name"}},
                                                                                                                            "variables": []}]}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "unbound",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "bvars"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "svars"},
                                                                                                                                            "function": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.sets.union"}},
                                                                                                                                                "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "unboundInTerm"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "unboundInType"},
                                                                                                                                                "function": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.sets.union"}},
                                                                                                                                                    "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.sets.difference"}},
                                                                                                                                            "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                "function": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.sets.toList"}},
                                                                                                                                    "type": {"variable": "hydra.core.Name"}}}}},
                                                                                                                            "type": [
                                                                                                                              {
                                                                                                                                "constraints": null,
                                                                                                                                "type": {"list": {"variable": "hydra.core.Name"}},
                                                                                                                                "variables": []}]}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "ts2",
                                                                                                                                "term": {
                                                                                                                                  "record": {
                                                                                                                                    "fields": [
                                                                                                                                      {
                                                                                                                                        "name": "variables",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "unbound"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "ts"},
                                                                                                                                                    "function": {
                                                                                                                                                      "function": {
                                                                                                                                                        "elimination": {
                                                                                                                                                          "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                "function": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.lists.concat2"}},
                                                                                                                                                    "type": {"variable": "hydra.core.Name"}}}}}}}},
                                                                                                                                      {
                                                                                                                                        "name": "type",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                                            "function": {
                                                                                                                                              "function": {
                                                                                                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}}},
                                                                                                                                      {
                                                                                                                                        "name": "constraints",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                                            "function": {
                                                                                                                                              "function": {
                                                                                                                                                "elimination": {
                                                                                                                                                  "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}}}],
                                                                                                                                    "typeName": "hydra.core.TypeScheme"}},
                                                                                                                                "type": [
                                                                                                                                  {
                                                                                                                                    "constraints": null,
                                                                                                                                    "type": {"variable": "hydra.core.TypeScheme"},
                                                                                                                                    "variables": []}]}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "bterm2",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "unbound"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "bterm"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "function": {
                                                                                                                                                    "lambda": {
                                                                                                                                                      "body": {
                                                                                                                                                        "function": {
                                                                                                                                                          "lambda": {
                                                                                                                                                            "body": {
                                                                                                                                                              "union": {
                                                                                                                                                                "field": {
                                                                                                                                                                  "name": "typeLambda",
                                                                                                                                                                  "term": {
                                                                                                                                                                    "record": {
                                                                                                                                                                      "fields": [
                                                                                                                                                                        {"name": "parameter", "term": {"variable": "v"}},
                                                                                                                                                                        {"name": "body", "term": {"variable": "t"}}],
                                                                                                                                                                      "typeName": "hydra.core.TypeLambda"}}},
                                                                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                                                                            "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                            "parameter": "v"}}},
                                                                                                                                                      "domain": [{"variable": "hydra.core.Term"}],
                                                                                                                                                      "parameter": "t"}}},
                                                                                                                                                "function": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {
                                                                                                                                                      "typeApplication": {
                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                                                                                                                                        "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                                    "type": {"variable": "hydra.core.Name"}}}}}}}}},
                                                                                                                                    "type": [
                                                                                                                                      {
                                                                                                                                        "constraints": null,
                                                                                                                                        "type": {"variable": "hydra.core.Term"},
                                                                                                                                        "variables": []}]}],
                                                                                                                                "body": {
                                                                                                                                  "record": {
                                                                                                                                    "fields": [
                                                                                                                                      {"name": "name", "term": {"variable": "bname"}},
                                                                                                                                      {"name": "term", "term": {"variable": "bterm2"}},
                                                                                                                                      {"name": "type", "term": {"maybe": [{"variable": "ts2"}]}}],
                                                                                                                                    "typeName": "hydra.core.Binding"}}}}}}}}}}}}}},
                                                                                                        "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                                                                        "parameter": "ts"}}},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {"name": "name", "term": {"variable": "bname"}},
                                                                                                            {
                                                                                                              "name": "term",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "bterm"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "cx"},
                                                                                                                      "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}}},
                                                                                                            {
                                                                                                              "name": "type",
                                                                                                              "term": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"maybe": null},
                                                                                                                  "type": {"variable": "hydra.core.TypeScheme"}}}}],
                                                                                                          "typeName": "hydra.core.Binding"}},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                                                              "type": {"variable": "hydra.core.Binding"}}},
                                                                                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}}}}}},
                                                                                  "domain": [{"variable": "hydra.core.Binding"}],
                                                                                  "parameter": "b"}}},
                                                                            "type": [
                                                                              {
                                                                                "constraints": null,
                                                                                "type": {
                                                                                  "function": {
                                                                                    "codomain": {"variable": "hydra.core.Binding"},
                                                                                    "domain": {"variable": "hydra.core.Binding"}}},
                                                                                "variables": []}]}],
                                                                        "body": {
                                                                          "union": {
                                                                            "field": {
                                                                              "name": "let",
                                                                              "term": {
                                                                                "record": {
                                                                                  "fields": [
                                                                                    {
                                                                                      "name": "bindings",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "l"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "forBinding"},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                      "type": {"variable": "hydra.core.Binding"}}},
                                                                                                  "type": {"variable": "hydra.core.Binding"}}}}}}}},
                                                                                    {
                                                                                      "name": "body",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "l"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "cx"},
                                                                                              "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}}}],
                                                                                  "typeName": "hydra.core.Let"}}},
                                                                            "typeName": "hydra.core.Term"}}}},
                                                                    "domain": [{"variable": "hydra.core.Let"}],
                                                                    "parameter": "l"}}}}],
                                                          "default": [
                                                            {
                                                              "application": {
                                                                "argument": {"variable": "term"},
                                                                "function": {"variable": "recurse"}}}],
                                                          "typeName": "hydra.core.Term"}}}}}},
                                              "domain": [{"variable": "hydra.core.Term"}],
                                              "parameter": "term"}}},
                                        "domain": [
                                          {
                                            "function": {
                                              "codomain": {"variable": "hydra.core.Term"},
                                              "domain": {"variable": "hydra.core.Term"}}}],
                                        "parameter": "recurse"}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {
                                        "function": {
                                          "codomain": {
                                            "function": {
                                              "codomain": {"variable": "hydra.core.Term"},
                                              "domain": {"variable": "hydra.core.Term"}}},
                                          "domain": {
                                            "function": {
                                              "codomain": {"variable": "hydra.core.Term"},
                                              "domain": {"variable": "hydra.core.Term"}}}}},
                                      "variables": []}]}],
                              "body": {
                                "application": {
                                  "argument": {"variable": "term0"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "rewrite"},
                                      "function": {"variable": "hydra.rewriting.rewriteTerm"}}}}}}}}},
                      "domain": [{"variable": "hydra.core.Term"}],
                      "parameter": "term0"}}},
                "domain": [{"variable": "hydra.typing.InferenceContext"}],
                "parameter": "cx"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {"variable": "hydra.core.Term"},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.buildTypeApplicationTerm",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Fold a list of type variables over a term to build a type application term"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {"variable": "tvars"},
                          "function": {
                            "application": {
                              "argument": {"variable": "body"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "union": {
                                                  "field": {
                                                    "name": "typeApplication",
                                                    "term": {
                                                      "record": {
                                                        "fields": [
                                                          {"name": "body", "term": {"variable": "t"}},
                                                          {
                                                            "name": "type",
                                                            "term": {
                                                              "union": {
                                                                "field": {"name": "variable", "term": {"variable": "v"}},
                                                                "typeName": "hydra.core.Type"}}}],
                                                        "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                  "typeName": "hydra.core.Term"}},
                                              "domain": [{"variable": "hydra.core.Name"}],
                                              "parameter": "v"}}},
                                        "domain": [{"variable": "hydra.core.Term"}],
                                        "parameter": "t"}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                          "type": {"variable": "hydra.core.Term"}}},
                                      "type": {"variable": "hydra.core.Name"}}}}}}}}},
                      "domain": [{"variable": "hydra.core.Term"}],
                      "parameter": "body"}}},
                "domain": [{"list": {"variable": "hydra.core.Name"}}],
                "parameter": "tvars"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {"variable": "hydra.core.Term"},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"list": {"variable": "hydra.core.Name"}}}},
          "variables": []}]},
    {
      "name": "hydra.inference.emptyInferenceContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "An empty inference context"}}}],
          "body": {
            "record": {
              "fields": [
                {
                  "name": "schemaTypes",
                  "term": {
                    "typeApplication": {
                      "body": {
                        "typeApplication": {
                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                          "type": {"variable": "hydra.core.Name"}}},
                      "type": {"variable": "hydra.core.TypeScheme"}}}},
                {
                  "name": "primitiveTypes",
                  "term": {
                    "typeApplication": {
                      "body": {
                        "typeApplication": {
                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                          "type": {"variable": "hydra.core.Name"}}},
                      "type": {"variable": "hydra.core.TypeScheme"}}}},
                {
                  "name": "dataTypes",
                  "term": {
                    "typeApplication": {
                      "body": {
                        "typeApplication": {
                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                          "type": {"variable": "hydra.core.Name"}}},
                      "type": {"variable": "hydra.core.TypeScheme"}}}},
                {
                  "name": "classConstraints",
                  "term": {
                    "typeApplication": {
                      "body": {
                        "typeApplication": {
                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                          "type": {"variable": "hydra.core.Name"}}},
                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}},
                {"name": "debug", "term": {"literal": {"boolean": false}}}],
              "typeName": "hydra.typing.InferenceContext"}}}},
      "type": [
        {
          "constraints": null,
          "type": {"variable": "hydra.typing.InferenceContext"},
          "variables": []}]},
    {
      "name": "hydra.inference.extendContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {
                  "string": "Add (term variable, type scheme) pairs to the typing environment"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "record": {
                          "fields": [
                            {
                              "name": "schemaTypes",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "primitiveTypes",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {
                                          "field": "primitiveTypes",
                                          "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "dataTypes",
                              "term": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "pairs"},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                  "type": {"variable": "hydra.core.Name"}}},
                                              "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maps.union"}},
                                              "type": {"variable": "hydra.core.Name"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}}},
                            {
                              "name": "classConstraints",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {
                                          "field": "classConstraints",
                                          "typeName": "hydra.typing.InferenceContext"}}}}}}},
                            {
                              "name": "debug",
                              "term": {
                                "application": {
                                  "argument": {"variable": "cx"},
                                  "function": {
                                    "function": {
                                      "elimination": {
                                        "record": {"field": "debug", "typeName": "hydra.typing.InferenceContext"}}}}}}}],
                          "typeName": "hydra.typing.InferenceContext"}},
                      "domain": [{"variable": "hydra.typing.InferenceContext"}],
                      "parameter": "cx"}}},
                "domain": [
                  {
                    "list": {
                      "pair": {
                        "first": {"variable": "hydra.core.Name"},
                        "second": {"variable": "hydra.core.TypeScheme"}}}}],
                "parameter": "pairs"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {"variable": "hydra.typing.InferenceContext"},
                  "domain": {"variable": "hydra.typing.InferenceContext"}}},
              "domain": {
                "list": {
                  "pair": {
                    "first": {"variable": "hydra.core.Name"},
                    "second": {"variable": "hydra.core.TypeScheme"}}}}}},
          "variables": []}]},
    {
      "name": "hydra.inference.finalizeInferredTerm",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Finalize an inferred term by checking for unbound type variables, then normalizing type variables"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "term2",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "term"},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {"variable": "hydra.inference.bindUnboundTypeVariables"}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Term"},
                                      "variables": []}]}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "term2"},
                                                "function": {"variable": "hydra.rewriting.normalizeTypeVariablesInTerm"}}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                    "type": {"variable": "t0"}}},
                                                "type": {"variable": "hydra.core.Term"}}}}},
                                        "domain": [{"unit": {}}],
                                        "parameter": "_"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "term2"},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"variable": "hydra.checking.checkForUnboundTypeVariables"},
                                                  "type": {"variable": "t0"}}}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                  "type": {"variable": "t0"}}},
                                              "type": {"unit": {}}}},
                                          "type": {"variable": "hydra.core.Term"}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Term"}],
                          "parameter": "term"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.core.Term"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.forInferredTerm",
      "term": {
        "typeLambda": {
          "body": {
            "typeLambda": {
              "body": {
                "annotated": {
                  "annotation": [
                    {
                      "@key": "description",
                      "@value": {"literal": {"string": "Infer a term's type and map over the result"}}}],
                  "body": {
                    "function": {
                      "lambda": {
                        "body": {
                          "function": {
                            "lambda": {
                              "body": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "function": {
                                        "lambda": {
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "desc"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "term"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "cx"},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                              "type": {"variable": "t1"}}}}}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "f"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.flows.map"}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                          "type": {"variable": "t0"}}},
                                                      "type": {"variable": "t1"}}}}}}},
                                          "domain": [
                                            {
                                              "function": {
                                                "codomain": {"variable": "t0"},
                                                "domain": {"variable": "hydra.typing.InferenceResult"}}}],
                                          "parameter": "f"}}},
                                    "domain": [{"literal": {"string": {}}}],
                                    "parameter": "desc"}}},
                              "domain": [{"variable": "hydra.core.Term"}],
                              "parameter": "term"}}},
                        "domain": [{"variable": "hydra.typing.InferenceContext"}],
                        "parameter": "cx"}}}}},
              "parameter": "t1"}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "function": {
                          "codomain": {
                            "application": {
                              "argument": {"variable": "t0"},
                              "function": {
                                "application": {
                                  "argument": {"variable": "t1"},
                                  "function": {"variable": "hydra.compute.Flow"}}}}},
                          "domain": {
                            "function": {
                              "codomain": {"variable": "t0"},
                              "domain": {"variable": "hydra.typing.InferenceResult"}}}}},
                      "domain": {"literal": {"string": {}}}}},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0", "t1"]}]},
    {
      "name": "hydra.inference.freeVariablesInContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Get all free variables in an inference context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "application": {
                    "argument": {
                      "application": {
                        "argument": {
                          "application": {
                            "argument": {
                              "application": {
                                "argument": {"variable": "cx"},
                                "function": {
                                  "function": {
                                    "elimination": {
                                      "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                            "function": {
                              "typeApplication": {
                                "body": {
                                  "typeApplication": {
                                    "body": {"function": {"primitive": "hydra.lib.maps.elems"}},
                                    "type": {"variable": "hydra.core.Name"}}},
                                "type": {"variable": "hydra.core.TypeScheme"}}}}},
                        "function": {
                          "application": {
                            "argument": {"variable": "hydra.rewriting.freeVariablesInTypeSchemeSimple"},
                            "function": {
                              "typeApplication": {
                                "body": {
                                  "typeApplication": {
                                    "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                    "type": {"variable": "hydra.core.TypeScheme"}}},
                                "type": {"set": {"variable": "hydra.core.Name"}}}}}}}},
                    "function": {
                      "application": {
                        "argument": {
                          "typeApplication": {
                            "body": {"function": {"primitive": "hydra.lib.sets.empty"}},
                            "type": {"variable": "hydra.core.Name"}}},
                        "function": {
                          "application": {
                            "argument": {
                              "typeApplication": {
                                "body": {"function": {"primitive": "hydra.lib.sets.union"}},
                                "type": {"variable": "hydra.core.Name"}}},
                            "function": {
                              "typeApplication": {
                                "body": {
                                  "typeApplication": {
                                    "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                    "type": {"set": {"variable": "hydra.core.Name"}}}},
                                "type": {"set": {"variable": "hydra.core.Name"}}}}}}}}}},
                "domain": [{"variable": "hydra.typing.InferenceContext"}],
                "parameter": "cx"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {"set": {"variable": "hydra.core.Name"}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.freshVariableType",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Generate a fresh type variable"}}}],
              "body": {
                "application": {
                  "argument": {
                    "typeApplication": {
                      "body": {"variable": "hydra.schemas.freshName"},
                      "type": {"variable": "t0"}}},
                  "function": {
                    "application": {
                      "argument": {
                        "function": {
                          "lambda": {
                            "body": {
                              "union": {
                                "field": {"name": "variable", "term": {"variable": "x"}},
                                "typeName": "hydra.core.Type"}},
                            "domain": [{"variable": "hydra.core.Name"}],
                            "parameter": "x"}}},
                      "function": {
                        "typeApplication": {
                          "body": {
                            "typeApplication": {
                              "body": {
                                "typeApplication": {
                                  "body": {"function": {"primitive": "hydra.lib.flows.map"}},
                                  "type": {"variable": "hydra.core.Name"}}},
                              "type": {"variable": "hydra.core.Type"}}},
                          "type": {"variable": "t0"}}}}}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "application": {
              "argument": {"variable": "hydra.core.Type"},
              "function": {
                "application": {
                  "argument": {"variable": "t0"},
                  "function": {"variable": "hydra.compute.Flow"}}}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.generalize",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Generalize a type to a type scheme"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "let": {
                          "bindings": [
                            {
                              "name": "isTypeVarName",
                              "term": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "let": {
                                        "bindings": [
                                          {
                                            "name": "parts",
                                            "term": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "name"},
                                                    "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {"literal": {"string": "."}},
                                                    "function": {"function": {"primitive": "hydra.lib.strings.splitOn"}}}}}},
                                            "type": [
                                              {
                                                "constraints": null,
                                                "type": {"list": {"literal": {"string": {}}}},
                                                "variables": []}]}],
                                        "body": {
                                          "application": {
                                            "argument": {"literal": {"integer": {"int32": 1}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "parts"},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                        "type": {"literal": {"string": {}}}}}}},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {"function": {"primitive": "hydra.lib.equality.lte"}},
                                                    "type": {"literal": {"integer": {"int32": {}}}}}}}}}}}},
                                    "domain": [{"variable": "hydra.core.Name"}],
                                    "parameter": "name"}}},
                              "type": [
                                {
                                  "constraints": null,
                                  "type": {
                                    "function": {
                                      "codomain": {"literal": {"boolean": {}}},
                                      "domain": {"variable": "hydra.core.Name"}}},
                                  "variables": []}]}],
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "vars",
                                  "term": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "typ"},
                                              "function": {"variable": "hydra.rewriting.freeVariablesInTypeOrdered"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "v"},
                                                            "function": {"variable": "isTypeVarName"}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "v"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "cx"},
                                                                    "function": {"variable": "hydra.inference.isUnbound"}}}}},
                                                            "function": {"function": {"primitive": "hydra.lib.logic.and"}}}}}},
                                                    "domain": [{"variable": "hydra.core.Name"}],
                                                    "parameter": "v"}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.lists.filter"}},
                                                  "type": {"variable": "hydra.core.Name"}}}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {"function": {"primitive": "hydra.lib.lists.nub"}},
                                          "type": {"variable": "hydra.core.Name"}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"list": {"variable": "hydra.core.Name"}},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "allConstraints",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {
                                                  "field": "classConstraints",
                                                  "typeName": "hydra.typing.InferenceContext"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {
                                            "map": {
                                              "keys": {"variable": "hydra.core.Name"},
                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "relevantConstraints",
                                          "term": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "vars"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "function": {
                                                              "lambda": {
                                                                "body": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "allConstraints"},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "v"},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "function": {
                                                                            "lambda": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "pair": {"@first": {"variable": "v"}, "@second": {"variable": "meta"}}},
                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                              "domain": [{"variable": "hydra.core.TypeVariableMetadata"}],
                                                                              "parameter": "meta"}}},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.maybes.map"}},
                                                                                "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                            "type": {
                                                                              "pair": {
                                                                                "first": {"variable": "hydra.core.Name"},
                                                                                "second": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                "domain": [{"variable": "hydra.core.Name"}],
                                                                "parameter": "v"}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                  "type": {"variable": "hydra.core.Name"}}},
                                                              "type": {
                                                                "maybe": {
                                                                  "pair": {
                                                                    "first": {"variable": "hydra.core.Name"},
                                                                    "second": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.maybes.cat"}},
                                                      "type": {
                                                        "pair": {
                                                          "first": {"variable": "hydra.core.Name"},
                                                          "second": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                      "type": {"variable": "hydra.core.Name"}}},
                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {
                                                "map": {
                                                  "keys": {"variable": "hydra.core.Name"},
                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "constraintsMaybe",
                                              "term": {
                                                "application": {
                                                  "argument": {"maybe": [{"variable": "relevantConstraints"}]},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "typeApplication": {
                                                          "body": {"maybe": null},
                                                          "type": {
                                                            "map": {
                                                              "keys": {"variable": "hydra.core.Name"},
                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "relevantConstraints"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.maps.null"}},
                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                              "type": {
                                                                "maybe": {
                                                                  "map": {
                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {
                                                    "maybe": {
                                                      "map": {
                                                        "keys": {"variable": "hydra.core.Name"},
                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}},
                                                  "variables": []}]}],
                                          "body": {
                                            "record": {
                                              "fields": [
                                                {"name": "variables", "term": {"variable": "vars"}},
                                                {"name": "type", "term": {"variable": "typ"}},
                                                {"name": "constraints", "term": {"variable": "constraintsMaybe"}}],
                                              "typeName": "hydra.core.TypeScheme"}}}}}}}}}}}},
                      "domain": [{"variable": "hydra.core.Type"}],
                      "parameter": "typ"}}},
                "domain": [{"variable": "hydra.typing.InferenceContext"}],
                "parameter": "cx"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {"variable": "hydra.core.TypeScheme"},
                  "domain": {"variable": "hydra.core.Type"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.inferGraphTypes",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer types for all elements in a graph"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "let": {
                        "bindings": [
                          {
                            "name": "fromLetTerm",
                            "term": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "bindings",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "l"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"list": {"variable": "hydra.core.Binding"}},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "body",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "l"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"variable": "hydra.core.Term"},
                                                  "variables": []}]}],
                                          "body": {
                                            "record": {
                                              "fields": [
                                                {"name": "elements", "term": {"variable": "bindings"}},
                                                {
                                                  "name": "environment",
                                                  "term": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                          "type": {"variable": "hydra.core.Name"}}},
                                                      "type": {"maybe": {"variable": "hydra.core.Term"}}}}},
                                                {
                                                  "name": "types",
                                                  "term": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                          "type": {"variable": "hydra.core.Name"}}},
                                                      "type": {"variable": "hydra.core.TypeScheme"}}}},
                                                {"name": "body", "term": {"variable": "body"}},
                                                {
                                                  "name": "primitives",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "g0"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "primitives", "typeName": "hydra.graph.Graph"}}}}}}},
                                                {
                                                  "name": "schema",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "g0"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "schema", "typeName": "hydra.graph.Graph"}}}}}}}],
                                              "typeName": "hydra.graph.Graph"}}}}}},
                                  "domain": [{"variable": "hydra.core.Let"}],
                                  "parameter": "l"}}},
                            "type": [
                              {
                                "constraints": null,
                                "type": {
                                  "function": {
                                    "codomain": {"variable": "hydra.graph.Graph"},
                                    "domain": {"variable": "hydra.core.Let"}}},
                                "variables": []}]}],
                        "body": {
                          "let": {
                            "bindings": [
                              {
                                "name": "toLetTerm",
                                "term": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "toBinding",
                                              "term": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "record": {
                                                        "fields": [
                                                          {
                                                            "name": "name",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "el"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}}},
                                                          {
                                                            "name": "term",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "el"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}}},
                                                          {
                                                            "name": "type",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "el"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}}}],
                                                        "typeName": "hydra.core.Binding"}},
                                                    "domain": [{"variable": "hydra.core.Binding"}],
                                                    "parameter": "el"}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {
                                                    "function": {
                                                      "codomain": {"variable": "hydra.core.Binding"},
                                                      "domain": {"variable": "hydra.core.Binding"}}},
                                                  "variables": []}]}],
                                          "body": {
                                            "union": {
                                              "field": {
                                                "name": "let",
                                                "term": {
                                                  "record": {
                                                    "fields": [
                                                      {
                                                        "name": "bindings",
                                                        "term": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "g"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "elements", "typeName": "hydra.graph.Graph"}}}}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "toBinding"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                        "type": {"variable": "hydra.core.Binding"}}},
                                                                    "type": {"variable": "hydra.core.Binding"}}}}}}}},
                                                      {
                                                        "name": "body",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "g"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "body", "typeName": "hydra.graph.Graph"}}}}}}}],
                                                    "typeName": "hydra.core.Let"}}},
                                              "typeName": "hydra.core.Term"}}}},
                                      "domain": [{"variable": "hydra.graph.Graph"}],
                                      "parameter": "g"}}},
                                "type": [
                                  {
                                    "constraints": null,
                                    "type": {
                                      "function": {
                                        "codomain": {"variable": "hydra.core.Term"},
                                        "domain": {"variable": "hydra.graph.Graph"}}},
                                    "variables": []}]}],
                            "body": {
                              "let": {
                                "bindings": [
                                  {
                                    "name": "forFinal",
                                    "term": {
                                      "typeLambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {"variable": "finalized"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {
                                                        "union": {
                                                          "cases": [
                                                            {
                                                              "name": "let",
                                                              "term": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "l"},
                                                                            "function": {"variable": "fromLetTerm"}}},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                "type": {"variable": "t1"}}},
                                                                            "type": {"variable": "hydra.graph.Graph"}}}}},
                                                                    "domain": [{"variable": "hydra.core.Let"}],
                                                                    "parameter": "l"}}}},
                                                            {
                                                              "name": "variable",
                                                              "term": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "application": {
                                                                        "argument": {"literal": {"string": "Expected inferred graph as let term"}},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                                                "type": {"variable": "t1"}}},
                                                                            "type": {"variable": "hydra.graph.Graph"}}}}},
                                                                    "domain": [{"variable": "hydra.core.Name"}],
                                                                    "parameter": "_"}}}}],
                                                          "default": null,
                                                          "typeName": "hydra.core.Term"}}}}}},
                                              "domain": [{"variable": "hydra.core.Term"}],
                                              "parameter": "finalized"}}},
                                        "parameter": "t1"}},
                                    "type": [
                                      {
                                        "constraints": null,
                                        "type": {
                                          "function": {
                                            "codomain": {
                                              "application": {
                                                "argument": {"variable": "hydra.graph.Graph"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "t1"},
                                                    "function": {"variable": "hydra.compute.Flow"}}}}},
                                            "domain": {"variable": "hydra.core.Term"}}},
                                        "variables": ["t1"]}]}],
                                "body": {
                                  "application": {
                                    "argument": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "term",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Term"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "ts",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "result"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"variable": "hydra.core.Type"},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "application": {
                                                                              "argument": {"variable": "finalized"},
                                                                              "function": {
                                                                                "typeApplication": {"body": {"variable": "forFinal"}, "type": {"variable": "t0"}}}}},
                                                                          "domain": [{"variable": "hydra.core.Term"}],
                                                                          "parameter": "finalized"}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "term"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {"variable": "cx"},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {"variable": "hydra.inference.finalizeInferredTerm"},
                                                                                    "type": {"variable": "t0"}}}}}}},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                    "type": {"variable": "t0"}}},
                                                                                "type": {"variable": "hydra.core.Term"}}},
                                                                            "type": {"variable": "hydra.graph.Graph"}}}}}}}}}}},
                                                        "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                        "parameter": "result"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"literal": {"string": "graph term"}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "g0"},
                                                                  "function": {"variable": "toLetTerm"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                      "type": {"variable": "t0"}}}}}}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                          "type": {"variable": "hydra.graph.Graph"}}}}}}},
                                              "domain": [{"variable": "hydra.typing.InferenceContext"}],
                                              "parameter": "cx"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "g0"},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {"variable": "hydra.schemas.graphToInferenceContext"},
                                                    "type": {"variable": "t0"}}}}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                        "type": {"variable": "t0"}}},
                                                    "type": {"variable": "hydra.typing.InferenceContext"}}},
                                                "type": {"variable": "hydra.graph.Graph"}}}}}}},
                                    "function": {
                                      "application": {
                                        "argument": {"literal": {"string": "graph inference"}},
                                        "function": {
                                          "typeApplication": {
                                            "body": {
                                              "typeApplication": {
                                                "body": {"variable": "hydra.monads.withTrace"},
                                                "type": {"variable": "t0"}}},
                                            "type": {"variable": "hydra.graph.Graph"}}}}}}}}}}}}},
                    "domain": [{"variable": "hydra.graph.Graph"}],
                    "parameter": "g0"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "application": {
                  "argument": {"variable": "hydra.graph.Graph"},
                  "function": {
                    "application": {
                      "argument": {"variable": "t0"},
                      "function": {"variable": "hydra.compute.Flow"}}}}},
              "domain": {"variable": "hydra.graph.Graph"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferInGraphContext",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Infer the type of a term in graph context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "application": {
                    "argument": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {"literal": {"string": "single term"}},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "term"},
                                            "function": {
                                              "application": {
                                                "argument": {"variable": "cx"},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                    "type": {"variable": "hydra.graph.Graph"}}}}}}}}},
                                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                                    "parameter": "cx"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "g"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {"variable": "hydra.schemas.graphToInferenceContext"},
                                          "type": {"variable": "hydra.graph.Graph"}}}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                              "type": {"variable": "hydra.graph.Graph"}}},
                                          "type": {"variable": "hydra.typing.InferenceContext"}}},
                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                          "domain": [{"variable": "hydra.graph.Graph"}],
                          "parameter": "g"}}},
                    "function": {
                      "application": {
                        "argument": {
                          "typeApplication": {
                            "body": {"variable": "hydra.monads.getState"},
                            "type": {"variable": "hydra.graph.Graph"}}},
                        "function": {
                          "typeApplication": {
                            "body": {
                              "typeApplication": {
                                "body": {
                                  "typeApplication": {
                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                    "type": {"variable": "hydra.graph.Graph"}}},
                                "type": {"variable": "hydra.graph.Graph"}}},
                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                "domain": [{"variable": "hydra.core.Term"}],
                "parameter": "term"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "application": {
                  "argument": {"variable": "hydra.typing.InferenceResult"},
                  "function": {
                    "application": {
                      "argument": {"variable": "hydra.graph.Graph"},
                      "function": {"variable": "hydra.compute.Flow"}}}}},
              "domain": {"variable": "hydra.core.Term"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.inferMany",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer types for multiple terms"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "dflt",
                                  "term": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "e",
                                          "term": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "pairs"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                      "type": {
                                                        "pair": {
                                                          "first": {"variable": "hydra.core.Term"},
                                                          "second": {"literal": {"string": {}}}}}}}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                      "type": {"variable": "hydra.core.Term"}}},
                                                  "type": {"literal": {"string": {}}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"variable": "hydra.core.Term"},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "desc",
                                              "term": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "pairs"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                          "type": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.core.Term"},
                                                              "second": {"literal": {"string": {}}}}}}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                          "type": {"variable": "hydra.core.Term"}}},
                                                      "type": {"literal": {"string": {}}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"literal": {"string": {}}},
                                                  "variables": []}]}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "tl",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "pairs"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.tail"}},
                                                          "type": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.core.Term"},
                                                              "second": {"literal": {"string": {}}}}}}}}},
                                                  "type": [
                                                    {
                                                      "constraints": null,
                                                      "type": {
                                                        "list": {
                                                          "pair": {
                                                            "first": {"variable": "hydra.core.Term"},
                                                            "second": {"literal": {"string": {}}}}}},
                                                      "variables": []}]}],
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "e1",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result1"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Term"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "t1",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "result1"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"variable": "hydra.core.Type"},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "s1",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {"variable": "result1"},
                                                                            "function": {
                                                                              "function": {
                                                                                "elimination": {
                                                                                  "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                        "type": [
                                                                          {
                                                                            "constraints": null,
                                                                            "type": {"variable": "hydra.typing.TypeSubst"},
                                                                            "variables": []}]}],
                                                                    "body": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "function": {
                                                                            "lambda": {
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "e2",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "result2"},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                              "type": {
                                                                                                "pair": {
                                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "t2",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "result2"},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                          "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                      "type": {
                                                                                                        "pair": {
                                                                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                          "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                      "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                  "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "s2",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "result2"},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                              "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                          "type": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                              "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                          "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                              "type": [
                                                                                                {
                                                                                                  "constraints": null,
                                                                                                  "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                  "variables": []}]}],
                                                                                          "body": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "pair": {
                                                                                                          "@first": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "e2"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "e1"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                          "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.cons"}},
                                                                                                                      "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                          "@second": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "pair": {
                                                                                                                      "@first": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "t2"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "t1"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "s2"},
                                                                                                                                      "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                              "function": {
                                                                                                                                "typeApplication": {
                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.cons"}},
                                                                                                                                  "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                                      "@second": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "s2"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s1"},
                                                                                                                              "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}}}},
                                                                                                                  "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                  "type": {
                                                                                                    "pair": {
                                                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                      "type": {"variable": "t0"}}},
                                                                                                  "type": {
                                                                                                    "pair": {
                                                                                                      "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                      "second": {
                                                                                                        "pair": {
                                                                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                          "second": {"variable": "hydra.typing.TypeSubst"}}}}}}}}}}}}}}},
                                                                              "domain": [
                                                                                {
                                                                                  "pair": {
                                                                                    "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                    "second": {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                                              "parameter": "result2"}}},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "tl"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "cx"},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "s1"},
                                                                                            "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {"variable": "hydra.inference.inferMany"},
                                                                                        "type": {"variable": "t0"}}}}}}},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                        "type": {"variable": "t0"}}},
                                                                                    "type": {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                        "second": {
                                                                                          "pair": {
                                                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                            "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                "type": {
                                                                                  "pair": {
                                                                                    "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                    "second": {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}}}}}}}}}}}},
                                                        "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                        "parameter": "result1"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "desc"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "e"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                      "type": {"variable": "t0"}}}}}}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                          "type": {
                                                            "pair": {
                                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                                              "second": {
                                                                "pair": {
                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}}}}}}}}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {
                                        "application": {
                                          "argument": {
                                            "pair": {
                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                              "second": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "t0"},
                                              "function": {"variable": "hydra.compute.Flow"}}}}},
                                      "variables": []}]}],
                              "body": {
                                "application": {
                                  "argument": {"variable": "dflt"},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "pair": {
                                                      "@first": {
                                                        "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Term"}}},
                                                      "@second": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "pair": {
                                                                  "@first": {
                                                                    "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Type"}}},
                                                                  "@second": {"variable": "hydra.substitution.idTypeSubst"}}},
                                                              "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                          "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                              "type": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                  "type": {"variable": "t0"}}},
                                              "type": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Term"}},
                                                  "second": {
                                                    "pair": {
                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}}}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "pairs"},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.lists.null"}},
                                                  "type": {
                                                    "pair": {
                                                      "first": {"variable": "hydra.core.Term"},
                                                      "second": {"literal": {"string": {}}}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                              "type": {
                                                "application": {
                                                  "argument": {
                                                    "pair": {
                                                      "first": {"list": {"variable": "hydra.core.Term"}},
                                                      "second": {
                                                        "pair": {
                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                          "second": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "t0"},
                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}}}},
                          "domain": [
                            {
                              "list": {
                                "pair": {
                                  "first": {"variable": "hydra.core.Term"},
                                  "second": {"literal": {"string": {}}}}}}],
                          "parameter": "pairs"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {
                        "pair": {
                          "first": {"list": {"variable": "hydra.core.Term"}},
                          "second": {
                            "pair": {
                              "first": {"list": {"variable": "hydra.core.Type"}},
                              "second": {"variable": "hydra.typing.TypeSubst"}}}}},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {
                    "list": {
                      "pair": {
                        "first": {"variable": "hydra.core.Term"},
                        "second": {"literal": {"string": {}}}}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfAnnotatedTerm",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of an annotated term"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "term",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "at"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.AnnotatedTerm"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Term"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "ann",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "at"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {"field": "annotation", "typeName": "hydra.core.AnnotatedTerm"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {
                                            "map": {
                                              "keys": {"variable": "hydra.core.Name"},
                                              "values": {"variable": "hydra.core.Term"}}},
                                          "variables": []}]}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "iterm",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "result"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                    "type": [
                                                      {
                                                        "constraints": null,
                                                        "type": {"variable": "hydra.core.Term"},
                                                        "variables": []}]}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "itype",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "result"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {
                                                                  "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.core.Type"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "isubst",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "result"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "iconstraints",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "result"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {
                                                                            "field": "classConstraints",
                                                                            "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {
                                                                      "map": {
                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "record": {
                                                                    "fields": [
                                                                      {
                                                                        "name": "term",
                                                                        "term": {
                                                                          "union": {
                                                                            "field": {
                                                                              "name": "annotated",
                                                                              "term": {
                                                                                "record": {
                                                                                  "fields": [
                                                                                    {"name": "body", "term": {"variable": "iterm"}},
                                                                                    {"name": "annotation", "term": {"variable": "ann"}}],
                                                                                  "typeName": "hydra.core.AnnotatedTerm"}}},
                                                                            "typeName": "hydra.core.Term"}}},
                                                                      {"name": "type", "term": {"variable": "itype"}},
                                                                      {"name": "subst", "term": {"variable": "isubst"}},
                                                                      {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                    "typeName": "hydra.typing.InferenceResult"}},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                        "type": {"variable": "t0"}}},
                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                                            "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                            "parameter": "result"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"literal": {"string": "annotated term"}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "term"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                          "type": {"variable": "t0"}}}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.AnnotatedTerm"}],
                          "parameter": "at"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.AnnotatedTerm"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfApplication",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a function application"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "e0",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "app"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "function", "typeName": "hydra.core.Application"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Term"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "e1",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "app"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {"field": "argument", "typeName": "hydra.core.Application"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Term"},
                                          "variables": []}]}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "a",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "lhsResult"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                    "type": [
                                                      {
                                                        "constraints": null,
                                                        "type": {"variable": "hydra.core.Term"},
                                                        "variables": []}]}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "t0",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "lhsResult"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {
                                                                  "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.core.Type"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "s0",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "lhsResult"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "c0",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "lhsResult"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {
                                                                          "record": {
                                                                            "field": "classConstraints",
                                                                            "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {
                                                                      "map": {
                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "b",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "rhsResult"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"variable": "hydra.core.Term"},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "t1",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "rhsResult"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {
                                                                                            "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {"variable": "hydra.core.Type"},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "s1",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "rhsResult"},
                                                                                          "function": {
                                                                                            "function": {
                                                                                              "elimination": {
                                                                                                "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "c1",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "rhsResult"},
                                                                                              "function": {
                                                                                                "function": {
                                                                                                  "elimination": {
                                                                                                    "record": {
                                                                                                      "field": "classConstraints",
                                                                                                      "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {
                                                                                                "map": {
                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "function": {
                                                                                              "lambda": {
                                                                                                "body": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "function": {
                                                                                                        "lambda": {
                                                                                                          "body": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "rExpr",
                                                                                                                            "term": {
                                                                                                                              "union": {
                                                                                                                                "field": {
                                                                                                                                  "name": "application",
                                                                                                                                  "term": {
                                                                                                                                    "record": {
                                                                                                                                      "fields": [
                                                                                                                                        {
                                                                                                                                          "name": "function",
                                                                                                                                          "term": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "a"},
                                                                                                                                              "function": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "s2"},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "s1"},
                                                                                                                                                          "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                                                                                                                        {
                                                                                                                                          "name": "argument",
                                                                                                                                          "term": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "b"},
                                                                                                                                              "function": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "s2"},
                                                                                                                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}}],
                                                                                                                                      "typeName": "hydra.core.Application"}}},
                                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                                            "type": [
                                                                                                                              {
                                                                                                                                "constraints": null,
                                                                                                                                "type": {"variable": "hydra.core.Term"},
                                                                                                                                "variables": []}]}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "rType",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "union": {
                                                                                                                                        "field": {"name": "variable", "term": {"variable": "v"}},
                                                                                                                                        "typeName": "hydra.core.Type"}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "s2"},
                                                                                                                                        "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                                "type": [
                                                                                                                                  {
                                                                                                                                    "constraints": null,
                                                                                                                                    "type": {"variable": "hydra.core.Type"},
                                                                                                                                    "variables": []}]}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "rSubst",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"list": [{"variable": "s0"}, {"variable": "s1"}, {"variable": "s2"}]},
                                                                                                                                        "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                                    "type": [
                                                                                                                                      {
                                                                                                                                        "constraints": null,
                                                                                                                                        "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                        "variables": []}]}],
                                                                                                                                "body": {
                                                                                                                                  "let": {
                                                                                                                                    "bindings": [
                                                                                                                                      {
                                                                                                                                        "name": "c0Subst",
                                                                                                                                        "term": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "c0"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "s1"},
                                                                                                                                                    "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "s2"},
                                                                                                                                                "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                        "type": [
                                                                                                                                          {
                                                                                                                                            "constraints": null,
                                                                                                                                            "type": {
                                                                                                                                              "map": {
                                                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                            "variables": []}]}],
                                                                                                                                    "body": {
                                                                                                                                      "let": {
                                                                                                                                        "bindings": [
                                                                                                                                          {
                                                                                                                                            "name": "c1Subst",
                                                                                                                                            "term": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "c1"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "s2"},
                                                                                                                                                    "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                            "type": [
                                                                                                                                              {
                                                                                                                                                "constraints": null,
                                                                                                                                                "type": {
                                                                                                                                                  "map": {
                                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                                "variables": []}]}],
                                                                                                                                        "body": {
                                                                                                                                          "let": {
                                                                                                                                            "bindings": [
                                                                                                                                              {
                                                                                                                                                "name": "rConstraints",
                                                                                                                                                "term": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "c1Subst"},
                                                                                                                                                    "function": {
                                                                                                                                                      "application": {
                                                                                                                                                        "argument": {"variable": "c0Subst"},
                                                                                                                                                        "function": {
                                                                                                                                                          "typeApplication": {
                                                                                                                                                            "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                            "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                                "type": [
                                                                                                                                                  {
                                                                                                                                                    "constraints": null,
                                                                                                                                                    "type": {
                                                                                                                                                      "map": {
                                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                                    "variables": []}]}],
                                                                                                                                            "body": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {
                                                                                                                                                  "record": {
                                                                                                                                                    "fields": [
                                                                                                                                                      {"name": "term", "term": {"variable": "rExpr"}},
                                                                                                                                                      {"name": "type", "term": {"variable": "rType"}},
                                                                                                                                                      {"name": "subst", "term": {"variable": "rSubst"}},
                                                                                                                                                      {"name": "classConstraints", "term": {"variable": "rConstraints"}}],
                                                                                                                                                    "typeName": "hydra.typing.InferenceResult"}},
                                                                                                                                                "function": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {
                                                                                                                                                      "typeApplication": {
                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                                                                        "type": {"variable": "t0"}}},
                                                                                                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}},
                                                                                                                    "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                                    "parameter": "_"}}},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "s2"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "cx"},
                                                                                                                          "function": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {"variable": "hydra.checking.checkTypeSubst"},
                                                                                                                              "type": {"variable": "t0"}}}}}}},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                              "type": {"variable": "t0"}}},
                                                                                                                          "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                                                          "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                          "parameter": "s2"}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"literal": {"string": "application lhs"}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "union": {
                                                                                                                    "field": {
                                                                                                                      "name": "function",
                                                                                                                      "term": {
                                                                                                                        "record": {
                                                                                                                          "fields": [
                                                                                                                            {"name": "domain", "term": {"variable": "t1"}},
                                                                                                                            {
                                                                                                                              "name": "codomain",
                                                                                                                              "term": {
                                                                                                                                "union": {
                                                                                                                                  "field": {"name": "variable", "term": {"variable": "v"}},
                                                                                                                                  "typeName": "hydra.core.Type"}}}],
                                                                                                                          "typeName": "hydra.core.FunctionType"}}},
                                                                                                                    "typeName": "hydra.core.Type"}},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "t0"},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "s1"},
                                                                                                                            "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "cx"},
                                                                                                                            "function": {
                                                                                                                              "function": {
                                                                                                                                "elimination": {
                                                                                                                                  "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                        "function": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {"variable": "hydra.unification.unifyTypes"},
                                                                                                                                "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                            "type": {"variable": "t0"}}}}}}}}}}},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                    "type": {"variable": "t0"}}},
                                                                                                                "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                                                "domain": [{"variable": "hydra.core.Name"}],
                                                                                                "parameter": "v"}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"variable": "hydra.schemas.freshName"},
                                                                                                  "type": {"variable": "t0"}}},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                          "type": {"variable": "t0"}}},
                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}},
                                                                      "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                                      "parameter": "rhsResult"}}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"literal": {"string": "rhs"}},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "e1"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "cx"},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "s0"},
                                                                                        "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                                    "type": {"variable": "t0"}}}}}}}}},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                "type": {"variable": "t0"}}},
                                                                            "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}},
                                            "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                            "parameter": "lhsResult"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"literal": {"string": "lhs"}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "e0"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                          "type": {"variable": "t0"}}}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Application"}],
                          "parameter": "app"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Application"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfCaseStatement",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a case statement"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "tname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "caseStmt"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "typeName", "typeName": "hydra.core.CaseStatement"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "dflt",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "caseStmt"},
                                          "function": {
                                            "function": {
                                              "elimination": {
                                                "record": {"field": "default", "typeName": "hydra.core.CaseStatement"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"maybe": {"variable": "hydra.core.Term"}},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "cases",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "caseStmt"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "cases", "typeName": "hydra.core.CaseStatement"}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"list": {"variable": "hydra.core.Field"}},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "fnames",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "cases"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                              "type": {"variable": "hydra.core.Field"}}},
                                                          "type": {"variable": "hydra.core.Name"}}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"list": {"variable": "hydra.core.Name"}},
                                                  "variables": []}]}],
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "svars",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "schemaType"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"list": {"variable": "hydra.core.Name"}},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "stype",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "schemaType"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Type"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "function": {
                                                                              "lambda": {
                                                                                "body": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "function": {
                                                                                        "lambda": {
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "iterms",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "caseResults"},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                              "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                          "type": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                              "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                  "type": [
                                                                                                    {
                                                                                                      "constraints": null,
                                                                                                      "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                                      "variables": []}]}],
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "itypes",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "caseResults"},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                  "type": {
                                                                                                                    "pair": {
                                                                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                          "function": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                  "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                      "type": [
                                                                                                        {
                                                                                                          "constraints": null,
                                                                                                          "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                                          "variables": []}]}],
                                                                                                  "body": {
                                                                                                    "let": {
                                                                                                      "bindings": [
                                                                                                        {
                                                                                                          "name": "isubst",
                                                                                                          "term": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "caseResults"},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                          "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                      "type": {
                                                                                                                        "pair": {
                                                                                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                          "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                      "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                                  "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                          "type": [
                                                                                                            {
                                                                                                              "constraints": null,
                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                              "variables": []}]}],
                                                                                                      "body": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "function": {
                                                                                                              "lambda": {
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "cod",
                                                                                                                        "term": {
                                                                                                                          "union": {
                                                                                                                            "field": {"name": "variable", "term": {"variable": "codv"}},
                                                                                                                            "typeName": "hydra.core.Type"}},
                                                                                                                        "type": [
                                                                                                                          {
                                                                                                                            "constraints": null,
                                                                                                                            "type": {"variable": "hydra.core.Type"},
                                                                                                                            "variables": []}]}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "caseMap",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "sfields"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "function": {
                                                                                                                                            "lambda": {
                                                                                                                                              "body": {
                                                                                                                                                "typeApplication": {
                                                                                                                                                  "body": {
                                                                                                                                                    "typeApplication": {
                                                                                                                                                      "body": {
                                                                                                                                                        "pair": {
                                                                                                                                                          "@first": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "ft"},
                                                                                                                                                              "function": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.FieldType"}}}}}},
                                                                                                                                                          "@second": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "ft"},
                                                                                                                                                              "function": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "elimination": {"record": {"field": "type", "typeName": "hydra.core.FieldType"}}}}}}}},
                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                  "type": {"variable": "hydra.core.Type"}}},
                                                                                                                                              "domain": [{"variable": "hydra.core.FieldType"}],
                                                                                                                                              "parameter": "ft"}}},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                "type": {"variable": "hydra.core.FieldType"}}},
                                                                                                                                            "type": {
                                                                                                                                              "pair": {
                                                                                                                                                "first": {"variable": "hydra.core.Name"},
                                                                                                                                                "second": {"variable": "hydra.core.Type"}}}}}}}}},
                                                                                                                                "function": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {
                                                                                                                                      "typeApplication": {
                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                                                                                                        "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                    "type": {"variable": "hydra.core.Type"}}}}},
                                                                                                                            "type": [
                                                                                                                              {
                                                                                                                                "constraints": null,
                                                                                                                                "type": {
                                                                                                                                  "map": {
                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                    "values": {"variable": "hydra.core.Type"}}},
                                                                                                                                "variables": []}]}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "dfltConstraints",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "dfltResult"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {
                                                                                                                                              "function": {
                                                                                                                                                "lambda": {
                                                                                                                                                  "body": {
                                                                                                                                                    "record": {
                                                                                                                                                      "fields": [
                                                                                                                                                        {"name": "left", "term": {"variable": "cod"}},
                                                                                                                                                        {
                                                                                                                                                          "name": "right",
                                                                                                                                                          "term": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "r"},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "function": {
                                                                                                                                                                      "elimination": {
                                                                                                                                                                        "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "isubst"},
                                                                                                                                                                  "function": {"variable": "hydra.substitution.substInType"}}}}}},
                                                                                                                                                        {"name": "comment", "term": {"literal": {"string": "match default"}}}],
                                                                                                                                                      "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                                                  "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                                                                                                                  "parameter": "r"}}},
                                                                                                                                            "function": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.maybes.map"}},
                                                                                                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                                                "type": {"variable": "hydra.typing.TypeConstraint"}}}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "typeApplication": {
                                                                                                                                        "body": {"variable": "hydra.monads.maybeToList"},
                                                                                                                                        "type": {"variable": "hydra.typing.TypeConstraint"}}}}},
                                                                                                                                "type": [
                                                                                                                                  {
                                                                                                                                    "constraints": null,
                                                                                                                                    "type": {"list": {"variable": "hydra.typing.TypeConstraint"}},
                                                                                                                                    "variables": []}]}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "caseConstraints",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "itypes"},
                                                                                                                                            "function": {
                                                                                                                                              "application": {
                                                                                                                                                "argument": {"variable": "fnames"},
                                                                                                                                                "function": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {
                                                                                                                                                      "function": {
                                                                                                                                                        "lambda": {
                                                                                                                                                          "body": {
                                                                                                                                                            "function": {
                                                                                                                                                              "lambda": {
                                                                                                                                                                "body": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "caseMap"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "fname"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                "body": {
                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                                                                                                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {
                                                                                                                                                                          "function": {
                                                                                                                                                                            "lambda": {
                                                                                                                                                                              "body": {
                                                                                                                                                                                "record": {
                                                                                                                                                                                  "fields": [
                                                                                                                                                                                    {"name": "left", "term": {"variable": "itype"}},
                                                                                                                                                                                    {
                                                                                                                                                                                      "name": "right",
                                                                                                                                                                                      "term": {
                                                                                                                                                                                        "union": {
                                                                                                                                                                                          "field": {
                                                                                                                                                                                            "name": "function",
                                                                                                                                                                                            "term": {
                                                                                                                                                                                              "record": {
                                                                                                                                                                                                "fields": [
                                                                                                                                                                                                  {"name": "domain", "term": {"variable": "ftype"}},
                                                                                                                                                                                                  {"name": "codomain", "term": {"variable": "cod"}}],
                                                                                                                                                                                                "typeName": "hydra.core.FunctionType"}}},
                                                                                                                                                                                          "typeName": "hydra.core.Type"}}},
                                                                                                                                                                                    {"name": "comment", "term": {"literal": {"string": "case type"}}}],
                                                                                                                                                                                  "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                                                                              "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                                                                              "parameter": "ftype"}}},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "typeApplication": {
                                                                                                                                                                            "body": {
                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.maybes.map"}},
                                                                                                                                                                                "type": {"variable": "hydra.core.Type"}}},
                                                                                                                                                                            "type": {"variable": "hydra.typing.TypeConstraint"}}}}}}},
                                                                                                                                                                "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                                                                "parameter": "itype"}}},
                                                                                                                                                          "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                          "parameter": "fname"}}},
                                                                                                                                                    "function": {
                                                                                                                                                      "typeApplication": {
                                                                                                                                                        "body": {
                                                                                                                                                          "typeApplication": {
                                                                                                                                                            "body": {
                                                                                                                                                              "typeApplication": {
                                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.zipWith"}},
                                                                                                                                                                "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                            "type": {"variable": "hydra.core.Type"}}},
                                                                                                                                                        "type": {"maybe": {"variable": "hydra.typing.TypeConstraint"}}}}}}}}}},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.maybes.cat"}},
                                                                                                                                            "type": {"variable": "hydra.typing.TypeConstraint"}}}}},
                                                                                                                                    "type": [
                                                                                                                                      {
                                                                                                                                        "constraints": null,
                                                                                                                                        "type": {"list": {"variable": "hydra.typing.TypeConstraint"}},
                                                                                                                                        "variables": []}]}],
                                                                                                                                "body": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "list": [{"variable": "dfltConstraints"}, {"variable": "caseConstraints"}]},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.concat"}},
                                                                                                                                            "type": {"variable": "hydra.typing.TypeConstraint"}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "function": {
                                                                                                                                            "lambda": {
                                                                                                                                              "body": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "list": [
                                                                                                                                                              {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {"variable": "dfltResult"},
                                                                                                                                                                      "function": {
                                                                                                                                                                        "application": {
                                                                                                                                                                          "argument": {
                                                                                                                                                                            "function": {
                                                                                                                                                                              "elimination": {
                                                                                                                                                                                "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}},
                                                                                                                                                                          "function": {
                                                                                                                                                                            "typeApplication": {
                                                                                                                                                                              "body": {
                                                                                                                                                                                "typeApplication": {
                                                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.maybes.map"}},
                                                                                                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {"variable": "hydra.monads.maybeToList"},
                                                                                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                                                                              {"list": [{"variable": "isubst"}, {"variable": "subst"}]}]},
                                                                                                                                                          "function": {
                                                                                                                                                            "typeApplication": {
                                                                                                                                                              "body": {"function": {"primitive": "hydra.lib.lists.concat"}},
                                                                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                                                                      "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                                                  "function": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "union": {
                                                                                                                                                          "field": {
                                                                                                                                                            "name": "function",
                                                                                                                                                            "term": {
                                                                                                                                                              "record": {
                                                                                                                                                                "fields": [
                                                                                                                                                                  {
                                                                                                                                                                    "name": "domain",
                                                                                                                                                                    "term": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "svars"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {
                                                                                                                                                                                  "function": {
                                                                                                                                                                                    "lambda": {
                                                                                                                                                                                      "body": {
                                                                                                                                                                                        "union": {
                                                                                                                                                                                          "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                                                                                          "typeName": "hydra.core.Type"}},
                                                                                                                                                                                      "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                                                      "parameter": "x"}}},
                                                                                                                                                                                "function": {
                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                    "body": {
                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                                                        "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                    "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "tname"},
                                                                                                                                                                            "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                                                                                                                  {"name": "codomain", "term": {"variable": "cod"}}],
                                                                                                                                                                "typeName": "hydra.core.FunctionType"}}},
                                                                                                                                                          "typeName": "hydra.core.Type"}},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "union": {
                                                                                                                                                                  "field": {
                                                                                                                                                                    "name": "function",
                                                                                                                                                                    "term": {
                                                                                                                                                                      "union": {
                                                                                                                                                                        "field": {
                                                                                                                                                                          "name": "elimination",
                                                                                                                                                                          "term": {
                                                                                                                                                                            "union": {
                                                                                                                                                                              "field": {
                                                                                                                                                                                "name": "union",
                                                                                                                                                                                "term": {
                                                                                                                                                                                  "record": {
                                                                                                                                                                                    "fields": [
                                                                                                                                                                                      {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                                                                                      {
                                                                                                                                                                                        "name": "default",
                                                                                                                                                                                        "term": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "dfltResult"},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                    "elimination": {
                                                                                                                                                                                                      "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                                    "body": {
                                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.maybes.map"}},
                                                                                                                                                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                                                                                                    "type": {"variable": "hydra.core.Term"}}}}}}}},
                                                                                                                                                                                      {
                                                                                                                                                                                        "name": "cases",
                                                                                                                                                                                        "term": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "iterms"},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "fnames"},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {
                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                        "lambda": {
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "function": {
                                                                                                                                                                                                              "lambda": {
                                                                                                                                                                                                                "body": {
                                                                                                                                                                                                                  "record": {
                                                                                                                                                                                                                    "fields": [
                                                                                                                                                                                                                      {"name": "name", "term": {"variable": "n"}},
                                                                                                                                                                                                                      {"name": "term", "term": {"variable": "t"}}],
                                                                                                                                                                                                                    "typeName": "hydra.core.Field"}},
                                                                                                                                                                                                                "domain": [{"variable": "hydra.core.Term"}],
                                                                                                                                                                                                                "parameter": "t"}}},
                                                                                                                                                                                                          "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                                                                          "parameter": "n"}}},
                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                                        "body": {
                                                                                                                                                                                                          "typeApplication": {
                                                                                                                                                                                                            "body": {
                                                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.zipWith"}},
                                                                                                                                                                                                                "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                            "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                                                                                        "type": {"variable": "hydra.core.Field"}}}}}}}}}}],
                                                                                                                                                                                    "typeName": "hydra.core.CaseStatement"}}},
                                                                                                                                                                              "typeName": "hydra.core.Elimination"}}},
                                                                                                                                                                        "typeName": "hydra.core.Function"}}},
                                                                                                                                                                  "typeName": "hydra.core.Term"}},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "svars"},
                                                                                                                                                                  "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                                                                          "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                                              "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                                                              "parameter": "subst"}}},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "cx"},
                                                                                                                                            "function": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                                                "type": {"variable": "t0"}}}}}}}}}}}}}}}}},
                                                                                                                "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                "parameter": "codv"}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"variable": "hydra.schemas.freshName"},
                                                                                                                  "type": {"variable": "t0"}}},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                          "type": {"variable": "t0"}}},
                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                                                                                          "domain": [
                                                                                            {
                                                                                              "pair": {
                                                                                                "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                "second": {
                                                                                                  "pair": {
                                                                                                    "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                    "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                                                          "parameter": "caseResults"}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "cases"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "function": {
                                                                                                        "lambda": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "pair": {
                                                                                                                      "@first": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "f"},
                                                                                                                          "function": {
                                                                                                                            "function": {
                                                                                                                              "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                                                                                                      "@second": {
                                                                                                                        "application": {
                                                                                                                          "argument": {
                                                                                                                            "list": [
                                                                                                                              {"literal": {"string": "case "}},
                                                                                                                              {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "tname"},
                                                                                                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                                                                              {"literal": {"string": "."}},
                                                                                                                              {
                                                                                                                                "application": {
                                                                                                                                  "argument": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "f"},
                                                                                                                                      "function": {
                                                                                                                                        "function": {
                                                                                                                                          "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                                                                                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}}]},
                                                                                                                          "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}}}},
                                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                                              "type": {"literal": {"string": {}}}}},
                                                                                                          "domain": [{"variable": "hydra.core.Field"}],
                                                                                                          "parameter": "f"}}},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                            "type": {"variable": "hydra.core.Field"}}},
                                                                                                        "type": {
                                                                                                          "pair": {
                                                                                                            "first": {"variable": "hydra.core.Term"},
                                                                                                            "second": {"literal": {"string": {}}}}}}}}}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "cx"},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"variable": "hydra.inference.inferMany"},
                                                                                                    "type": {"variable": "t0"}}}}}}},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                    "type": {"variable": "t0"}}},
                                                                                                "type": {
                                                                                                  "pair": {
                                                                                                    "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                    "second": {
                                                                                                      "pair": {
                                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                                "domain": [{"maybe": {"variable": "hydra.typing.InferenceResult"}}],
                                                                                "parameter": "dfltResult"}}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"variable": "dflt"},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "list": [
                                                                                                        {"literal": {"string": "case "}},
                                                                                                        {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "tname"},
                                                                                                            "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                                                        {"literal": {"string": ".<default>"}}]},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "t"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "cx"},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                                                            "type": {"variable": "t0"}}}}}}}}},
                                                                                            "domain": [{"variable": "hydra.core.Term"}],
                                                                                            "parameter": "t"}}},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.flows.mapMaybe"}},
                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                              "type": {"variable": "t0"}}},
                                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                          "type": {"variable": "t0"}}},
                                                                                      "type": {"maybe": {"variable": "hydra.typing.InferenceResult"}}}},
                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                      "domain": [{"list": {"variable": "hydra.core.FieldType"}}],
                                                                      "parameter": "sfields"}}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "stype"},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "tname"},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {"variable": "hydra.extract.core.unionType"},
                                                                                "type": {"variable": "t0"}}}}}}},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                "type": {"variable": "t0"}}},
                                                                            "type": {"list": {"variable": "hydra.core.FieldType"}}}},
                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                                    "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                    "parameter": "schemaType"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "tname"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "cx"},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"variable": "hydra.schemas.requireSchemaType"},
                                                              "type": {"variable": "t0"}}}}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                              "type": {"variable": "t0"}}},
                                                          "type": {"variable": "hydra.core.TypeScheme"}}},
                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.CaseStatement"}],
                          "parameter": "caseStmt"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.CaseStatement"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfCollection",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a collection"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "function": {
                                                    "lambda": {
                                                      "body": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "function": {
                                                                  "lambda": {
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "terms",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {"variable": "results"},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                        "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                    "type": {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                            "type": [
                                                                              {
                                                                                "constraints": null,
                                                                                "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                "variables": []}]}],
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "types",
                                                                                "term": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "results"},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                            "type": {
                                                                                              "pair": {
                                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {
                                                                                          "typeApplication": {
                                                                                            "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                            "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                        "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                "type": [
                                                                                  {
                                                                                    "constraints": null,
                                                                                    "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                    "variables": []}]}],
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "subst1",
                                                                                    "term": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "results"},
                                                                                            "function": {
                                                                                              "typeApplication": {
                                                                                                "body": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                    "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                "type": {
                                                                                                  "pair": {
                                                                                                    "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                    "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                            "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                    "type": [
                                                                                      {
                                                                                        "constraints": null,
                                                                                        "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                        "variables": []}]}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "constraints",
                                                                                        "term": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "types"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {
                                                                                                              "name": "left",
                                                                                                              "term": {
                                                                                                                "union": {
                                                                                                                  "field": {"name": "variable", "term": {"variable": "var"}},
                                                                                                                  "typeName": "hydra.core.Type"}}},
                                                                                                            {"name": "right", "term": {"variable": "t"}},
                                                                                                            {"name": "comment", "term": {"variable": "desc"}}],
                                                                                                          "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                      "domain": [{"variable": "hydra.core.Type"}],
                                                                                                      "parameter": "t"}}},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                        "type": {"variable": "hydra.core.Type"}}},
                                                                                                    "type": {"variable": "hydra.typing.TypeConstraint"}}}}}}},
                                                                                        "type": [
                                                                                          {
                                                                                            "constraints": null,
                                                                                            "type": {"list": {"variable": "hydra.typing.TypeConstraint"}},
                                                                                            "variables": []}]}],
                                                                                    "body": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "constraints"},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "let": {
                                                                                                      "bindings": [
                                                                                                        {
                                                                                                          "name": "iterm",
                                                                                                          "term": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "terms"},
                                                                                                              "function": {"variable": "trmCons"}}},
                                                                                                          "type": [
                                                                                                            {
                                                                                                              "constraints": null,
                                                                                                              "type": {"variable": "hydra.core.Term"},
                                                                                                              "variables": []}]}],
                                                                                                      "body": {
                                                                                                        "let": {
                                                                                                          "bindings": [
                                                                                                            {
                                                                                                              "name": "itype",
                                                                                                              "term": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "union": {
                                                                                                                      "field": {"name": "variable", "term": {"variable": "var"}},
                                                                                                                      "typeName": "hydra.core.Type"}},
                                                                                                                  "function": {"variable": "typCons"}}},
                                                                                                              "type": [
                                                                                                                {
                                                                                                                  "constraints": null,
                                                                                                                  "type": {"variable": "hydra.core.Type"},
                                                                                                                  "variables": []}]}],
                                                                                                          "body": {
                                                                                                            "let": {
                                                                                                              "bindings": [
                                                                                                                {
                                                                                                                  "name": "isubst",
                                                                                                                  "term": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "subst2"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "subst1"},
                                                                                                                          "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                  "type": [
                                                                                                                    {
                                                                                                                      "constraints": null,
                                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                      "variables": []}]}],
                                                                                                              "body": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "isubst"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "itype"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "iterm"},
                                                                                                                          "function": {"variable": "hydra.inference.yield"}}}}}}}}}}}}},
                                                                                                  "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                  "parameter": "subst2"}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "cx"},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                    "type": {"variable": "t0"}}}}}}}}}}}}}}}}},
                                                                    "domain": [
                                                                      {
                                                                        "pair": {
                                                                          "first": {"list": {"variable": "hydra.core.Term"}},
                                                                          "second": {
                                                                            "pair": {
                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                              "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                                    "parameter": "results"}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"literal": {"integer": {"int32": 1}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "els"},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                                                                  "type": {"variable": "hydra.core.Term"}}}}},
                                                                                          "function": {"function": {"primitive": "hydra.lib.math.add"}}}}}},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"literal": {"integer": {"int32": 1}}},
                                                                                      "function": {"function": {"primitive": "hydra.lib.math.range"}}}}}},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "function": {
                                                                                      "lambda": {
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "list": [
                                                                                                {"literal": {"string": "#"}},
                                                                                                {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "i"},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.literals.showInt32"}}}}]},
                                                                                            "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                        "domain": [{"literal": {"integer": {"int32": {}}}}],
                                                                                        "parameter": "i"}}},
                                                                                  "function": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                          "type": {"literal": {"integer": {"int32": {}}}}}},
                                                                                      "type": {"literal": {"string": {}}}}}}}}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "els"},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                      "type": {"variable": "hydra.core.Term"}}},
                                                                                  "type": {"literal": {"string": {}}}}}}}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "cx"},
                                                                          "function": {
                                                                            "typeApplication": {
                                                                              "body": {"variable": "hydra.inference.inferMany"},
                                                                              "type": {"variable": "t0"}}}}}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                              "type": {"variable": "t0"}}},
                                                                          "type": {
                                                                            "pair": {
                                                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                                                              "second": {
                                                                                "pair": {
                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                          "function": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "union": {
                                                                                  "field": {"name": "variable", "term": {"variable": "var"}},
                                                                                  "typeName": "hydra.core.Type"}},
                                                                              "function": {"variable": "typCons"}}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Term"}}},
                                                                                      "function": {"variable": "trmCons"}}},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"list": [{"variable": "var"}]},
                                                                                      "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                              "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                          "type": {"variable": "t0"}}},
                                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "els"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.lists.null"}},
                                                                          "type": {"variable": "hydra.core.Term"}}}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                                      "type": {
                                                                        "application": {
                                                                          "argument": {"variable": "hydra.typing.InferenceResult"},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "t0"},
                                                                              "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}},
                                                      "domain": [{"variable": "hydra.core.Name"}],
                                                      "parameter": "var"}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "typeApplication": {
                                                        "body": {"variable": "hydra.schemas.freshName"},
                                                        "type": {"variable": "t0"}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                "type": {"variable": "t0"}}},
                                                            "type": {"variable": "hydra.core.Name"}}},
                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                            "domain": [{"list": {"variable": "hydra.core.Term"}}],
                                            "parameter": "els"}}},
                                      "domain": [{"literal": {"string": {}}}],
                                      "parameter": "desc"}}},
                                "domain": [
                                  {
                                    "function": {
                                      "codomain": {"variable": "hydra.core.Term"},
                                      "domain": {"list": {"variable": "hydra.core.Term"}}}}],
                                "parameter": "trmCons"}}},
                          "domain": [
                            {
                              "function": {
                                "codomain": {"variable": "hydra.core.Type"},
                                "domain": {"variable": "hydra.core.Type"}}}],
                          "parameter": "typCons"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "function": {
                          "codomain": {
                            "function": {
                              "codomain": {
                                "application": {
                                  "argument": {"variable": "hydra.typing.InferenceResult"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "t0"},
                                      "function": {"variable": "hydra.compute.Flow"}}}}},
                              "domain": {"list": {"variable": "hydra.core.Term"}}}},
                          "domain": {"literal": {"string": {}}}}},
                      "domain": {
                        "function": {
                          "codomain": {"variable": "hydra.core.Term"},
                          "domain": {"list": {"variable": "hydra.core.Term"}}}}}},
                  "domain": {
                    "function": {
                      "codomain": {"variable": "hydra.core.Type"},
                      "domain": {"variable": "hydra.core.Type"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOf",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {"string": "Infer the type of a term and return a type scheme"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "letTerm",
                                  "term": {
                                    "union": {
                                      "field": {
                                        "name": "let",
                                        "term": {
                                          "record": {
                                            "fields": [
                                              {
                                                "name": "bindings",
                                                "term": {
                                                  "list": [
                                                    {
                                                      "record": {
                                                        "fields": [
                                                          {
                                                            "name": "name",
                                                            "term": {
                                                              "wrap": {
                                                                "body": {"literal": {"string": "ignoredVariableName"}},
                                                                "typeName": "hydra.core.Name"}}},
                                                          {"name": "term", "term": {"variable": "term"}},
                                                          {
                                                            "name": "type",
                                                            "term": {
                                                              "typeApplication": {
                                                                "body": {"maybe": null},
                                                                "type": {"variable": "hydra.core.TypeScheme"}}}}],
                                                        "typeName": "hydra.core.Binding"}}]}},
                                              {
                                                "name": "body",
                                                "term": {
                                                  "union": {
                                                    "field": {
                                                      "name": "literal",
                                                      "term": {
                                                        "union": {
                                                          "field": {"name": "string", "term": {"literal": {"string": "ignoredBody"}}},
                                                          "typeName": "hydra.core.Literal"}}},
                                                    "typeName": "hydra.core.Term"}}}],
                                            "typeName": "hydra.core.Let"}}},
                                      "typeName": "hydra.core.Term"}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Term"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "forBindings",
                                      "term": {
                                        "typeLambda": {
                                          "body": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "binding",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "bindings"},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                                "type": {"variable": "hydra.core.Binding"}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.core.Binding"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "term1",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "binding"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.core.Term"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "mts",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "binding"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"maybe": {"variable": "hydra.core.TypeScheme"}},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {"variable": "mts"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "pair": {"@first": {"variable": "term1"}, "@second": {"variable": "ts"}}},
                                                                                      "type": {"variable": "hydra.core.Term"}}},
                                                                                  "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                      "type": {"variable": "t1"}}},
                                                                                  "type": {
                                                                                    "pair": {
                                                                                      "first": {"variable": "hydra.core.Term"},
                                                                                      "second": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                          "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                                          "parameter": "ts"}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"literal": {"string": "Expected a type scheme"}},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                                                    "type": {"variable": "t1"}}},
                                                                                "type": {
                                                                                  "pair": {
                                                                                    "first": {"variable": "hydra.core.Term"},
                                                                                    "second": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                                "type": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "pair": {
                                                                                        "first": {"variable": "hydra.core.Term"},
                                                                                        "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "t1"},
                                                                                        "function": {"variable": "hydra.compute.Flow"}}}}}}},
                                                                            "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}}}}}}}},
                                                "domain": [{"list": {"variable": "hydra.core.Binding"}}],
                                                "parameter": "bindings"}}},
                                          "parameter": "t1"}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {
                                            "function": {
                                              "codomain": {
                                                "application": {
                                                  "argument": {
                                                    "pair": {
                                                      "first": {"variable": "hydra.core.Term"},
                                                      "second": {"variable": "hydra.core.TypeScheme"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "t1"},
                                                      "function": {"variable": "hydra.compute.Flow"}}}}},
                                              "domain": {"list": {"variable": "hydra.core.Binding"}}}},
                                          "variables": ["t1"]}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "unifyAndSubst",
                                          "term": {
                                            "typeLambda": {
                                              "body": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "subst",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "result"},
                                                                "function": {
                                                                  "function": {
                                                                    "elimination": {
                                                                      "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "function": {
                                                                          "lambda": {
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "bindings",
                                                                                    "term": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "letResult"},
                                                                                        "function": {
                                                                                          "function": {
                                                                                            "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                                    "type": [
                                                                                      {
                                                                                        "constraints": null,
                                                                                        "type": {"list": {"variable": "hydra.core.Binding"}},
                                                                                        "variables": []}]}],
                                                                                "body": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "list": [
                                                                                                {
                                                                                                  "literal": {"string": "Expected a single binding with a type scheme, but got: "}},
                                                                                                {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "bindings"},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                                                                            "type": {"variable": "hydra.core.Binding"}}}}},
                                                                                                    "function": {"function": {"primitive": "hydra.lib.literals.showInt32"}}}},
                                                                                                {"literal": {"string": " bindings"}}]},
                                                                                            "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                                                                "type": {"variable": "t1"}}},
                                                                                            "type": {
                                                                                              "pair": {
                                                                                                "first": {"variable": "hydra.core.Term"},
                                                                                                "second": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "bindings"},
                                                                                            "function": {
                                                                                              "typeApplication": {"body": {"variable": "forBindings"}, "type": {"variable": "t1"}}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "bindings"},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                                                                        "type": {"variable": "hydra.core.Binding"}}}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"literal": {"integer": {"int32": 1}}},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"function": {"primitive": "hydra.lib.equality.equal"}},
                                                                                                        "type": {"literal": {"integer": {"int32": {}}}}}}}}}},
                                                                                            "function": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                                                                "type": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "pair": {
                                                                                                        "first": {"variable": "hydra.core.Term"},
                                                                                                        "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "t1"},
                                                                                                        "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}}}},
                                                                            "domain": [{"variable": "hydra.core.Let"}],
                                                                            "parameter": "letResult"}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"variable": "finalized"},
                                                                                  "function": {"variable": "hydra.extract.core.let"}}},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"variable": "hydra.lexical.withEmptyGraph"},
                                                                                      "type": {"variable": "hydra.core.Let"}}},
                                                                                  "type": {"variable": "t1"}}}}},
                                                                          "function": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                      "type": {"variable": "t1"}}},
                                                                                  "type": {"variable": "hydra.core.Let"}}},
                                                                              "type": {
                                                                                "pair": {
                                                                                  "first": {"variable": "hydra.core.Term"},
                                                                                  "second": {"variable": "hydra.core.TypeScheme"}}}}}}}}},
                                                                  "domain": [{"variable": "hydra.core.Term"}],
                                                                  "parameter": "finalized"}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "result"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "cx"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {"variable": "hydra.inference.finalizeInferredTerm"},
                                                                            "type": {"variable": "t1"}}}}}}},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                            "type": {"variable": "t1"}}},
                                                                        "type": {"variable": "hydra.core.Term"}}},
                                                                    "type": {
                                                                      "pair": {
                                                                        "first": {"variable": "hydra.core.Term"},
                                                                        "second": {"variable": "hydra.core.TypeScheme"}}}}}}}}}}},
                                                    "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                    "parameter": "result"}}},
                                              "parameter": "t1"}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {
                                                "function": {
                                                  "codomain": {
                                                    "application": {
                                                      "argument": {
                                                        "pair": {
                                                          "first": {"variable": "hydra.core.Term"},
                                                          "second": {"variable": "hydra.core.TypeScheme"}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "t1"},
                                                          "function": {"variable": "hydra.compute.Flow"}}}}},
                                                  "domain": {"variable": "hydra.typing.InferenceResult"}}},
                                              "variables": ["t1"]}]}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "result"},
                                                    "function": {
                                                      "typeApplication": {"body": {"variable": "unifyAndSubst"}, "type": {"variable": "t0"}}}}},
                                                "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                "parameter": "result"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"literal": {"string": "infer type of term"}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "letTerm"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "cx"},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                              "type": {"variable": "t0"}}}}}}}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                          "type": {"variable": "t0"}}},
                                                      "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                  "type": {
                                                    "pair": {
                                                      "first": {"variable": "hydra.core.Term"},
                                                      "second": {"variable": "hydra.core.TypeScheme"}}}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Term"}],
                          "parameter": "term"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {
                        "pair": {
                          "first": {"variable": "hydra.core.Term"},
                          "second": {"variable": "hydra.core.TypeScheme"}}},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfEither",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of an either value"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {"variable": "e"},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "iterm",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "r1"},
                                                              "function": {
                                                                "function": {
                                                                  "elimination": {
                                                                    "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                          "type": [
                                                            {
                                                              "constraints": null,
                                                              "type": {"variable": "hydra.core.Term"},
                                                              "variables": []}]}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "rightType",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "r1"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                              "type": [
                                                                {
                                                                  "constraints": null,
                                                                  "type": {"variable": "hydra.core.Type"},
                                                                  "variables": []}]}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "subst",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "r1"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                  "type": [
                                                                    {
                                                                      "constraints": null,
                                                                      "type": {"variable": "hydra.typing.TypeSubst"},
                                                                      "variables": []}]}],
                                                              "body": {
                                                                "application": {
                                                                  "argument": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "eitherTerm",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "either",
                                                                                      "term": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {"either": {"@right": {"variable": "iterm"}}},
                                                                                              "type": {"variable": "hydra.core.Term"}}},
                                                                                          "type": {"variable": "hydra.core.Term"}}}},
                                                                                    "typeName": "hydra.core.Term"}},
                                                                                "type": [
                                                                                  {
                                                                                    "constraints": null,
                                                                                    "type": {"variable": "hydra.core.Term"},
                                                                                    "variables": []}]}],
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "termWithLeftType",
                                                                                    "term": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "typeApplication",
                                                                                          "term": {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {"name": "body", "term": {"variable": "eitherTerm"}},
                                                                                                {"name": "type", "term": {"variable": "leftType"}}],
                                                                                              "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                        "typeName": "hydra.core.Term"}},
                                                                                    "type": [
                                                                                      {
                                                                                        "constraints": null,
                                                                                        "type": {"variable": "hydra.core.Term"},
                                                                                        "variables": []}]}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "termWithBothTypes",
                                                                                        "term": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "typeApplication",
                                                                                              "term": {
                                                                                                "record": {
                                                                                                  "fields": [
                                                                                                    {"name": "body", "term": {"variable": "termWithLeftType"}},
                                                                                                    {"name": "type", "term": {"variable": "rightType"}}],
                                                                                                  "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                            "typeName": "hydra.core.Term"}},
                                                                                        "type": [
                                                                                          {
                                                                                            "constraints": null,
                                                                                            "type": {"variable": "hydra.core.Term"},
                                                                                            "variables": []}]}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "eitherType",
                                                                                            "term": {
                                                                                              "union": {
                                                                                                "field": {
                                                                                                  "name": "either",
                                                                                                  "term": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {"name": "left", "term": {"variable": "leftType"}},
                                                                                                        {"name": "right", "term": {"variable": "rightType"}}],
                                                                                                      "typeName": "hydra.core.EitherType"}}},
                                                                                                "typeName": "hydra.core.Type"}},
                                                                                            "type": [
                                                                                              {
                                                                                                "constraints": null,
                                                                                                "type": {"variable": "hydra.core.Type"},
                                                                                                "variables": []}]}],
                                                                                        "body": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "subst"},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "eitherType"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "termWithBothTypes"},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"variable": "hydra.inference.yieldChecked"},
                                                                                                        "type": {"variable": "t0"}}}}}}}}}}}}}}}}},
                                                                        "domain": [{"variable": "hydra.core.Type"}],
                                                                        "parameter": "leftType"}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.freshVariableType"},
                                                                          "type": {"variable": "t0"}}},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                  "type": {"variable": "t0"}}},
                                                                              "type": {"variable": "hydra.core.Type"}}},
                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                                                  "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                  "parameter": "r1"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"literal": {"string": "either right value"}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "r"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "cx"},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                "type": {"variable": "t0"}}}}}}}}},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                            "type": {"variable": "t0"}}},
                                                        "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                        "domain": [{"variable": "hydra.core.Term"}],
                                        "parameter": "r"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "function": {
                                                    "lambda": {
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "iterm",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "r1"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                              "type": [
                                                                {
                                                                  "constraints": null,
                                                                  "type": {"variable": "hydra.core.Term"},
                                                                  "variables": []}]}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "leftType",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "r1"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                  "type": [
                                                                    {
                                                                      "constraints": null,
                                                                      "type": {"variable": "hydra.core.Type"},
                                                                      "variables": []}]}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "subst",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "r1"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"variable": "hydra.typing.TypeSubst"},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "function": {
                                                                          "lambda": {
                                                                            "body": {
                                                                              "let": {
                                                                                "bindings": [
                                                                                  {
                                                                                    "name": "eitherTerm",
                                                                                    "term": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "either",
                                                                                          "term": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"either": {"@left": {"variable": "iterm"}}},
                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                              "type": {"variable": "hydra.core.Term"}}}},
                                                                                        "typeName": "hydra.core.Term"}},
                                                                                    "type": [
                                                                                      {
                                                                                        "constraints": null,
                                                                                        "type": {"variable": "hydra.core.Term"},
                                                                                        "variables": []}]}],
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "termWithLeftType",
                                                                                        "term": {
                                                                                          "union": {
                                                                                            "field": {
                                                                                              "name": "typeApplication",
                                                                                              "term": {
                                                                                                "record": {
                                                                                                  "fields": [
                                                                                                    {"name": "body", "term": {"variable": "eitherTerm"}},
                                                                                                    {"name": "type", "term": {"variable": "leftType"}}],
                                                                                                  "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                            "typeName": "hydra.core.Term"}},
                                                                                        "type": [
                                                                                          {
                                                                                            "constraints": null,
                                                                                            "type": {"variable": "hydra.core.Term"},
                                                                                            "variables": []}]}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "termWithBothTypes",
                                                                                            "term": {
                                                                                              "union": {
                                                                                                "field": {
                                                                                                  "name": "typeApplication",
                                                                                                  "term": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {"name": "body", "term": {"variable": "termWithLeftType"}},
                                                                                                        {"name": "type", "term": {"variable": "rightType"}}],
                                                                                                      "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                                "typeName": "hydra.core.Term"}},
                                                                                            "type": [
                                                                                              {
                                                                                                "constraints": null,
                                                                                                "type": {"variable": "hydra.core.Term"},
                                                                                                "variables": []}]}],
                                                                                        "body": {
                                                                                          "let": {
                                                                                            "bindings": [
                                                                                              {
                                                                                                "name": "eitherType",
                                                                                                "term": {
                                                                                                  "union": {
                                                                                                    "field": {
                                                                                                      "name": "either",
                                                                                                      "term": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {"name": "left", "term": {"variable": "leftType"}},
                                                                                                            {"name": "right", "term": {"variable": "rightType"}}],
                                                                                                          "typeName": "hydra.core.EitherType"}}},
                                                                                                    "typeName": "hydra.core.Type"}},
                                                                                                "type": [
                                                                                                  {
                                                                                                    "constraints": null,
                                                                                                    "type": {"variable": "hydra.core.Type"},
                                                                                                    "variables": []}]}],
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "subst"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "eitherType"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "termWithBothTypes"},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"variable": "hydra.inference.yieldChecked"},
                                                                                                            "type": {"variable": "t0"}}}}}}}}}}}}}}}}},
                                                                            "domain": [{"variable": "hydra.core.Type"}],
                                                                            "parameter": "rightType"}}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "typeApplication": {
                                                                              "body": {"variable": "hydra.inference.freshVariableType"},
                                                                              "type": {"variable": "t0"}}},
                                                                          "function": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                      "type": {"variable": "t0"}}},
                                                                                  "type": {"variable": "hydra.core.Type"}}},
                                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                                                      "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                      "parameter": "r1"}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"literal": {"string": "either left value"}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "l"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "cx"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                    "type": {"variable": "t0"}}}}}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                "type": {"variable": "t0"}}},
                                                            "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                            "domain": [{"variable": "hydra.core.Term"}],
                                            "parameter": "l"}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.eithers.either"}},
                                                  "type": {"variable": "hydra.core.Term"}}},
                                              "type": {"variable": "hydra.core.Term"}}},
                                          "type": {
                                            "application": {
                                              "argument": {"variable": "hydra.typing.InferenceResult"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "t0"},
                                                  "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}},
                          "domain": [
                            {
                              "either": {
                                "left": {"variable": "hydra.core.Term"},
                                "right": {"variable": "hydra.core.Term"}}}],
                          "parameter": "e"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {
                    "either": {
                      "left": {"variable": "hydra.core.Term"},
                      "right": {"variable": "hydra.core.Term"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfElimination",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of an elimination"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {"variable": "elm"},
                              "function": {
                                "function": {
                                  "elimination": {
                                    "union": {
                                      "cases": [
                                        {
                                          "name": "record",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "p"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfProjection"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.Projection"}],
                                                "parameter": "p"}}}},
                                        {
                                          "name": "union",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "c"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfCaseStatement"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.CaseStatement"}],
                                                "parameter": "c"}}}},
                                        {
                                          "name": "wrap",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "tname"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfUnwrap"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.Name"}],
                                                "parameter": "tname"}}}}],
                                      "default": null,
                                      "typeName": "hydra.core.Elimination"}}}}}},
                          "domain": [{"variable": "hydra.core.Elimination"}],
                          "parameter": "elm"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Elimination"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfFunction",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a function"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {"variable": "f"},
                              "function": {
                                "function": {
                                  "elimination": {
                                    "union": {
                                      "cases": [
                                        {
                                          "name": "elimination",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "elm"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfElimination"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.Elimination"}],
                                                "parameter": "elm"}}}},
                                        {
                                          "name": "lambda",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "l"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfLambda"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.Lambda"}],
                                                "parameter": "l"}}}},
                                        {
                                          "name": "primitive",
                                          "term": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {"variable": "name"},
                                                    "function": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.inference.inferTypeOfPrimitive"},
                                                            "type": {"variable": "t0"}}}}}}},
                                                "domain": [{"variable": "hydra.core.Name"}],
                                                "parameter": "name"}}}}],
                                      "default": null,
                                      "typeName": "hydra.core.Function"}}}}}},
                          "domain": [{"variable": "hydra.core.Function"}],
                          "parameter": "f"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Function"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfInjection",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a union injection"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "tname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "injection"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Injection"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "field",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "injection"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "field", "typeName": "hydra.core.Injection"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Field"},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "fname",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "field"},
                                              "function": {
                                                "function": {
                                                  "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"variable": "hydra.core.Name"},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "term",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "field"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"variable": "hydra.core.Term"},
                                                  "variables": []}]}],
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "svars",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "schemaType"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"list": {"variable": "hydra.core.Name"}},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "stype",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "schemaType"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {"variable": "hydra.core.Type"},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "iterm",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "result"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"variable": "hydra.core.Term"},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "ityp",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "result"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {
                                                                                            "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {"variable": "hydra.core.Type"},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "isubst",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "result"},
                                                                                          "function": {
                                                                                            "function": {
                                                                                              "elimination": {
                                                                                                "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "function": {
                                                                                                    "lambda": {
                                                                                                      "body": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "list": [
                                                                                                              {
                                                                                                                "record": {
                                                                                                                  "fields": [
                                                                                                                    {"name": "left", "term": {"variable": "ftyp"}},
                                                                                                                    {"name": "right", "term": {"variable": "ityp"}},
                                                                                                                    {
                                                                                                                      "name": "comment",
                                                                                                                      "term": {"literal": {"string": "schema type of injected field"}}}],
                                                                                                                  "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "subst"},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "isubst"},
                                                                                                                                "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "svars"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "function": {
                                                                                                                                            "lambda": {
                                                                                                                                              "body": {
                                                                                                                                                "union": {
                                                                                                                                                  "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                                                  "typeName": "hydra.core.Type"}},
                                                                                                                                              "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                              "parameter": "x"}}},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                            "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "tname"},
                                                                                                                                    "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "union": {
                                                                                                                                        "field": {
                                                                                                                                          "name": "union",
                                                                                                                                          "term": {
                                                                                                                                            "record": {
                                                                                                                                              "fields": [
                                                                                                                                                {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                                                {
                                                                                                                                                  "name": "field",
                                                                                                                                                  "term": {
                                                                                                                                                    "record": {
                                                                                                                                                      "fields": [
                                                                                                                                                        {"name": "name", "term": {"variable": "fname"}},
                                                                                                                                                        {"name": "term", "term": {"variable": "iterm"}}],
                                                                                                                                                      "typeName": "hydra.core.Field"}}}],
                                                                                                                                              "typeName": "hydra.core.Injection"}}},
                                                                                                                                        "typeName": "hydra.core.Term"}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "svars"},
                                                                                                                                        "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                                                "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                    "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                                    "parameter": "subst"}}},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "cx"},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                      "type": {"variable": "t0"}}}}}}}}},
                                                                                                      "domain": [{"variable": "hydra.core.Type"}],
                                                                                                      "parameter": "ftyp"}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "sfields"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "fname"},
                                                                                                            "function": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"variable": "hydra.schemas.findFieldType"},
                                                                                                                "type": {"variable": "t0"}}}}}}},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                "type": {"variable": "t0"}}},
                                                                                                            "type": {"variable": "hydra.core.Type"}}},
                                                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                                            "domain": [{"list": {"variable": "hydra.core.FieldType"}}],
                                                                                            "parameter": "sfields"}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "stype"},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "tname"},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"variable": "hydra.extract.core.unionType"},
                                                                                                      "type": {"variable": "t0"}}}}}}},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                      "type": {"variable": "t0"}}},
                                                                                                  "type": {"list": {"variable": "hydra.core.FieldType"}}}},
                                                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}},
                                                              "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                              "parameter": "schemaType"}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "tname"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "cx"},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {"variable": "hydra.schemas.requireSchemaType"},
                                                                        "type": {"variable": "t0"}}}}}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                        "type": {"variable": "t0"}}},
                                                                    "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                    "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                    "parameter": "result"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"literal": {"string": "injected term"}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "term"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                  "type": {"variable": "t0"}}}}}}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                              "type": {"variable": "t0"}}},
                                                          "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Injection"}],
                          "parameter": "injection"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Injection"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfLambda",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a lambda function"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "var",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "lambda"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "parameter", "typeName": "hydra.core.Lambda"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "body",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "lambda"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "body", "typeName": "hydra.core.Lambda"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Term"},
                                          "variables": []}]}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "dom",
                                                    "term": {
                                                      "union": {
                                                        "field": {"name": "variable", "term": {"variable": "vdom"}},
                                                        "typeName": "hydra.core.Type"}},
                                                    "type": [
                                                      {
                                                        "constraints": null,
                                                        "type": {"variable": "hydra.core.Type"},
                                                        "variables": []}]}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "cx2",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "cx"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "list": [
                                                                    {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "pair": {
                                                                                "@first": {"variable": "var"},
                                                                                "@second": {
                                                                                  "record": {
                                                                                    "fields": [
                                                                                      {
                                                                                        "name": "variables",
                                                                                        "term": {
                                                                                          "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Name"}}}},
                                                                                      {"name": "type", "term": {"variable": "dom"}},
                                                                                      {
                                                                                        "name": "constraints",
                                                                                        "term": {
                                                                                          "typeApplication": {
                                                                                            "body": {"maybe": null},
                                                                                            "type": {
                                                                                              "map": {
                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}],
                                                                                    "typeName": "hydra.core.TypeScheme"}}}},
                                                                            "type": {"variable": "hydra.core.Name"}}},
                                                                        "type": {"variable": "hydra.core.TypeScheme"}}}]},
                                                                "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.typing.InferenceContext"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "iterm",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "result"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"variable": "hydra.core.Term"},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "icod",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "result"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {"variable": "hydra.core.Type"},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "isubst",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "result"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "rdom",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "dom"},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "isubst"},
                                                                                          "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {"variable": "hydra.core.Type"},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "rterm",
                                                                                      "term": {
                                                                                        "union": {
                                                                                          "field": {
                                                                                            "name": "function",
                                                                                            "term": {
                                                                                              "union": {
                                                                                                "field": {
                                                                                                  "name": "lambda",
                                                                                                  "term": {
                                                                                                    "record": {
                                                                                                      "fields": [
                                                                                                        {"name": "parameter", "term": {"variable": "var"}},
                                                                                                        {"name": "domain", "term": {"maybe": [{"variable": "rdom"}]}},
                                                                                                        {"name": "body", "term": {"variable": "iterm"}}],
                                                                                                      "typeName": "hydra.core.Lambda"}}},
                                                                                                "typeName": "hydra.core.Function"}}},
                                                                                          "typeName": "hydra.core.Term"}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"variable": "hydra.core.Term"},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "rtype",
                                                                                          "term": {
                                                                                            "union": {
                                                                                              "field": {
                                                                                                "name": "function",
                                                                                                "term": {
                                                                                                  "record": {
                                                                                                    "fields": [
                                                                                                      {"name": "domain", "term": {"variable": "rdom"}},
                                                                                                      {"name": "codomain", "term": {"variable": "icod"}}],
                                                                                                    "typeName": "hydra.core.FunctionType"}}},
                                                                                              "typeName": "hydra.core.Type"}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {"variable": "hydra.core.Type"},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "vars",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "list": [
                                                                                                      {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "rdom"},
                                                                                                          "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                      {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "icod"},
                                                                                                          "function": {"variable": "hydra.rewriting.freeVariablesInType"}}},
                                                                                                      {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "cx2"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "isubst"},
                                                                                                                  "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                          "function": {"variable": "hydra.inference.freeVariablesInContext"}}}]},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.sets.unions"}},
                                                                                                      "type": {"variable": "hydra.core.Name"}}}}},
                                                                                              "type": [
                                                                                                {
                                                                                                  "constraints": null,
                                                                                                  "type": {"set": {"variable": "hydra.core.Name"}},
                                                                                                  "variables": []}]}],
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "cx3",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "cx"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "isubst"},
                                                                                                          "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                  "type": [
                                                                                                    {
                                                                                                      "constraints": null,
                                                                                                      "type": {"variable": "hydra.typing.InferenceContext"},
                                                                                                      "variables": []}]}],
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "iconstraints",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "result"},
                                                                                                              "function": {
                                                                                                                "function": {
                                                                                                                  "elimination": {
                                                                                                                    "record": {
                                                                                                                      "field": "classConstraints",
                                                                                                                      "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "isubst"},
                                                                                                              "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                      "type": [
                                                                                                        {
                                                                                                          "constraints": null,
                                                                                                          "type": {
                                                                                                            "map": {
                                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                          "variables": []}]}],
                                                                                                  "body": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "record": {
                                                                                                          "fields": [
                                                                                                            {"name": "term", "term": {"variable": "rterm"}},
                                                                                                            {"name": "type", "term": {"variable": "rtype"}},
                                                                                                            {"name": "subst", "term": {"variable": "isubst"}},
                                                                                                            {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                                                          "typeName": "hydra.typing.InferenceResult"}},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                              "type": {"variable": "t0"}}},
                                                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}}}}}}}},
                                                              "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                              "parameter": "result"}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"literal": {"string": "lambda body"}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "body"},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "cx2"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                            "type": {"variable": "t0"}}}}}}}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                        "type": {"variable": "t0"}}},
                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                            "domain": [{"variable": "hydra.core.Name"}],
                                            "parameter": "vdom"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "typeApplication": {
                                              "body": {"variable": "hydra.schemas.freshName"},
                                              "type": {"variable": "t0"}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {"variable": "hydra.core.Name"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Lambda"}],
                          "parameter": "lambda"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Lambda"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfLetNormalized",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Infer the type of a let (letrec) term which is already in a normal form"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "bins0",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "letTerm"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"list": {"variable": "hydra.core.Binding"}},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "body0",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "letTerm"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Term"},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "bnames",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "bins0"},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                          "type": {"variable": "hydra.core.Binding"}}},
                                                      "type": {"variable": "hydra.core.Name"}}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"list": {"variable": "hydra.core.Name"}},
                                              "variables": []}]}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "tbins0",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "bvars"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "union": {
                                                                          "field": {"name": "variable", "term": {"variable": "x"}},
                                                                          "typeName": "hydra.core.Type"}},
                                                                      "domain": [{"variable": "hydra.core.Name"}],
                                                                      "parameter": "x"}}},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                        "type": {"variable": "hydra.core.Name"}}},
                                                                    "type": {"variable": "hydra.core.Type"}}}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"list": {"variable": "hydra.core.Type"}},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "cx1",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "cx0"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {"variable": "tbins0"},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "function": {
                                                                                    "lambda": {
                                                                                      "body": {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {
                                                                                              "name": "variables",
                                                                                              "term": {
                                                                                                "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Name"}}}},
                                                                                            {"name": "type", "term": {"variable": "t"}},
                                                                                            {
                                                                                              "name": "constraints",
                                                                                              "term": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"maybe": null},
                                                                                                  "type": {
                                                                                                    "map": {
                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}],
                                                                                          "typeName": "hydra.core.TypeScheme"}},
                                                                                      "domain": [{"variable": "hydra.core.Type"}],
                                                                                      "parameter": "t"}}},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                        "type": {"variable": "hydra.core.Type"}}},
                                                                                    "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "bnames"},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                    "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.typing.InferenceContext"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "function": {
                                                                "lambda": {
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "bterms1",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "inferredResult"},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                  "type": {
                                                                                    "pair": {
                                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                      "second": {
                                                                                        "pair": {
                                                                                          "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "second": {
                                                                                            "map": {
                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {"list": {"variable": "hydra.core.Term"}},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "tbins1",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "inferredResult"},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                              "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                          "type": {
                                                                                            "pair": {
                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                              "second": {
                                                                                                "pair": {
                                                                                                  "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                  "second": {
                                                                                                    "map": {
                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                  "function": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                          "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                      "type": {
                                                                                        "pair": {
                                                                                          "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "second": {
                                                                                            "map": {
                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "substAndConstraints",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "inferredResult"},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                              "type": {
                                                                                                "pair": {
                                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                  "second": {
                                                                                                    "pair": {
                                                                                                      "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                      "second": {
                                                                                                        "map": {
                                                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                              "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                          "type": {
                                                                                            "pair": {
                                                                                              "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                              "second": {
                                                                                                "map": {
                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {
                                                                                        "pair": {
                                                                                          "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "second": {
                                                                                            "map": {
                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "s1",
                                                                                      "term": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "substAndConstraints"},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                  "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                              "type": {
                                                                                                "map": {
                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "inferredConstraints",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "substAndConstraints"},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                  "type": {
                                                                                                    "map": {
                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {
                                                                                                "map": {
                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "function": {
                                                                                              "lambda": {
                                                                                                "body": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "function": {
                                                                                                        "lambda": {
                                                                                                          "body": {
                                                                                                            "let": {
                                                                                                              "bindings": [
                                                                                                                {
                                                                                                                  "name": "g2base",
                                                                                                                  "term": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "cx0"},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s2"},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "s1"},
                                                                                                                                  "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                          "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                                  "type": [
                                                                                                                    {
                                                                                                                      "constraints": null,
                                                                                                                      "type": {"variable": "hydra.typing.InferenceContext"},
                                                                                                                      "variables": []}]}],
                                                                                                              "body": {
                                                                                                                "let": {
                                                                                                                  "bindings": [
                                                                                                                    {
                                                                                                                      "name": "constraintsWithS2",
                                                                                                                      "term": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "inferredConstraints"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s2"},
                                                                                                                              "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                      "type": [
                                                                                                                        {
                                                                                                                          "constraints": null,
                                                                                                                          "type": {
                                                                                                                            "map": {
                                                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                          "variables": []}]}],
                                                                                                                  "body": {
                                                                                                                    "let": {
                                                                                                                      "bindings": [
                                                                                                                        {
                                                                                                                          "name": "composedSubst",
                                                                                                                          "term": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"variable": "s2"},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "s1"},
                                                                                                                                  "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                          "type": [
                                                                                                                            {
                                                                                                                              "constraints": null,
                                                                                                                              "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                              "variables": []}]}],
                                                                                                                      "body": {
                                                                                                                        "let": {
                                                                                                                          "bindings": [
                                                                                                                            {
                                                                                                                              "name": "originalBindingConstraints",
                                                                                                                              "term": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "bins0"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {
                                                                                                                                        "typeApplication": {
                                                                                                                                          "body": {
                                                                                                                                            "typeApplication": {
                                                                                                                                              "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                                                              "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                          "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                      "function": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {
                                                                                                                                            "function": {
                                                                                                                                              "lambda": {
                                                                                                                                                "body": {
                                                                                                                                                  "function": {
                                                                                                                                                    "lambda": {
                                                                                                                                                      "body": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "b"},
                                                                                                                                                              "function": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "lambda": {
                                                                                                                                                                    "body": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "ts"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "function": {
                                                                                                                                                                                "elimination": {
                                                                                                                                                                                  "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {
                                                                                                                                                                              "function": {
                                                                                                                                                                                "lambda": {
                                                                                                                                                                                  "body": {
                                                                                                                                                                                    "application": {
                                                                                                                                                                                      "argument": {"variable": "c"},
                                                                                                                                                                                      "function": {
                                                                                                                                                                                        "application": {
                                                                                                                                                                                          "argument": {"variable": "acc"},
                                                                                                                                                                                          "function": {
                                                                                                                                                                                            "typeApplication": {
                                                                                                                                                                                              "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                                                              "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                                                                  "domain": [
                                                                                                                                                                                    {
                                                                                                                                                                                      "map": {
                                                                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                                                                                                                                                                  "parameter": "c"}}},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "acc"},
                                                                                                                                                                                "function": {
                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                    "body": {
                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                                                                                                                                        "type": {
                                                                                                                                                                                          "map": {
                                                                                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                                                                                                                    "type": {
                                                                                                                                                                                      "map": {
                                                                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                                                                                    "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                                                                                                                                    "parameter": "ts"}}},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "acc"},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {
                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                                                                                                                          "type": {
                                                                                                                                                                            "map": {
                                                                                                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}},
                                                                                                                                                      "domain": [{"variable": "hydra.core.Binding"}],
                                                                                                                                                      "parameter": "b"}}},
                                                                                                                                                "domain": [
                                                                                                                                                  {
                                                                                                                                                    "map": {
                                                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                                                                                                                                "parameter": "acc"}}},
                                                                                                                                          "function": {
                                                                                                                                            "typeApplication": {
                                                                                                                                              "body": {
                                                                                                                                                "typeApplication": {
                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                                                                                                                                  "type": {
                                                                                                                                                    "map": {
                                                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                                                                              "type": {"variable": "hydra.core.Binding"}}}}}}}}},
                                                                                                                              "type": [
                                                                                                                                {
                                                                                                                                  "constraints": null,
                                                                                                                                  "type": {
                                                                                                                                    "map": {
                                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                  "variables": []}]}],
                                                                                                                          "body": {
                                                                                                                            "let": {
                                                                                                                              "bindings": [
                                                                                                                                {
                                                                                                                                  "name": "originalConstraintsSubst",
                                                                                                                                  "term": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "originalBindingConstraints"},
                                                                                                                                      "function": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "composedSubst"},
                                                                                                                                          "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                  "type": [
                                                                                                                                    {
                                                                                                                                      "constraints": null,
                                                                                                                                      "type": {
                                                                                                                                        "map": {
                                                                                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                      "variables": []}]}],
                                                                                                                              "body": {
                                                                                                                                "let": {
                                                                                                                                  "bindings": [
                                                                                                                                    {
                                                                                                                                      "name": "allInferredConstraints",
                                                                                                                                      "term": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "originalConstraintsSubst"},
                                                                                                                                          "function": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "constraintsWithS2"},
                                                                                                                                              "function": {
                                                                                                                                                "typeApplication": {
                                                                                                                                                  "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                  "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                      "type": [
                                                                                                                                        {
                                                                                                                                          "constraints": null,
                                                                                                                                          "type": {
                                                                                                                                            "map": {
                                                                                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                          "variables": []}]}],
                                                                                                                                  "body": {
                                                                                                                                    "let": {
                                                                                                                                      "bindings": [
                                                                                                                                        {
                                                                                                                                          "name": "mergedConstraints",
                                                                                                                                          "term": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "allInferredConstraints"},
                                                                                                                                              "function": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "g2base"},
                                                                                                                                                      "function": {
                                                                                                                                                        "function": {
                                                                                                                                                          "elimination": {
                                                                                                                                                            "record": {
                                                                                                                                                              "field": "classConstraints",
                                                                                                                                                              "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                                                  "function": {
                                                                                                                                                    "typeApplication": {
                                                                                                                                                      "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                          "type": [
                                                                                                                                            {
                                                                                                                                              "constraints": null,
                                                                                                                                              "type": {
                                                                                                                                                "map": {
                                                                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                              "variables": []}]}],
                                                                                                                                      "body": {
                                                                                                                                        "let": {
                                                                                                                                          "bindings": [
                                                                                                                                            {
                                                                                                                                              "name": "g2",
                                                                                                                                              "term": {
                                                                                                                                                "record": {
                                                                                                                                                  "fields": [
                                                                                                                                                    {
                                                                                                                                                      "name": "schemaTypes",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "g2base"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {
                                                                                                                                                                "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                    {
                                                                                                                                                      "name": "primitiveTypes",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "g2base"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {
                                                                                                                                                                "record": {
                                                                                                                                                                  "field": "primitiveTypes",
                                                                                                                                                                  "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                    {
                                                                                                                                                      "name": "dataTypes",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "g2base"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {
                                                                                                                                                                "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}}},
                                                                                                                                                    {
                                                                                                                                                      "name": "classConstraints",
                                                                                                                                                      "term": {"variable": "mergedConstraints"}},
                                                                                                                                                    {
                                                                                                                                                      "name": "debug",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "g2base"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {
                                                                                                                                                                "record": {"field": "debug", "typeName": "hydra.typing.InferenceContext"}}}}}}}],
                                                                                                                                                  "typeName": "hydra.typing.InferenceContext"}},
                                                                                                                                              "type": [
                                                                                                                                                {
                                                                                                                                                  "constraints": null,
                                                                                                                                                  "type": {"variable": "hydra.typing.InferenceContext"},
                                                                                                                                                  "variables": []}]}],
                                                                                                                                          "body": {
                                                                                                                                            "let": {
                                                                                                                                              "bindings": [
                                                                                                                                                {
                                                                                                                                                  "name": "bterms1Subst",
                                                                                                                                                  "term": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {"variable": "bterms1"},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "s2"},
                                                                                                                                                              "function": {"variable": "hydra.substitution.substTypesInTerm"}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "typeApplication": {
                                                                                                                                                              "body": {
                                                                                                                                                                "typeApplication": {
                                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                                              "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                                                                  "type": [
                                                                                                                                                    {
                                                                                                                                                      "constraints": null,
                                                                                                                                                      "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                                                                                      "variables": []}]}],
                                                                                                                                              "body": {
                                                                                                                                                "let": {
                                                                                                                                                  "bindings": [
                                                                                                                                                    {
                                                                                                                                                      "name": "tsbins1",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "tbins1"},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {
                                                                                                                                                                    "function": {
                                                                                                                                                                      "lambda": {
                                                                                                                                                                        "body": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "t"},
                                                                                                                                                                                "function": {
                                                                                                                                                                                  "application": {
                                                                                                                                                                                    "argument": {"variable": "s2"},
                                                                                                                                                                                    "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "g2"},
                                                                                                                                                                                "function": {"variable": "hydra.inference.generalize"}}}}},
                                                                                                                                                                        "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                                                                        "parameter": "t"}}},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {
                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                                          "type": {"variable": "hydra.core.Type"}}},
                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "bnames"},
                                                                                                                                                              "function": {
                                                                                                                                                                "typeApplication": {
                                                                                                                                                                  "body": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                  "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                                                                                                                                                      "type": [
                                                                                                                                                        {
                                                                                                                                                          "constraints": null,
                                                                                                                                                          "type": {
                                                                                                                                                            "list": {
                                                                                                                                                              "pair": {
                                                                                                                                                                "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                "second": {"variable": "hydra.core.TypeScheme"}}}},
                                                                                                                                                          "variables": []}]}],
                                                                                                                                                  "body": {
                                                                                                                                                    "application": {
                                                                                                                                                      "argument": {
                                                                                                                                                        "function": {
                                                                                                                                                          "lambda": {
                                                                                                                                                            "body": {
                                                                                                                                                              "let": {
                                                                                                                                                                "bindings": [
                                                                                                                                                                  {
                                                                                                                                                                    "name": "body1",
                                                                                                                                                                    "term": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "bodyResult"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "function": {
                                                                                                                                                                            "elimination": {
                                                                                                                                                                              "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                    "type": [
                                                                                                                                                                      {
                                                                                                                                                                        "constraints": null,
                                                                                                                                                                        "type": {"variable": "hydra.core.Term"},
                                                                                                                                                                        "variables": []}]}],
                                                                                                                                                                "body": {
                                                                                                                                                                  "let": {
                                                                                                                                                                    "bindings": [
                                                                                                                                                                      {
                                                                                                                                                                        "name": "tbody",
                                                                                                                                                                        "term": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "bodyResult"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "function": {
                                                                                                                                                                                "elimination": {
                                                                                                                                                                                  "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                        "type": [
                                                                                                                                                                          {
                                                                                                                                                                            "constraints": null,
                                                                                                                                                                            "type": {"variable": "hydra.core.Type"},
                                                                                                                                                                            "variables": []}]}],
                                                                                                                                                                    "body": {
                                                                                                                                                                      "let": {
                                                                                                                                                                        "bindings": [
                                                                                                                                                                          {
                                                                                                                                                                            "name": "sbody",
                                                                                                                                                                            "term": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "bodyResult"},
                                                                                                                                                                                "function": {
                                                                                                                                                                                  "function": {
                                                                                                                                                                                    "elimination": {
                                                                                                                                                                                      "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                            "type": [
                                                                                                                                                                              {
                                                                                                                                                                                "constraints": null,
                                                                                                                                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                                                                "variables": []}]}],
                                                                                                                                                                        "body": {
                                                                                                                                                                          "let": {
                                                                                                                                                                            "bindings": [
                                                                                                                                                                              {
                                                                                                                                                                                "name": "st1",
                                                                                                                                                                                "term": {
                                                                                                                                                                                  "wrap": {
                                                                                                                                                                                    "body": {
                                                                                                                                                                                      "application": {
                                                                                                                                                                                        "argument": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {"variable": "tsbins1"},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                    "lambda": {
                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                        "let": {
                                                                                                                                                                                                          "bindings": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                              "name": "name",
                                                                                                                                                                                                              "term": {
                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                  "argument": {"variable": "pair"},
                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                                                                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                              "type": [
                                                                                                                                                                                                                {
                                                                                                                                                                                                                  "constraints": null,
                                                                                                                                                                                                                  "type": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                                  "variables": []}]}],
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "let": {
                                                                                                                                                                                                              "bindings": [
                                                                                                                                                                                                                {
                                                                                                                                                                                                                  "name": "ts",
                                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {"variable": "pair"},
                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                                            "typeApplication": {
                                                                                                                                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                                                                                                              "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                                          "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                                  "type": [
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                      "constraints": null,
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"},
                                                                                                                                                                                                                      "variables": []}]}],
                                                                                                                                                                                                              "body": {
                                                                                                                                                                                                                "typeApplication": {
                                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                                        "pair": {
                                                                                                                                                                                                                          "@first": {"variable": "name"},
                                                                                                                                                                                                                          "@second": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {
                                                                                                                                                                                                                                "union": {
                                                                                                                                                                                                                                  "field": {"name": "variable", "term": {"variable": "name"}},
                                                                                                                                                                                                                                  "typeName": "hydra.core.Term"}},
                                                                                                                                                                                                                              "function": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {
                                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                                      "argument": {"variable": "ts"},
                                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                                        "function": {
                                                                                                                                                                                                                                          "elimination": {
                                                                                                                                                                                                                                            "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                                                                                  "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}}}},
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                                  "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                                                                                                                      "domain": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                          "pair": {
                                                                                                                                                                                                            "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                            "second": {"variable": "hydra.core.TypeScheme"}}}],
                                                                                                                                                                                                      "parameter": "pair"}}},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                                    "body": {
                                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                                                                        "type": {
                                                                                                                                                                                                          "pair": {
                                                                                                                                                                                                            "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                            "second": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                    "type": {
                                                                                                                                                                                                      "pair": {
                                                                                                                                                                                                        "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                        "second": {"variable": "hydra.core.Term"}}}}}}}}},
                                                                                                                                                                                        "function": {
                                                                                                                                                                                          "typeApplication": {
                                                                                                                                                                                            "body": {
                                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                                                                                                                                                                "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                            "type": {"variable": "hydra.core.Term"}}}}},
                                                                                                                                                                                    "typeName": "hydra.typing.TermSubst"}},
                                                                                                                                                                                "type": [
                                                                                                                                                                                  {
                                                                                                                                                                                    "constraints": null,
                                                                                                                                                                                    "type": {"variable": "hydra.typing.TermSubst"},
                                                                                                                                                                                    "variables": []}]}],
                                                                                                                                                                            "body": {
                                                                                                                                                                              "let": {
                                                                                                                                                                                "bindings": [
                                                                                                                                                                                  {
                                                                                                                                                                                    "name": "createBinding",
                                                                                                                                                                                    "term": {
                                                                                                                                                                                      "function": {
                                                                                                                                                                                        "lambda": {
                                                                                                                                                                                          "body": {
                                                                                                                                                                                            "let": {
                                                                                                                                                                                              "bindings": [
                                                                                                                                                                                                {
                                                                                                                                                                                                  "name": "nameTsPair",
                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                      "argument": {"variable": "bindingPair"},
                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "typeApplication": {
                                                                                                                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                                                                                                              "type": {
                                                                                                                                                                                                                "pair": {
                                                                                                                                                                                                                  "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                                  "second": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                          "type": {"variable": "hydra.core.Term"}}}}},
                                                                                                                                                                                                  "type": [
                                                                                                                                                                                                    {
                                                                                                                                                                                                      "constraints": null,
                                                                                                                                                                                                      "type": {
                                                                                                                                                                                                        "pair": {
                                                                                                                                                                                                          "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                          "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                                                                                                      "variables": []}]}],
                                                                                                                                                                                              "body": {
                                                                                                                                                                                                "let": {
                                                                                                                                                                                                  "bindings": [
                                                                                                                                                                                                    {
                                                                                                                                                                                                      "name": "term",
                                                                                                                                                                                                      "term": {
                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                          "argument": {"variable": "bindingPair"},
                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                            "typeApplication": {
                                                                                                                                                                                                              "body": {
                                                                                                                                                                                                                "typeApplication": {
                                                                                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                                                                                                  "type": {
                                                                                                                                                                                                                    "pair": {
                                                                                                                                                                                                                      "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                                      "second": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                              "type": {"variable": "hydra.core.Term"}}}}},
                                                                                                                                                                                                      "type": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                          "constraints": null,
                                                                                                                                                                                                          "type": {"variable": "hydra.core.Term"},
                                                                                                                                                                                                          "variables": []}]}],
                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                    "let": {
                                                                                                                                                                                                      "bindings": [
                                                                                                                                                                                                        {
                                                                                                                                                                                                          "name": "name",
                                                                                                                                                                                                          "term": {
                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                              "argument": {"variable": "nameTsPair"},
                                                                                                                                                                                                              "function": {
                                                                                                                                                                                                                "typeApplication": {
                                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                                  "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                          "type": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                              "constraints": null,
                                                                                                                                                                                                              "type": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                              "variables": []}]}],
                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                        "let": {
                                                                                                                                                                                                          "bindings": [
                                                                                                                                                                                                            {
                                                                                                                                                                                                              "name": "ts",
                                                                                                                                                                                                              "term": {
                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                  "argument": {"variable": "nameTsPair"},
                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                                                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                              "type": [
                                                                                                                                                                                                                {
                                                                                                                                                                                                                  "constraints": null,
                                                                                                                                                                                                                  "type": {"variable": "hydra.core.TypeScheme"},
                                                                                                                                                                                                                  "variables": []}]}],
                                                                                                                                                                                                          "body": {
                                                                                                                                                                                                            "let": {
                                                                                                                                                                                                              "bindings": [
                                                                                                                                                                                                                {
                                                                                                                                                                                                                  "name": "finalTs",
                                                                                                                                                                                                                  "term": {
                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                      "argument": {"variable": "ts"},
                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {"variable": "sbody"},
                                                                                                                                                                                                                          "function": {"variable": "hydra.substitution.substInTypeScheme"}}}}},
                                                                                                                                                                                                                  "type": [
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                      "constraints": null,
                                                                                                                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"},
                                                                                                                                                                                                                      "variables": []}]}],
                                                                                                                                                                                                              "body": {
                                                                                                                                                                                                                "let": {
                                                                                                                                                                                                                  "bindings": [
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                      "name": "typeLambdaTerm",
                                                                                                                                                                                                                      "term": {
                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                          "argument": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {"variable": "finalTs"},
                                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                                                      "elimination": {
                                                                                                                                                                                                                                        "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                                                                                                              "function": {
                                                                                                                                                                                                                                "typeApplication": {
                                                                                                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.reverse"}},
                                                                                                                                                                                                                                  "type": {"variable": "hydra.core.Name"}}}}},
                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {"variable": "term"},
                                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                                      "argument": {"variable": "st1"},
                                                                                                                                                                                                                                      "function": {"variable": "hydra.substitution.substituteInTerm"}}}}},
                                                                                                                                                                                                                              "function": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {
                                                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                                                      "lambda": {
                                                                                                                                                                                                                                        "body": {
                                                                                                                                                                                                                                          "function": {
                                                                                                                                                                                                                                            "lambda": {
                                                                                                                                                                                                                                              "body": {
                                                                                                                                                                                                                                                "union": {
                                                                                                                                                                                                                                                  "field": {
                                                                                                                                                                                                                                                    "name": "typeLambda",
                                                                                                                                                                                                                                                    "term": {
                                                                                                                                                                                                                                                      "record": {
                                                                                                                                                                                                                                                        "fields": [
                                                                                                                                                                                                                                                          {"name": "parameter", "term": {"variable": "v"}},
                                                                                                                                                                                                                                                          {"name": "body", "term": {"variable": "b"}}],
                                                                                                                                                                                                                                                        "typeName": "hydra.core.TypeLambda"}}},
                                                                                                                                                                                                                                                  "typeName": "hydra.core.Term"}},
                                                                                                                                                                                                                                              "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                                                                                                              "parameter": "v"}}},
                                                                                                                                                                                                                                        "domain": [{"variable": "hydra.core.Term"}],
                                                                                                                                                                                                                                        "parameter": "b"}}},
                                                                                                                                                                                                                                  "function": {
                                                                                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                                                                                      "body": {
                                                                                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                                                                                                                                                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}}}}}}}},
                                                                                                                                                                                                                      "type": [
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                          "constraints": null,
                                                                                                                                                                                                                          "type": {"variable": "hydra.core.Term"},
                                                                                                                                                                                                                          "variables": []}]}],
                                                                                                                                                                                                                  "body": {
                                                                                                                                                                                                                    "record": {
                                                                                                                                                                                                                      "fields": [
                                                                                                                                                                                                                        {"name": "name", "term": {"variable": "name"}},
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                          "name": "term",
                                                                                                                                                                                                                          "term": {
                                                                                                                                                                                                                            "application": {
                                                                                                                                                                                                                              "argument": {"variable": "typeLambdaTerm"},
                                                                                                                                                                                                                              "function": {
                                                                                                                                                                                                                                "application": {
                                                                                                                                                                                                                                  "argument": {
                                                                                                                                                                                                                                    "application": {
                                                                                                                                                                                                                                      "argument": {"variable": "s2"},
                                                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                                                        "application": {
                                                                                                                                                                                                                                          "argument": {"variable": "sbody"},
                                                                                                                                                                                                                                          "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                                                                                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                                                                                                                                                                                                        {"name": "type", "term": {"maybe": [{"variable": "finalTs"}]}}],
                                                                                                                                                                                                                      "typeName": "hydra.core.Binding"}}}}}}}}}}}}}},
                                                                                                                                                                                          "domain": [
                                                                                                                                                                                            {
                                                                                                                                                                                              "pair": {
                                                                                                                                                                                                "first": {
                                                                                                                                                                                                  "pair": {
                                                                                                                                                                                                    "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                    "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                                                                                                "second": {"variable": "hydra.core.Term"}}}],
                                                                                                                                                                                          "parameter": "bindingPair"}}},
                                                                                                                                                                                    "type": [
                                                                                                                                                                                      {
                                                                                                                                                                                        "constraints": null,
                                                                                                                                                                                        "type": {
                                                                                                                                                                                          "function": {
                                                                                                                                                                                            "codomain": {"variable": "hydra.core.Binding"},
                                                                                                                                                                                            "domain": {
                                                                                                                                                                                              "pair": {
                                                                                                                                                                                                "first": {
                                                                                                                                                                                                  "pair": {
                                                                                                                                                                                                    "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                    "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                                                                                                "second": {"variable": "hydra.core.Term"}}}}},
                                                                                                                                                                                        "variables": []}]}],
                                                                                                                                                                                "body": {
                                                                                                                                                                                  "let": {
                                                                                                                                                                                    "bindings": [
                                                                                                                                                                                      {
                                                                                                                                                                                        "name": "bins1",
                                                                                                                                                                                        "term": {
                                                                                                                                                                                          "application": {
                                                                                                                                                                                            "argument": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "bterms1Subst"},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "tsbins1"},
                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                                        "body": {
                                                                                                                                                                                                          "typeApplication": {
                                                                                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                                                                                                                                            "type": {
                                                                                                                                                                                                              "pair": {
                                                                                                                                                                                                                "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                                "second": {"variable": "hydra.core.TypeScheme"}}}}},
                                                                                                                                                                                                        "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                                                                                                            "function": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {"variable": "createBinding"},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                                                    "body": {
                                                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                                                                                        "type": {
                                                                                                                                                                                                          "pair": {
                                                                                                                                                                                                            "first": {
                                                                                                                                                                                                              "pair": {
                                                                                                                                                                                                                "first": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                                "second": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                                                                                                            "second": {"variable": "hydra.core.Term"}}}}},
                                                                                                                                                                                                    "type": {"variable": "hydra.core.Binding"}}}}}}},
                                                                                                                                                                                        "type": [
                                                                                                                                                                                          {
                                                                                                                                                                                            "constraints": null,
                                                                                                                                                                                            "type": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                                                                                                            "variables": []}]}],
                                                                                                                                                                                    "body": {
                                                                                                                                                                                      "let": {
                                                                                                                                                                                        "bindings": [
                                                                                                                                                                                          {
                                                                                                                                                                                            "name": "bodyConstraints",
                                                                                                                                                                                            "term": {
                                                                                                                                                                                              "application": {
                                                                                                                                                                                                "argument": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "bodyResult"},
                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                      "function": {
                                                                                                                                                                                                        "elimination": {
                                                                                                                                                                                                          "record": {
                                                                                                                                                                                                            "field": "classConstraints",
                                                                                                                                                                                                            "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                                                                                                                "function": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "sbody"},
                                                                                                                                                                                                    "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                                                                            "type": [
                                                                                                                                                                                              {
                                                                                                                                                                                                "constraints": null,
                                                                                                                                                                                                "type": {
                                                                                                                                                                                                  "map": {
                                                                                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                                                                                "variables": []}]}],
                                                                                                                                                                                        "body": {
                                                                                                                                                                                          "let": {
                                                                                                                                                                                            "bindings": [
                                                                                                                                                                                              {
                                                                                                                                                                                                "name": "bindingConstraintsSubst",
                                                                                                                                                                                                "term": {
                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                    "argument": {"variable": "constraintsWithS2"},
                                                                                                                                                                                                    "function": {
                                                                                                                                                                                                      "application": {
                                                                                                                                                                                                        "argument": {"variable": "sbody"},
                                                                                                                                                                                                        "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                                                                                "type": [
                                                                                                                                                                                                  {
                                                                                                                                                                                                    "constraints": null,
                                                                                                                                                                                                    "type": {
                                                                                                                                                                                                      "map": {
                                                                                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                                                                                    "variables": []}]}],
                                                                                                                                                                                            "body": {
                                                                                                                                                                                              "let": {
                                                                                                                                                                                                "bindings": [
                                                                                                                                                                                                  {
                                                                                                                                                                                                    "name": "allConstraints",
                                                                                                                                                                                                    "term": {
                                                                                                                                                                                                      "application": {
                                                                                                                                                                                                        "argument": {"variable": "bodyConstraints"},
                                                                                                                                                                                                        "function": {
                                                                                                                                                                                                          "application": {
                                                                                                                                                                                                            "argument": {"variable": "bindingConstraintsSubst"},
                                                                                                                                                                                                            "function": {
                                                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                                                "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                                                                                "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                                                                                    "type": [
                                                                                                                                                                                                      {
                                                                                                                                                                                                        "constraints": null,
                                                                                                                                                                                                        "type": {
                                                                                                                                                                                                          "map": {
                                                                                                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                                                                                        "variables": []}]}],
                                                                                                                                                                                                "body": {
                                                                                                                                                                                                  "let": {
                                                                                                                                                                                                    "bindings": [
                                                                                                                                                                                                      {
                                                                                                                                                                                                        "name": "ret",
                                                                                                                                                                                                        "term": {
                                                                                                                                                                                                          "record": {
                                                                                                                                                                                                            "fields": [
                                                                                                                                                                                                              {
                                                                                                                                                                                                                "name": "term",
                                                                                                                                                                                                                "term": {
                                                                                                                                                                                                                  "union": {
                                                                                                                                                                                                                    "field": {
                                                                                                                                                                                                                      "name": "let",
                                                                                                                                                                                                                      "term": {
                                                                                                                                                                                                                        "record": {
                                                                                                                                                                                                                          "fields": [
                                                                                                                                                                                                                            {"name": "bindings", "term": {"variable": "bins1"}},
                                                                                                                                                                                                                            {"name": "body", "term": {"variable": "body1"}}],
                                                                                                                                                                                                                          "typeName": "hydra.core.Let"}}},
                                                                                                                                                                                                                    "typeName": "hydra.core.Term"}}},
                                                                                                                                                                                                              {"name": "type", "term": {"variable": "tbody"}},
                                                                                                                                                                                                              {
                                                                                                                                                                                                                "name": "subst",
                                                                                                                                                                                                                "term": {
                                                                                                                                                                                                                  "application": {
                                                                                                                                                                                                                    "argument": {
                                                                                                                                                                                                                      "list": [{"variable": "s1"}, {"variable": "s2"}, {"variable": "sbody"}]},
                                                                                                                                                                                                                    "function": {"variable": "hydra.substitution.composeTypeSubstList"}}}},
                                                                                                                                                                                                              {"name": "classConstraints", "term": {"variable": "allConstraints"}}],
                                                                                                                                                                                                            "typeName": "hydra.typing.InferenceResult"}},
                                                                                                                                                                                                        "type": [
                                                                                                                                                                                                          {
                                                                                                                                                                                                            "constraints": null,
                                                                                                                                                                                                            "type": {"variable": "hydra.typing.InferenceResult"},
                                                                                                                                                                                                            "variables": []}]}],
                                                                                                                                                                                                    "body": {
                                                                                                                                                                                                      "application": {
                                                                                                                                                                                                        "argument": {"variable": "ret"},
                                                                                                                                                                                                        "function": {
                                                                                                                                                                                                          "typeApplication": {
                                                                                                                                                                                                            "body": {
                                                                                                                                                                                                              "typeApplication": {
                                                                                                                                                                                                                "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                                                                                                                                "type": {"variable": "t0"}}},
                                                                                                                                                                                                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}}}}}}}}}},
                                                                                                                                                            "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                                                                                                                            "parameter": "bodyResult"}}},
                                                                                                                                                      "function": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"literal": {"string": "let body"}},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"variable": "body0"},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {
                                                                                                                                                                        "application": {
                                                                                                                                                                          "argument": {"variable": "g2"},
                                                                                                                                                                          "function": {
                                                                                                                                                                            "application": {
                                                                                                                                                                              "argument": {"variable": "tsbins1"},
                                                                                                                                                                              "function": {"variable": "hydra.inference.extendContext"}}}}},
                                                                                                                                                                      "function": {
                                                                                                                                                                        "typeApplication": {
                                                                                                                                                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                                                                                                                          "type": {"variable": "t0"}}}}}}}}},
                                                                                                                                                          "function": {
                                                                                                                                                            "typeApplication": {
                                                                                                                                                              "body": {
                                                                                                                                                                "typeApplication": {
                                                                                                                                                                  "body": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                                                                      "type": {"variable": "t0"}}},
                                                                                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}}}}}}}}}}}},
                                                                                                          "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                          "parameter": "_"}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "s2"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "cx0"},
                                                                                                                "function": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {"variable": "hydra.checking.checkTypeSubst"},
                                                                                                                    "type": {"variable": "t0"}}}}}}},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                    "type": {"variable": "t0"}}},
                                                                                                                "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                                                                "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                "parameter": "s2"}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"literal": {"string": "temporary type bindings"}},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "tbins1"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "tbins0"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "s1"},
                                                                                                                      "function": {"variable": "hydra.substitution.substInType"}}},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                          "type": {"variable": "hydra.core.Type"}}},
                                                                                                                      "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "cx0"},
                                                                                                                  "function": {
                                                                                                                    "function": {
                                                                                                                      "elimination": {
                                                                                                                        "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"variable": "hydra.unification.unifyTypeLists"},
                                                                                                                      "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                  "type": {"variable": "t0"}}}}}}}}}}},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                          "type": {"variable": "t0"}}},
                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}}}}}},
                                                                  "domain": [
                                                                    {
                                                                      "pair": {
                                                                        "first": {"list": {"variable": "hydra.core.Term"}},
                                                                        "second": {
                                                                          "pair": {
                                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                                            "second": {
                                                                              "pair": {
                                                                                "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                "second": {
                                                                                  "map": {
                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}],
                                                                  "parameter": "inferredResult"}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {
                                                                  "application": {
                                                                    "argument": {"variable": "bins0"},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "cx1"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {"variable": "hydra.inference.inferTypesOfTemporaryBindings"},
                                                                            "type": {"variable": "t0"}}}}}}},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                            "type": {"variable": "t0"}}},
                                                                        "type": {
                                                                          "pair": {
                                                                            "first": {"list": {"variable": "hydra.core.Term"}},
                                                                            "second": {
                                                                              "pair": {
                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                "second": {
                                                                                  "pair": {
                                                                                    "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                    "second": {
                                                                                      "map": {
                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                                "domain": [{"list": {"variable": "hydra.core.Name"}}],
                                                "parameter": "bvars"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "bins0"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                          "type": {"variable": "hydra.core.Binding"}}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"variable": "hydra.schemas.freshNames"},
                                                      "type": {"variable": "t0"}}}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                          "type": {"variable": "t0"}}},
                                                      "type": {"list": {"variable": "hydra.core.Name"}}}},
                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Let"}],
                          "parameter": "letTerm"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx0"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Let"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfLet",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {"string": "Normalize a let term before inferring its type"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "bindings0",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "let0"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"list": {"variable": "hydra.core.Binding"}},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "body0",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "let0"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Term"},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "names",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "bindings0"},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                          "type": {"variable": "hydra.core.Binding"}}},
                                                      "type": {"variable": "hydra.core.Name"}}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"list": {"variable": "hydra.core.Name"}},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "nameSet",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "names"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.sets.fromList"}},
                                                      "type": {"variable": "hydra.core.Name"}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"set": {"variable": "hydra.core.Name"}},
                                                  "variables": []}]}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "toPair",
                                                  "term": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "name",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "binding"},
                                                                    "function": {
                                                                      "function": {
                                                                        "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Name"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "term",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "binding"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"variable": "hydra.core.Term"},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "pair": {
                                                                            "@first": {"variable": "name"},
                                                                            "@second": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "term"},
                                                                                        "function": {"variable": "hydra.rewriting.freeVariablesInTerm"}}},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.sets.toList"}},
                                                                                        "type": {"variable": "hydra.core.Name"}}}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "function": {
                                                                                        "lambda": {
                                                                                          "body": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "nameSet"},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "n"},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.sets.member"}},
                                                                                                      "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                          "domain": [{"variable": "hydra.core.Name"}],
                                                                                          "parameter": "n"}}},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.filter"}},
                                                                                        "type": {"variable": "hydra.core.Name"}}}}}}}}},
                                                                        "type": {"variable": "hydra.core.Name"}}},
                                                                    "type": {"list": {"variable": "hydra.core.Name"}}}}}}}},
                                                        "domain": [{"variable": "hydra.core.Binding"}],
                                                        "parameter": "binding"}}},
                                                  "type": [
                                                    {
                                                      "constraints": null,
                                                      "type": {
                                                        "function": {
                                                          "codomain": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.core.Name"},
                                                              "second": {"list": {"variable": "hydra.core.Name"}}}},
                                                          "domain": {"variable": "hydra.core.Binding"}}},
                                                      "variables": []}]}],
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "adjList",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "bindings0"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "toPair"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                      "type": {"variable": "hydra.core.Binding"}}},
                                                                  "type": {
                                                                    "pair": {
                                                                      "first": {"variable": "hydra.core.Name"},
                                                                      "second": {"list": {"variable": "hydra.core.Name"}}}}}}}}}},
                                                      "type": [
                                                        {
                                                          "constraints": null,
                                                          "type": {
                                                            "list": {
                                                              "pair": {
                                                                "first": {"variable": "hydra.core.Name"},
                                                                "second": {"list": {"variable": "hydra.core.Name"}}}}},
                                                          "variables": []}]}],
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "groups",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "adjList"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {"variable": "hydra.sorting.topologicalSortComponents"},
                                                                  "type": {"variable": "hydra.core.Name"}}}}},
                                                          "type": [
                                                            {
                                                              "constraints": null,
                                                              "type": {"list": {"list": {"variable": "hydra.core.Name"}}},
                                                              "variables": []}]}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "bindingMap",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "bindings0"},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {"variable": "names"},
                                                                          "function": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                  "type": {"variable": "hydra.core.Name"}}},
                                                                              "type": {"variable": "hydra.core.Binding"}}}}}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                      "type": {"variable": "hydra.core.Binding"}}}}},
                                                              "type": [
                                                                {
                                                                  "constraints": null,
                                                                  "type": {
                                                                    "map": {
                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                      "values": {"variable": "hydra.core.Binding"}}},
                                                                  "variables": []}]}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "createLet",
                                                                  "term": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "function": {
                                                                            "lambda": {
                                                                              "body": {
                                                                                "union": {
                                                                                  "field": {
                                                                                    "name": "let",
                                                                                    "term": {
                                                                                      "record": {
                                                                                        "fields": [
                                                                                          {
                                                                                            "name": "bindings",
                                                                                            "term": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "group"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "function": {
                                                                                                            "lambda": {
                                                                                                              "body": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "bindingMap"},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "n"},
                                                                                                                      "function": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                                                                                                              "type": {"variable": "hydra.core.Name"}}},
                                                                                                                          "type": {"variable": "hydra.core.Binding"}}}}}}},
                                                                                                              "domain": [{"variable": "hydra.core.Name"}],
                                                                                                              "parameter": "n"}}},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                "type": {"variable": "hydra.core.Name"}}},
                                                                                                            "type": {"maybe": {"variable": "hydra.core.Binding"}}}}}}}},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.maybes.cat"}},
                                                                                                    "type": {"variable": "hydra.core.Binding"}}}}}},
                                                                                          {"name": "body", "term": {"variable": "e"}}],
                                                                                        "typeName": "hydra.core.Let"}}},
                                                                                  "typeName": "hydra.core.Term"}},
                                                                              "domain": [{"list": {"variable": "hydra.core.Name"}}],
                                                                              "parameter": "group"}}},
                                                                        "domain": [{"variable": "hydra.core.Term"}],
                                                                        "parameter": "e"}}},
                                                                  "type": [
                                                                    {
                                                                      "constraints": null,
                                                                      "type": {
                                                                        "function": {
                                                                          "codomain": {
                                                                            "function": {
                                                                              "codomain": {"variable": "hydra.core.Term"},
                                                                              "domain": {"list": {"variable": "hydra.core.Name"}}}},
                                                                          "domain": {"variable": "hydra.core.Term"}}},
                                                                      "variables": []}]}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "rewrittenLet",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {"variable": "groups"},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.reverse"}},
                                                                                  "type": {"list": {"variable": "hydra.core.Name"}}}}}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "body0"},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"variable": "createLet"},
                                                                                  "function": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                      "type": {"list": {"variable": "hydra.core.Name"}}}}}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"variable": "hydra.core.Term"},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "restoreLet",
                                                                          "term": {
                                                                            "function": {
                                                                              "lambda": {
                                                                                "body": {
                                                                                  "let": {
                                                                                    "bindings": [
                                                                                      {
                                                                                        "name": "helper",
                                                                                        "term": {
                                                                                          "function": {
                                                                                            "lambda": {
                                                                                              "body": {
                                                                                                "function": {
                                                                                                  "lambda": {
                                                                                                    "body": {
                                                                                                      "function": {
                                                                                                        "lambda": {
                                                                                                          "body": {
                                                                                                            "let": {
                                                                                                              "bindings": [
                                                                                                                {
                                                                                                                  "name": "nonzero",
                                                                                                                  "term": {
                                                                                                                    "function": {
                                                                                                                      "lambda": {
                                                                                                                        "body": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "term"},
                                                                                                                            "function": {
                                                                                                                              "function": {
                                                                                                                                "elimination": {
                                                                                                                                  "union": {
                                                                                                                                    "cases": [
                                                                                                                                      {
                                                                                                                                        "name": "let",
                                                                                                                                        "term": {
                                                                                                                                          "function": {
                                                                                                                                            "lambda": {
                                                                                                                                              "body": {
                                                                                                                                                "let": {
                                                                                                                                                  "bindings": [
                                                                                                                                                    {
                                                                                                                                                      "name": "bs",
                                                                                                                                                      "term": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "l"},
                                                                                                                                                          "function": {
                                                                                                                                                            "function": {
                                                                                                                                                              "elimination": {"record": {"field": "bindings", "typeName": "hydra.core.Let"}}}}}},
                                                                                                                                                      "type": [
                                                                                                                                                        {
                                                                                                                                                          "constraints": null,
                                                                                                                                                          "type": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                                                                          "variables": []}]}],
                                                                                                                                                  "body": {
                                                                                                                                                    "let": {
                                                                                                                                                      "bindings": [
                                                                                                                                                        {
                                                                                                                                                          "name": "letBody",
                                                                                                                                                          "term": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {"variable": "l"},
                                                                                                                                                              "function": {
                                                                                                                                                                "function": {
                                                                                                                                                                  "elimination": {"record": {"field": "body", "typeName": "hydra.core.Let"}}}}}},
                                                                                                                                                          "type": [
                                                                                                                                                            {
                                                                                                                                                              "constraints": null,
                                                                                                                                                              "type": {"variable": "hydra.core.Term"},
                                                                                                                                                              "variables": []}]}],
                                                                                                                                                      "body": {
                                                                                                                                                        "application": {
                                                                                                                                                          "argument": {"variable": "letBody"},
                                                                                                                                                          "function": {
                                                                                                                                                            "application": {
                                                                                                                                                              "argument": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {"list": [{"variable": "bs"}, {"variable": "bins"}]},
                                                                                                                                                                  "function": {
                                                                                                                                                                    "typeApplication": {
                                                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.concat"}},
                                                                                                                                                                      "type": {"variable": "hydra.core.Binding"}}}}},
                                                                                                                                                              "function": {
                                                                                                                                                                "application": {
                                                                                                                                                                  "argument": {
                                                                                                                                                                    "application": {
                                                                                                                                                                      "argument": {"literal": {"integer": {"int32": 1}}},
                                                                                                                                                                      "function": {
                                                                                                                                                                        "application": {
                                                                                                                                                                          "argument": {"variable": "level"},
                                                                                                                                                                          "function": {"function": {"primitive": "hydra.lib.math.sub"}}}}}},
                                                                                                                                                                  "function": {"variable": "helper"}}}}}}}}}}},
                                                                                                                                              "domain": [{"variable": "hydra.core.Let"}],
                                                                                                                                              "parameter": "l"}}}}],
                                                                                                                                    "default": null,
                                                                                                                                    "typeName": "hydra.core.Term"}}}}}},
                                                                                                                        "domain": [{"variable": "hydra.core.Term"}],
                                                                                                                        "parameter": "term"}}},
                                                                                                                  "type": [
                                                                                                                    {
                                                                                                                      "constraints": null,
                                                                                                                      "type": {
                                                                                                                        "function": {
                                                                                                                          "codomain": {
                                                                                                                            "pair": {
                                                                                                                              "first": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                                              "second": {"variable": "hydra.core.Term"}}},
                                                                                                                          "domain": {"variable": "hydra.core.Term"}}},
                                                                                                                      "variables": []}]}],
                                                                                                              "body": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "application": {
                                                                                                                      "argument": {"variable": "term"},
                                                                                                                      "function": {"variable": "nonzero"}}},
                                                                                                                  "function": {
                                                                                                                    "application": {
                                                                                                                      "argument": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {
                                                                                                                                "pair": {"@first": {"variable": "bins"}, "@second": {"variable": "term"}}},
                                                                                                                              "type": {"list": {"variable": "hydra.core.Binding"}}}},
                                                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                                                      "function": {
                                                                                                                        "application": {
                                                                                                                          "argument": {
                                                                                                                            "application": {
                                                                                                                              "argument": {"literal": {"integer": {"int32": 0}}},
                                                                                                                              "function": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "level"},
                                                                                                                                  "function": {
                                                                                                                                    "typeApplication": {
                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.equality.equal"}},
                                                                                                                                      "type": {"literal": {"integer": {"int32": {}}}}}}}}}},
                                                                                                                          "function": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                                                                                              "type": {
                                                                                                                                "pair": {
                                                                                                                                  "first": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                                                  "second": {"variable": "hydra.core.Term"}}}}}}}}}}}}},
                                                                                                          "domain": [{"variable": "hydra.core.Term"}],
                                                                                                          "parameter": "term"}}},
                                                                                                    "domain": [{"list": {"variable": "hydra.core.Binding"}}],
                                                                                                    "parameter": "bins"}}},
                                                                                              "domain": [{"literal": {"integer": {"int32": {}}}}],
                                                                                              "parameter": "level"}}},
                                                                                        "type": [
                                                                                          {
                                                                                            "constraints": null,
                                                                                            "type": {
                                                                                              "function": {
                                                                                                "codomain": {
                                                                                                  "function": {
                                                                                                    "codomain": {
                                                                                                      "function": {
                                                                                                        "codomain": {
                                                                                                          "pair": {
                                                                                                            "first": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                            "second": {"variable": "hydra.core.Term"}}},
                                                                                                        "domain": {"variable": "hydra.core.Term"}}},
                                                                                                    "domain": {"list": {"variable": "hydra.core.Binding"}}}},
                                                                                                "domain": {"literal": {"integer": {"int32": {}}}}}},
                                                                                            "variables": []}]}],
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "result",
                                                                                            "term": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "iterm"},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Binding"}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "groups"},
                                                                                                            "function": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"function": {"primitive": "hydra.lib.lists.length"}},
                                                                                                                "type": {"list": {"variable": "hydra.core.Name"}}}}}},
                                                                                                        "function": {"variable": "helper"}}}}}}},
                                                                                            "type": [
                                                                                              {
                                                                                                "constraints": null,
                                                                                                "type": {
                                                                                                  "pair": {
                                                                                                    "first": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                    "second": {"variable": "hydra.core.Term"}}},
                                                                                                "variables": []}]}],
                                                                                        "body": {
                                                                                          "let": {
                                                                                            "bindings": [
                                                                                              {
                                                                                                "name": "bindingList",
                                                                                                "term": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "result"},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                            "type": {"list": {"variable": "hydra.core.Binding"}}}},
                                                                                                        "type": {"variable": "hydra.core.Term"}}}}},
                                                                                                "type": [
                                                                                                  {
                                                                                                    "constraints": null,
                                                                                                    "type": {"list": {"variable": "hydra.core.Binding"}},
                                                                                                    "variables": []}]}],
                                                                                            "body": {
                                                                                              "let": {
                                                                                                "bindings": [
                                                                                                  {
                                                                                                    "name": "e",
                                                                                                    "term": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "result"},
                                                                                                        "function": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                "type": {"list": {"variable": "hydra.core.Binding"}}}},
                                                                                                            "type": {"variable": "hydra.core.Term"}}}}},
                                                                                                    "type": [
                                                                                                      {
                                                                                                        "constraints": null,
                                                                                                        "type": {"variable": "hydra.core.Term"},
                                                                                                        "variables": []}]}],
                                                                                                "body": {
                                                                                                  "let": {
                                                                                                    "bindings": [
                                                                                                      {
                                                                                                        "name": "bindingMap2",
                                                                                                        "term": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "bindingList"},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "function": {
                                                                                                                        "lambda": {
                                                                                                                          "body": {
                                                                                                                            "typeApplication": {
                                                                                                                              "body": {
                                                                                                                                "typeApplication": {
                                                                                                                                  "body": {
                                                                                                                                    "pair": {
                                                                                                                                      "@first": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {"variable": "b"},
                                                                                                                                          "function": {
                                                                                                                                            "function": {
                                                                                                                                              "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                                                                                                                      "@second": {"variable": "b"}}},
                                                                                                                                  "type": {"variable": "hydra.core.Name"}}},
                                                                                                                              "type": {"variable": "hydra.core.Binding"}}},
                                                                                                                          "domain": [{"variable": "hydra.core.Binding"}],
                                                                                                                          "parameter": "b"}}},
                                                                                                                    "function": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                            "type": {"variable": "hydra.core.Binding"}}},
                                                                                                                        "type": {
                                                                                                                          "pair": {
                                                                                                                            "first": {"variable": "hydra.core.Name"},
                                                                                                                            "second": {"variable": "hydra.core.Binding"}}}}}}}}},
                                                                                                            "function": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                                                "type": {"variable": "hydra.core.Binding"}}}}},
                                                                                                        "type": [
                                                                                                          {
                                                                                                            "constraints": null,
                                                                                                            "type": {
                                                                                                              "map": {
                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                "values": {"variable": "hydra.core.Binding"}}},
                                                                                                            "variables": []}]}],
                                                                                                    "body": {
                                                                                                      "union": {
                                                                                                        "field": {
                                                                                                          "name": "let",
                                                                                                          "term": {
                                                                                                            "record": {
                                                                                                              "fields": [
                                                                                                                {
                                                                                                                  "name": "bindings",
                                                                                                                  "term": {
                                                                                                                    "application": {
                                                                                                                      "argument": {
                                                                                                                        "application": {
                                                                                                                          "argument": {"variable": "names"},
                                                                                                                          "function": {
                                                                                                                            "application": {
                                                                                                                              "argument": {
                                                                                                                                "function": {
                                                                                                                                  "lambda": {
                                                                                                                                    "body": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "bindingMap2"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "n"},
                                                                                                                                            "function": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                                                                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                "type": {"variable": "hydra.core.Binding"}}}}}}},
                                                                                                                                    "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                    "parameter": "n"}}},
                                                                                                                              "function": {
                                                                                                                                "typeApplication": {
                                                                                                                                  "body": {
                                                                                                                                    "typeApplication": {
                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                  "type": {"maybe": {"variable": "hydra.core.Binding"}}}}}}}},
                                                                                                                      "function": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"function": {"primitive": "hydra.lib.maybes.cat"}},
                                                                                                                          "type": {"variable": "hydra.core.Binding"}}}}}},
                                                                                                                {"name": "body", "term": {"variable": "e"}}],
                                                                                                              "typeName": "hydra.core.Let"}}},
                                                                                                        "typeName": "hydra.core.Term"}}}}}}}}}}}},
                                                                                "domain": [{"variable": "hydra.core.Term"}],
                                                                                "parameter": "iterm"}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {
                                                                                "function": {
                                                                                  "codomain": {"variable": "hydra.core.Term"},
                                                                                  "domain": {"variable": "hydra.core.Term"}}},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "rewriteResult",
                                                                              "term": {
                                                                                "function": {
                                                                                  "lambda": {
                                                                                    "body": {
                                                                                      "let": {
                                                                                        "bindings": [
                                                                                          {
                                                                                            "name": "iterm",
                                                                                            "term": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "result"},
                                                                                                "function": {
                                                                                                  "function": {
                                                                                                    "elimination": {
                                                                                                      "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                            "type": [
                                                                                              {
                                                                                                "constraints": null,
                                                                                                "type": {"variable": "hydra.core.Term"},
                                                                                                "variables": []}]}],
                                                                                        "body": {
                                                                                          "let": {
                                                                                            "bindings": [
                                                                                              {
                                                                                                "name": "itype",
                                                                                                "term": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "result"},
                                                                                                    "function": {
                                                                                                      "function": {
                                                                                                        "elimination": {
                                                                                                          "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                "type": [
                                                                                                  {
                                                                                                    "constraints": null,
                                                                                                    "type": {"variable": "hydra.core.Type"},
                                                                                                    "variables": []}]}],
                                                                                            "body": {
                                                                                              "let": {
                                                                                                "bindings": [
                                                                                                  {
                                                                                                    "name": "isubst",
                                                                                                    "term": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "result"},
                                                                                                        "function": {
                                                                                                          "function": {
                                                                                                            "elimination": {
                                                                                                              "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                    "type": [
                                                                                                      {
                                                                                                        "constraints": null,
                                                                                                        "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                        "variables": []}]}],
                                                                                                "body": {
                                                                                                  "let": {
                                                                                                    "bindings": [
                                                                                                      {
                                                                                                        "name": "iconstraints",
                                                                                                        "term": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "result"},
                                                                                                            "function": {
                                                                                                              "function": {
                                                                                                                "elimination": {
                                                                                                                  "record": {
                                                                                                                    "field": "classConstraints",
                                                                                                                    "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                                        "type": [
                                                                                                          {
                                                                                                            "constraints": null,
                                                                                                            "type": {
                                                                                                              "map": {
                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                            "variables": []}]}],
                                                                                                    "body": {
                                                                                                      "record": {
                                                                                                        "fields": [
                                                                                                          {
                                                                                                            "name": "term",
                                                                                                            "term": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "iterm"},
                                                                                                                "function": {"variable": "restoreLet"}}}},
                                                                                                          {"name": "type", "term": {"variable": "itype"}},
                                                                                                          {"name": "subst", "term": {"variable": "isubst"}},
                                                                                                          {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                                                                        "typeName": "hydra.typing.InferenceResult"}}}}}}}}}},
                                                                                    "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                                                    "parameter": "result"}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {
                                                                                    "function": {
                                                                                      "codomain": {"variable": "hydra.typing.InferenceResult"},
                                                                                      "domain": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "res",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "rewrittenLet"},
                                                                                      "function": {
                                                                                        "function": {
                                                                                          "elimination": {
                                                                                            "union": {
                                                                                              "cases": [
                                                                                                {
                                                                                                  "name": "let",
                                                                                                  "term": {
                                                                                                    "function": {
                                                                                                      "lambda": {
                                                                                                        "body": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "l"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "cx"},
                                                                                                                "function": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {"variable": "hydra.inference.inferTypeOfLetNormalized"},
                                                                                                                    "type": {"variable": "t0"}}}}}}},
                                                                                                        "domain": [{"variable": "hydra.core.Let"}],
                                                                                                        "parameter": "l"}}}}],
                                                                                              "default": [
                                                                                                {
                                                                                                  "application": {
                                                                                                    "argument": {"literal": {"string": "empty let term"}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "rewrittenLet"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "cx"},
                                                                                                            "function": {
                                                                                                              "typeApplication": {
                                                                                                                "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                                                                "type": {"variable": "t0"}}}}}}}}}],
                                                                                              "typeName": "hydra.core.Term"}}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "hydra.typing.InferenceResult"},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "t0"},
                                                                                              "function": {"variable": "hydra.compute.Flow"}}}}},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "application": {
                                                                                  "argument": {"variable": "res"},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "rewriteResult"},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.flows.map"}},
                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                              "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                          "type": {"variable": "t0"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Let"}],
                          "parameter": "let0"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Let"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfList",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a list"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "application": {
                        "argument": {"literal": {"string": "list element"}},
                        "function": {
                          "application": {
                            "argument": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "union": {
                                      "field": {"name": "list", "term": {"variable": "x"}},
                                      "typeName": "hydra.core.Term"}},
                                  "domain": [{"list": {"variable": "hydra.core.Term"}}],
                                  "parameter": "x"}}},
                            "function": {
                              "application": {
                                "argument": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "union": {
                                          "field": {"name": "list", "term": {"variable": "x"}},
                                          "typeName": "hydra.core.Type"}},
                                      "domain": [{"variable": "hydra.core.Type"}],
                                      "parameter": "x"}}},
                                "function": {
                                  "application": {
                                    "argument": {"variable": "cx"},
                                    "function": {
                                      "typeApplication": {
                                        "body": {"variable": "hydra.inference.inferTypeOfCollection"},
                                        "type": {"variable": "t0"}}}}}}}}}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"list": {"variable": "hydra.core.Term"}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfLiteral",
      "term": {
        "typeLambda": {
          "body": {
            "typeLambda": {
              "body": {
                "annotated": {
                  "annotation": [
                    {
                      "@key": "description",
                      "@value": {"literal": {"string": "Infer the type of a literal"}}}],
                  "body": {
                    "function": {
                      "lambda": {
                        "body": {
                          "function": {
                            "lambda": {
                              "body": {
                                "application": {
                                  "argument": {
                                    "record": {
                                      "fields": [
                                        {
                                          "name": "term",
                                          "term": {
                                            "union": {
                                              "field": {"name": "literal", "term": {"variable": "lit"}},
                                              "typeName": "hydra.core.Term"}}},
                                        {
                                          "name": "type",
                                          "term": {
                                            "union": {
                                              "field": {
                                                "name": "literal",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "lit"},
                                                    "function": {"variable": "hydra.reflect.literalType"}}}},
                                              "typeName": "hydra.core.Type"}}},
                                        {
                                          "name": "subst",
                                          "term": {"variable": "hydra.substitution.idTypeSubst"}},
                                        {
                                          "name": "classConstraints",
                                          "term": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                  "type": {"variable": "hydra.core.Name"}}},
                                              "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}],
                                      "typeName": "hydra.typing.InferenceResult"}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                          "type": {"variable": "t1"}}},
                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                              "domain": [{"variable": "hydra.core.Literal"}],
                              "parameter": "lit"}}},
                        "domain": [{"variable": "t0"}],
                        "parameter": "_"}}}}},
              "parameter": "t1"}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t1"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Literal"}}},
              "domain": {"variable": "t0"}}},
          "variables": ["t0", "t1"]}]},
    {
      "name": "hydra.inference.inferTypeOfMap",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a map"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {
                                                        "function": {
                                                          "lambda": {
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "kterms",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "kresults"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                            "type": {
                                                                              "pair": {
                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"list": {"variable": "hydra.core.Term"}},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "ktypes",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "kresults"},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                        "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                    "type": {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                    "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                        "type": [
                                                                          {
                                                                            "constraints": null,
                                                                            "type": {"list": {"variable": "hydra.core.Type"}},
                                                                            "variables": []}]}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "ksubst",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "kresults"},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {
                                                                                          "typeApplication": {
                                                                                            "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                            "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                        "type": {
                                                                                          "pair": {
                                                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                            "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                        "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                    "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                            "type": [
                                                                              {
                                                                                "constraints": null,
                                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                "variables": []}]}],
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "function": {
                                                                                "lambda": {
                                                                                  "body": {
                                                                                    "let": {
                                                                                      "bindings": [
                                                                                        {
                                                                                          "name": "vterms",
                                                                                          "term": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "vresults"},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                  "type": {
                                                                                                    "pair": {
                                                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                          "type": [
                                                                                            {
                                                                                              "constraints": null,
                                                                                              "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                              "variables": []}]}],
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "vtypes",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "vresults"},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                              "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                          "type": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                              "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                          "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                              "type": [
                                                                                                {
                                                                                                  "constraints": null,
                                                                                                  "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                                  "variables": []}]}],
                                                                                          "body": {
                                                                                            "let": {
                                                                                              "bindings": [
                                                                                                {
                                                                                                  "name": "vsubst",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "vresults"},
                                                                                                          "function": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                              "type": {
                                                                                                                "pair": {
                                                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                              "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                          "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                                  "type": [
                                                                                                    {
                                                                                                      "constraints": null,
                                                                                                      "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                      "variables": []}]}],
                                                                                              "body": {
                                                                                                "let": {
                                                                                                  "bindings": [
                                                                                                    {
                                                                                                      "name": "kcons",
                                                                                                      "term": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "ktypes"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "record": {
                                                                                                                        "fields": [
                                                                                                                          {
                                                                                                                            "name": "left",
                                                                                                                            "term": {
                                                                                                                              "union": {
                                                                                                                                "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                                                                "typeName": "hydra.core.Type"}}},
                                                                                                                          {"name": "right", "term": {"variable": "t"}},
                                                                                                                          {"name": "comment", "term": {"literal": {"string": "map key"}}}],
                                                                                                                        "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                    "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                    "parameter": "t"}}},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                      "type": {"variable": "hydra.core.Type"}}},
                                                                                                                  "type": {"variable": "hydra.typing.TypeConstraint"}}}}}}},
                                                                                                      "type": [
                                                                                                        {
                                                                                                          "constraints": null,
                                                                                                          "type": {"list": {"variable": "hydra.typing.TypeConstraint"}},
                                                                                                          "variables": []}]}],
                                                                                                  "body": {
                                                                                                    "let": {
                                                                                                      "bindings": [
                                                                                                        {
                                                                                                          "name": "vcons",
                                                                                                          "term": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "vtypes"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {
                                                                                                                    "function": {
                                                                                                                      "lambda": {
                                                                                                                        "body": {
                                                                                                                          "record": {
                                                                                                                            "fields": [
                                                                                                                              {
                                                                                                                                "name": "left",
                                                                                                                                "term": {
                                                                                                                                  "union": {
                                                                                                                                    "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                                                                    "typeName": "hydra.core.Type"}}},
                                                                                                                              {"name": "right", "term": {"variable": "t"}},
                                                                                                                              {"name": "comment", "term": {"literal": {"string": "map value"}}}],
                                                                                                                            "typeName": "hydra.typing.TypeConstraint"}},
                                                                                                                        "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                        "parameter": "t"}}},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                          "type": {"variable": "hydra.core.Type"}}},
                                                                                                                      "type": {"variable": "hydra.typing.TypeConstraint"}}}}}}},
                                                                                                          "type": [
                                                                                                            {
                                                                                                              "constraints": null,
                                                                                                              "type": {"list": {"variable": "hydra.typing.TypeConstraint"}},
                                                                                                              "variables": []}]}],
                                                                                                      "body": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"list": [{"variable": "kcons"}, {"variable": "vcons"}]},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"function": {"primitive": "hydra.lib.lists.concat"}},
                                                                                                                  "type": {"variable": "hydra.typing.TypeConstraint"}}}}},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "list": [
                                                                                                                                {"variable": "ksubst"},
                                                                                                                                {"variable": "vsubst"},
                                                                                                                                {"variable": "subst"}]},
                                                                                                                            "function": {"variable": "hydra.substitution.composeTypeSubstList"}}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "union": {
                                                                                                                                "field": {
                                                                                                                                  "name": "map",
                                                                                                                                  "term": {
                                                                                                                                    "record": {
                                                                                                                                      "fields": [
                                                                                                                                        {
                                                                                                                                          "name": "keys",
                                                                                                                                          "term": {
                                                                                                                                            "union": {
                                                                                                                                              "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                                                                              "typeName": "hydra.core.Type"}}},
                                                                                                                                        {
                                                                                                                                          "name": "values",
                                                                                                                                          "term": {
                                                                                                                                            "union": {
                                                                                                                                              "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                                                                              "typeName": "hydra.core.Type"}}}],
                                                                                                                                      "typeName": "hydra.core.MapType"}}},
                                                                                                                                "typeName": "hydra.core.Type"}},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {
                                                                                                                                  "union": {
                                                                                                                                    "field": {
                                                                                                                                      "name": "map",
                                                                                                                                      "term": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {
                                                                                                                                            "application": {
                                                                                                                                              "argument": {"variable": "vterms"},
                                                                                                                                              "function": {
                                                                                                                                                "application": {
                                                                                                                                                  "argument": {"variable": "kterms"},
                                                                                                                                                  "function": {
                                                                                                                                                    "typeApplication": {
                                                                                                                                                      "body": {
                                                                                                                                                        "typeApplication": {
                                                                                                                                                          "body": {"function": {"primitive": "hydra.lib.lists.zip"}},
                                                                                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                                      "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                                                          "function": {
                                                                                                                                            "typeApplication": {
                                                                                                                                              "body": {
                                                                                                                                                "typeApplication": {
                                                                                                                                                  "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                              "type": {"variable": "hydra.core.Term"}}}}}},
                                                                                                                                    "typeName": "hydra.core.Term"}},
                                                                                                                                "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                                    "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                                    "parameter": "subst"}}},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "cx"},
                                                                                                                  "function": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {
                                                                                                                        "typeApplication": {
                                                                                                                          "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                                      "type": {"variable": "t0"}}}}}}}}}}}}}}}}}}},
                                                                                  "domain": [
                                                                                    {
                                                                                      "pair": {
                                                                                        "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                        "second": {
                                                                                          "pair": {
                                                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                            "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                                                  "parameter": "vresults"}}},
                                                                            "function": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "m"},
                                                                                            "function": {
                                                                                              "typeApplication": {
                                                                                                "body": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.elems"}},
                                                                                                    "type": {"variable": "hydra.core.Term"}}},
                                                                                                "type": {"variable": "hydra.core.Term"}}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "pair": {
                                                                                                              "@first": {"variable": "v"},
                                                                                                              "@second": {"literal": {"string": "map value"}}}},
                                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                                      "type": {"literal": {"string": {}}}}},
                                                                                                  "domain": [{"variable": "hydra.core.Term"}],
                                                                                                  "parameter": "v"}}},
                                                                                            "function": {
                                                                                              "typeApplication": {
                                                                                                "body": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                    "type": {"variable": "hydra.core.Term"}}},
                                                                                                "type": {
                                                                                                  "pair": {
                                                                                                    "first": {"variable": "hydra.core.Term"},
                                                                                                    "second": {"literal": {"string": {}}}}}}}}}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "cx"},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {"variable": "hydra.inference.inferMany"},
                                                                                            "type": {"variable": "t0"}}}}}}},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {
                                                                                          "typeApplication": {
                                                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                            "type": {"variable": "t0"}}},
                                                                                        "type": {
                                                                                          "pair": {
                                                                                            "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                            "second": {
                                                                                              "pair": {
                                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                                                            "domain": [
                                                              {
                                                                "pair": {
                                                                  "first": {"list": {"variable": "hydra.core.Term"}},
                                                                  "second": {
                                                                    "pair": {
                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                            "parameter": "kresults"}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "m"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"function": {"primitive": "hydra.lib.maps.keys"}},
                                                                              "type": {"variable": "hydra.core.Term"}}},
                                                                          "type": {"variable": "hydra.core.Term"}}}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "function": {
                                                                          "lambda": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "pair": {
                                                                                        "@first": {"variable": "k"},
                                                                                        "@second": {"literal": {"string": "map key"}}}},
                                                                                    "type": {"variable": "hydra.core.Term"}}},
                                                                                "type": {"literal": {"string": {}}}}},
                                                                            "domain": [{"variable": "hydra.core.Term"}],
                                                                            "parameter": "k"}}},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                              "type": {"variable": "hydra.core.Term"}}},
                                                                          "type": {
                                                                            "pair": {
                                                                              "first": {"variable": "hydra.core.Term"},
                                                                              "second": {"literal": {"string": {}}}}}}}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "cx"},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"variable": "hydra.inference.inferMany"},
                                                                      "type": {"variable": "t0"}}}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                      "type": {"variable": "t0"}}},
                                                                  "type": {
                                                                    "pair": {
                                                                      "first": {"list": {"variable": "hydra.core.Term"}},
                                                                      "second": {
                                                                        "pair": {
                                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                                          "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "union": {
                                                                      "field": {
                                                                        "name": "map",
                                                                        "term": {
                                                                          "record": {
                                                                            "fields": [
                                                                              {
                                                                                "name": "keys",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {"name": "variable", "term": {"variable": "kvar"}},
                                                                                    "typeName": "hydra.core.Type"}}},
                                                                              {
                                                                                "name": "values",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {"name": "variable", "term": {"variable": "vvar"}},
                                                                                    "typeName": "hydra.core.Type"}}}],
                                                                            "typeName": "hydra.core.MapType"}}},
                                                                      "typeName": "hydra.core.Type"}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "union": {
                                                                              "field": {
                                                                                "name": "map",
                                                                                "term": {
                                                                                  "typeApplication": {
                                                                                    "body": {
                                                                                      "typeApplication": {
                                                                                        "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                        "type": {"variable": "hydra.core.Term"}}},
                                                                                    "type": {"variable": "hydra.core.Term"}}}},
                                                                              "typeName": "hydra.core.Term"}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"list": [{"variable": "kvar"}, {"variable": "vvar"}]},
                                                                              "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                      "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "m"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.maps.null"}},
                                                                      "type": {"variable": "hydra.core.Term"}}},
                                                                  "type": {"variable": "hydra.core.Term"}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                              "type": {
                                                                "application": {
                                                                  "argument": {"variable": "hydra.typing.InferenceResult"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "t0"},
                                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}},
                                              "domain": [{"variable": "hydra.core.Name"}],
                                              "parameter": "vvar"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "typeApplication": {
                                                "body": {"variable": "hydra.schemas.freshName"},
                                                "type": {"variable": "t0"}}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                        "type": {"variable": "t0"}}},
                                                    "type": {"variable": "hydra.core.Name"}}},
                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                    "domain": [{"variable": "hydra.core.Name"}],
                                    "parameter": "kvar"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "typeApplication": {
                                      "body": {"variable": "hydra.schemas.freshName"},
                                      "type": {"variable": "t0"}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                              "type": {"variable": "t0"}}},
                                          "type": {"variable": "hydra.core.Name"}}},
                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                          "domain": [
                            {
                              "map": {
                                "keys": {"variable": "hydra.core.Term"},
                                "values": {"variable": "hydra.core.Term"}}}],
                          "parameter": "m"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {
                    "map": {
                      "keys": {"variable": "hydra.core.Term"},
                      "values": {"variable": "hydra.core.Term"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfOptional",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of an optional"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "trmCons",
                                  "term": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "union": {
                                                "field": {
                                                  "name": "maybe",
                                                  "term": {
                                                    "maybe": [
                                                      {
                                                        "application": {
                                                          "argument": {"variable": "terms"},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                              "type": {"variable": "hydra.core.Term"}}}}}]}},
                                                "typeName": "hydra.core.Term"}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "union": {
                                                    "field": {
                                                      "name": "maybe",
                                                      "term": {
                                                        "typeApplication": {"body": {"maybe": null}, "type": {"variable": "hydra.core.Term"}}}},
                                                    "typeName": "hydra.core.Term"}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"variable": "terms"},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.lists.null"}},
                                                            "type": {"variable": "hydra.core.Term"}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                                        "type": {"variable": "hydra.core.Term"}}}}}}}}},
                                        "domain": [{"list": {"variable": "hydra.core.Term"}}],
                                        "parameter": "terms"}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {
                                        "function": {
                                          "codomain": {"variable": "hydra.core.Term"},
                                          "domain": {"list": {"variable": "hydra.core.Term"}}}},
                                      "variables": []}]}],
                              "body": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "m"},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.lists.singleton"}},
                                              "type": {"variable": "hydra.core.Term"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Term"}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                  "type": {"variable": "hydra.core.Term"}}}}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"literal": {"string": "optional element"}},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "trmCons"},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "union": {
                                                        "field": {"name": "maybe", "term": {"variable": "x"}},
                                                        "typeName": "hydra.core.Type"}},
                                                    "domain": [{"variable": "hydra.core.Type"}],
                                                    "parameter": "x"}}},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"variable": "hydra.inference.inferTypeOfCollection"},
                                                      "type": {"variable": "t0"}}}}}}}}}}}}}}},
                          "domain": [{"maybe": {"variable": "hydra.core.Term"}}],
                          "parameter": "m"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"maybe": {"variable": "hydra.core.Term"}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfPair",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a pair"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "list": [
                                      {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {
                                                "pair": {
                                                  "@first": {
                                                    "application": {
                                                      "argument": {"variable": "p"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                              "type": {"variable": "hydra.core.Term"}}},
                                                          "type": {"variable": "hydra.core.Term"}}}}},
                                                  "@second": {"literal": {"string": "pair first element"}}}},
                                              "type": {"variable": "hydra.core.Term"}}},
                                          "type": {"literal": {"string": {}}}}},
                                      {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {
                                                "pair": {
                                                  "@first": {
                                                    "application": {
                                                      "argument": {"variable": "p"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                              "type": {"variable": "hydra.core.Term"}}},
                                                          "type": {"variable": "hydra.core.Term"}}}}},
                                                  "@second": {"literal": {"string": "pair second element"}}}},
                                              "type": {"variable": "hydra.core.Term"}}},
                                          "type": {"literal": {"string": {}}}}}]},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {"variable": "hydra.inference.inferMany"},
                                          "type": {"variable": "t0"}}}}}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "iterms",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "results"},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                            "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                        "type": {
                                                          "pair": {
                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                            "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                "type": [
                                                  {
                                                    "constraints": null,
                                                    "type": {"list": {"variable": "hydra.core.Term"}},
                                                    "variables": []}]}],
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "itypes",
                                                    "term": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {"variable": "results"},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                    "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                "type": {
                                                                  "pair": {
                                                                    "first": {"list": {"variable": "hydra.core.Type"}},
                                                                    "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                            "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                    "type": [
                                                      {
                                                        "constraints": null,
                                                        "type": {"list": {"variable": "hydra.core.Type"}},
                                                        "variables": []}]}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "isubst",
                                                        "term": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "results"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                        "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                    "type": {
                                                                      "pair": {
                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                    "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.typing.TypeSubst"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "ifst",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "iterms"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                                    "type": {"variable": "hydra.core.Term"}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.core.Term"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "isnd",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {"variable": "iterms"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {"function": {"primitive": "hydra.lib.lists.tail"}},
                                                                            "type": {"variable": "hydra.core.Term"}}}}},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                                        "type": {"variable": "hydra.core.Term"}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Term"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "tyFst",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "itypes"},
                                                                        "function": {
                                                                          "typeApplication": {
                                                                            "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                                            "type": {"variable": "hydra.core.Type"}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"variable": "hydra.core.Type"},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "tySnd",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "itypes"},
                                                                                "function": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.lists.tail"}},
                                                                                    "type": {"variable": "hydra.core.Type"}}}}},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                                                "type": {"variable": "hydra.core.Type"}}}}},
                                                                        "type": [
                                                                          {
                                                                            "constraints": null,
                                                                            "type": {"variable": "hydra.core.Type"},
                                                                            "variables": []}]}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "pairTerm",
                                                                            "term": {
                                                                              "union": {
                                                                                "field": {
                                                                                  "name": "pair",
                                                                                  "term": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "pair": {"@first": {"variable": "ifst"}, "@second": {"variable": "isnd"}}},
                                                                                          "type": {"variable": "hydra.core.Term"}}},
                                                                                      "type": {"variable": "hydra.core.Term"}}}},
                                                                                "typeName": "hydra.core.Term"}},
                                                                            "type": [
                                                                              {
                                                                                "constraints": null,
                                                                                "type": {"variable": "hydra.core.Term"},
                                                                                "variables": []}]}],
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "termWithTypes",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "typeApplication",
                                                                                      "term": {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {
                                                                                              "name": "body",
                                                                                              "term": {
                                                                                                "union": {
                                                                                                  "field": {
                                                                                                    "name": "typeApplication",
                                                                                                    "term": {
                                                                                                      "record": {
                                                                                                        "fields": [
                                                                                                          {"name": "body", "term": {"variable": "pairTerm"}},
                                                                                                          {"name": "type", "term": {"variable": "tyFst"}}],
                                                                                                        "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                                  "typeName": "hydra.core.Term"}}},
                                                                                            {"name": "type", "term": {"variable": "tySnd"}}],
                                                                                          "typeName": "hydra.core.TypeApplicationTerm"}}},
                                                                                    "typeName": "hydra.core.Term"}},
                                                                                "type": [
                                                                                  {
                                                                                    "constraints": null,
                                                                                    "type": {"variable": "hydra.core.Term"},
                                                                                    "variables": []}]}],
                                                                            "body": {
                                                                              "application": {
                                                                                "argument": {"variable": "isubst"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "pair",
                                                                                          "term": {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {"name": "first", "term": {"variable": "tyFst"}},
                                                                                                {"name": "second", "term": {"variable": "tySnd"}}],
                                                                                              "typeName": "hydra.core.PairType"}}},
                                                                                        "typeName": "hydra.core.Type"}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "termWithTypes"},
                                                                                        "function": {"variable": "hydra.inference.yield"}}}}}}}}}}}}}}}}}}}}}}}}},
                                        "domain": [
                                          {
                                            "pair": {
                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                              "second": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                        "parameter": "results"}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.flows.map"}},
                                              "type": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Term"}},
                                                  "second": {
                                                    "pair": {
                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                          "type": {"variable": "hydra.typing.InferenceResult"}}},
                                      "type": {"variable": "t0"}}}}}}},
                          "domain": [
                            {
                              "pair": {
                                "first": {"variable": "hydra.core.Term"},
                                "second": {"variable": "hydra.core.Term"}}}],
                          "parameter": "p"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {
                    "pair": {
                      "first": {"variable": "hydra.core.Term"},
                      "second": {"variable": "hydra.core.Term"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfPrimitive",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Infer the type of a primitive function. Class constraints from the primitive's type scheme are propagated to the inference result."}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {
                                              "field": "primitiveTypes",
                                              "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "name"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                              "type": {"variable": "hydra.core.Name"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "constraints",
                                                          "term": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "ts"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}},
                                                                      "type": {
                                                                        "map": {
                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                          "type": [
                                                            {
                                                              "constraints": null,
                                                              "type": {
                                                                "map": {
                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                              "variables": []}]}],
                                                      "body": {
                                                        "application": {
                                                          "argument": {"variable": "constraints"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "application": {
                                                                      "argument": {"variable": "ts"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "union": {
                                                                              "field": {
                                                                                "name": "function",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {"name": "primitive", "term": {"variable": "name"}},
                                                                                    "typeName": "hydra.core.Function"}}},
                                                                              "typeName": "hydra.core.Term"}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {
                                                                                "application": {
                                                                                  "argument": {"variable": "ts"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                              "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.yieldCheckedWithConstraints"},
                                                                          "type": {"variable": "t0"}}}}}}}}}}}}},
                                                  "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                  "parameter": "ts"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "scheme"},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {"variable": "hydra.schemas.instantiateTypeScheme"},
                                                        "type": {"variable": "t0"}}}}},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                            "type": {"variable": "t0"}}},
                                                        "type": {"variable": "hydra.core.TypeScheme"}}},
                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                        "domain": [{"variable": "hydra.core.TypeScheme"}],
                                        "parameter": "scheme"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "name"},
                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {"literal": {"string": "No such primitive: "}},
                                                  "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                  "type": {"variable": "t0"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                              "type": {
                                                "application": {
                                                  "argument": {"variable": "hydra.typing.InferenceResult"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "t0"},
                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Name"}],
                          "parameter": "name"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Name"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfProjection",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a record projection"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "tname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "proj"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Projection"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "fname",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "proj"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "field", "typeName": "hydra.core.Projection"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Name"},
                                          "variables": []}]}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "let": {
                                                "bindings": [
                                                  {
                                                    "name": "svars",
                                                    "term": {
                                                      "application": {
                                                        "argument": {"variable": "schemaType"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                    "type": [
                                                      {
                                                        "constraints": null,
                                                        "type": {"list": {"variable": "hydra.core.Name"}},
                                                        "variables": []}]}],
                                                "body": {
                                                  "let": {
                                                    "bindings": [
                                                      {
                                                        "name": "stype",
                                                        "term": {
                                                          "application": {
                                                            "argument": {"variable": "schemaType"},
                                                            "function": {
                                                              "function": {
                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                        "type": [
                                                          {
                                                            "constraints": null,
                                                            "type": {"variable": "hydra.core.Type"},
                                                            "variables": []}]}],
                                                    "body": {
                                                      "application": {
                                                        "argument": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "application": {
                                                                                "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "union": {
                                                                                        "field": {
                                                                                          "name": "function",
                                                                                          "term": {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {
                                                                                                  "name": "domain",
                                                                                                  "term": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "svars"},
                                                                                                          "function": {
                                                                                                            "application": {
                                                                                                              "argument": {
                                                                                                                "function": {
                                                                                                                  "lambda": {
                                                                                                                    "body": {
                                                                                                                      "union": {
                                                                                                                        "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                        "typeName": "hydra.core.Type"}},
                                                                                                                    "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                    "parameter": "x"}}},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                  "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {"variable": "tname"},
                                                                                                          "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                                                {"name": "codomain", "term": {"variable": "ftyp"}}],
                                                                                              "typeName": "hydra.core.FunctionType"}}},
                                                                                        "typeName": "hydra.core.Type"}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "union": {
                                                                                                "field": {
                                                                                                  "name": "function",
                                                                                                  "term": {
                                                                                                    "union": {
                                                                                                      "field": {
                                                                                                        "name": "elimination",
                                                                                                        "term": {
                                                                                                          "union": {
                                                                                                            "field": {
                                                                                                              "name": "record",
                                                                                                              "term": {
                                                                                                                "record": {
                                                                                                                  "fields": [
                                                                                                                    {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                    {"name": "field", "term": {"variable": "fname"}}],
                                                                                                                  "typeName": "hydra.core.Projection"}}},
                                                                                                            "typeName": "hydra.core.Elimination"}}},
                                                                                                      "typeName": "hydra.core.Function"}}},
                                                                                                "typeName": "hydra.core.Term"}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "svars"},
                                                                                                "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                        "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                    "type": {"variable": "t0"}}},
                                                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                                        "domain": [{"variable": "hydra.core.Type"}],
                                                                        "parameter": "ftyp"}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {"variable": "sfields"},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "fname"},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {"variable": "hydra.schemas.findFieldType"},
                                                                                  "type": {"variable": "t0"}}}}}}},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                  "type": {"variable": "t0"}}},
                                                                              "type": {"variable": "hydra.core.Type"}}},
                                                                          "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                              "domain": [{"list": {"variable": "hydra.core.FieldType"}}],
                                                              "parameter": "sfields"}}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "stype"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "tname"},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {"variable": "hydra.extract.core.recordType"},
                                                                        "type": {"variable": "t0"}}}}}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "typeApplication": {
                                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                        "type": {"variable": "t0"}}},
                                                                    "type": {"list": {"variable": "hydra.core.FieldType"}}}},
                                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                            "domain": [{"variable": "hydra.core.TypeScheme"}],
                                            "parameter": "schemaType"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "tname"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"variable": "hydra.schemas.requireSchemaType"},
                                                      "type": {"variable": "t0"}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {"variable": "hydra.core.TypeScheme"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Projection"}],
                          "parameter": "proj"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Projection"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfRecord",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a record"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "tname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "record"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "typeName", "typeName": "hydra.core.Record"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "fields",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "record"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "fields", "typeName": "hydra.core.Record"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"list": {"variable": "hydra.core.Field"}},
                                          "variables": []}]}],
                                  "body": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "fnames",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "fields"},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                          "type": {"variable": "hydra.core.Field"}}},
                                                      "type": {"variable": "hydra.core.Name"}}}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"list": {"variable": "hydra.core.Name"}},
                                              "variables": []}]}],
                                      "body": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "application": {
                                                    "argument": {
                                                      "function": {
                                                        "lambda": {
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "svars",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "schemaType"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {
                                                                            "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                  "type": [
                                                                    {
                                                                      "constraints": null,
                                                                      "type": {"list": {"variable": "hydra.core.Name"}},
                                                                      "variables": []}]}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "stype",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "schemaType"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"variable": "hydra.core.Type"},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "iterms",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "results"},
                                                                              "function": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                      "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                  "type": {
                                                                                    "pair": {
                                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                      "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {"list": {"variable": "hydra.core.Term"}},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "itypes",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "application": {
                                                                                      "argument": {"variable": "results"},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                              "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                          "type": {
                                                                                            "pair": {
                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                              "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                  "function": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                          "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                      "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "isubst",
                                                                                  "term": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "results"},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                              "type": {
                                                                                                "pair": {
                                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                  "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                                                      "function": {
                                                                                        "typeApplication": {
                                                                                          "body": {
                                                                                            "typeApplication": {
                                                                                              "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                              "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                          "type": {"variable": "hydra.typing.TypeSubst"}}}}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "let": {
                                                                                  "bindings": [
                                                                                    {
                                                                                      "name": "ityp",
                                                                                      "term": {
                                                                                        "union": {
                                                                                          "field": {
                                                                                            "name": "record",
                                                                                            "term": {
                                                                                              "record": {
                                                                                                "fields": [
                                                                                                  {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                  {
                                                                                                    "name": "fields",
                                                                                                    "term": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "itypes"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "fnames"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "function": {
                                                                                                                    "lambda": {
                                                                                                                      "body": {
                                                                                                                        "function": {
                                                                                                                          "lambda": {
                                                                                                                            "body": {
                                                                                                                              "record": {
                                                                                                                                "fields": [
                                                                                                                                  {"name": "name", "term": {"variable": "n"}},
                                                                                                                                  {"name": "type", "term": {"variable": "t"}}],
                                                                                                                                "typeName": "hydra.core.FieldType"}},
                                                                                                                            "domain": [{"variable": "hydra.core.Type"}],
                                                                                                                            "parameter": "t"}}},
                                                                                                                      "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                      "parameter": "n"}}},
                                                                                                                "function": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.zipWith"}},
                                                                                                                            "type": {"variable": "hydra.core.Name"}}},
                                                                                                                        "type": {"variable": "hydra.core.Type"}}},
                                                                                                                    "type": {"variable": "hydra.core.FieldType"}}}}}}}}}}],
                                                                                                "typeName": "hydra.core.RowType"}}},
                                                                                          "typeName": "hydra.core.Type"}},
                                                                                      "type": [
                                                                                        {
                                                                                          "constraints": null,
                                                                                          "type": {"variable": "hydra.core.Type"},
                                                                                          "variables": []}]}],
                                                                                  "body": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "list": [
                                                                                          {
                                                                                            "record": {
                                                                                              "fields": [
                                                                                                {"name": "left", "term": {"variable": "stype"}},
                                                                                                {"name": "right", "term": {"variable": "ityp"}},
                                                                                                {
                                                                                                  "name": "comment",
                                                                                                  "term": {"literal": {"string": "schema type of record"}}}],
                                                                                              "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "function": {
                                                                                              "lambda": {
                                                                                                "body": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "subst"},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "isubst"},
                                                                                                            "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "svars"},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "function": {
                                                                                                                        "lambda": {
                                                                                                                          "body": {
                                                                                                                            "union": {
                                                                                                                              "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                              "typeName": "hydra.core.Type"}},
                                                                                                                          "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                          "parameter": "x"}}},
                                                                                                                    "function": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                            "type": {"variable": "hydra.core.Name"}}},
                                                                                                                        "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "tname"},
                                                                                                                "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "union": {
                                                                                                                    "field": {
                                                                                                                      "name": "record",
                                                                                                                      "term": {
                                                                                                                        "record": {
                                                                                                                          "fields": [
                                                                                                                            {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                            {
                                                                                                                              "name": "fields",
                                                                                                                              "term": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "iterms"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "fnames"},
                                                                                                                                      "function": {
                                                                                                                                        "application": {
                                                                                                                                          "argument": {
                                                                                                                                            "function": {
                                                                                                                                              "lambda": {
                                                                                                                                                "body": {
                                                                                                                                                  "function": {
                                                                                                                                                    "lambda": {
                                                                                                                                                      "body": {
                                                                                                                                                        "record": {
                                                                                                                                                          "fields": [
                                                                                                                                                            {"name": "name", "term": {"variable": "n"}},
                                                                                                                                                            {"name": "term", "term": {"variable": "t"}}],
                                                                                                                                                          "typeName": "hydra.core.Field"}},
                                                                                                                                                      "domain": [{"variable": "hydra.core.Term"}],
                                                                                                                                                      "parameter": "t"}}},
                                                                                                                                                "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                                                "parameter": "n"}}},
                                                                                                                                          "function": {
                                                                                                                                            "typeApplication": {
                                                                                                                                              "body": {
                                                                                                                                                "typeApplication": {
                                                                                                                                                  "body": {
                                                                                                                                                    "typeApplication": {
                                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.lists.zipWith"}},
                                                                                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                                                                                              "type": {"variable": "hydra.core.Field"}}}}}}}}}}],
                                                                                                                          "typeName": "hydra.core.Record"}}},
                                                                                                                    "typeName": "hydra.core.Term"}},
                                                                                                                "function": {
                                                                                                                  "application": {
                                                                                                                    "argument": {"variable": "svars"},
                                                                                                                    "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                            "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                                "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                "parameter": "subst"}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"variable": "cx"},
                                                                                              "function": {
                                                                                                "typeApplication": {
                                                                                                  "body": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                      "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                                  "type": {"variable": "t0"}}}}}}}}}}}}}}}}}}}}},
                                                          "domain": [
                                                            {
                                                              "pair": {
                                                                "first": {"list": {"variable": "hydra.core.Term"}},
                                                                "second": {
                                                                  "pair": {
                                                                    "first": {"list": {"variable": "hydra.core.Type"}},
                                                                    "second": {"variable": "hydra.typing.TypeSubst"}}}}}],
                                                          "parameter": "results"}}},
                                                    "function": {
                                                      "application": {
                                                        "argument": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {
                                                                "argument": {"variable": "fields"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "function": {
                                                                        "lambda": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "pair": {
                                                                                      "@first": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "f"},
                                                                                          "function": {
                                                                                            "function": {
                                                                                              "elimination": {"record": {"field": "term", "typeName": "hydra.core.Field"}}}}}},
                                                                                      "@second": {
                                                                                        "application": {
                                                                                          "argument": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "f"},
                                                                                                  "function": {
                                                                                                    "function": {
                                                                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Field"}}}}}},
                                                                                              "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                                          "function": {
                                                                                            "application": {
                                                                                              "argument": {"literal": {"string": "field "}},
                                                                                              "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}}}},
                                                                                  "type": {"variable": "hydra.core.Term"}}},
                                                                              "type": {"literal": {"string": {}}}}},
                                                                          "domain": [{"variable": "hydra.core.Field"}],
                                                                          "parameter": "f"}}},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                            "type": {"variable": "hydra.core.Field"}}},
                                                                        "type": {
                                                                          "pair": {
                                                                            "first": {"variable": "hydra.core.Term"},
                                                                            "second": {"literal": {"string": {}}}}}}}}}}},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "cx"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {"variable": "hydra.inference.inferMany"},
                                                                    "type": {"variable": "t0"}}}}}}},
                                                        "function": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                    "type": {"variable": "t0"}}},
                                                                "type": {
                                                                  "pair": {
                                                                    "first": {"list": {"variable": "hydra.core.Term"}},
                                                                    "second": {
                                                                      "pair": {
                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                        "second": {"variable": "hydra.typing.TypeSubst"}}}}}}},
                                                            "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                "parameter": "schemaType"}}},
                                          "function": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "tname"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "cx"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"variable": "hydra.schemas.requireSchemaType"},
                                                          "type": {"variable": "t0"}}}}}}},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                          "type": {"variable": "t0"}}},
                                                      "type": {"variable": "hydra.core.TypeScheme"}}},
                                                  "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Record"}],
                          "parameter": "record"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Record"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfSet",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a set"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "s"},
                                  "function": {
                                    "typeApplication": {
                                      "body": {"function": {"primitive": "hydra.lib.sets.toList"}},
                                      "type": {"variable": "hydra.core.Term"}}}}},
                              "function": {
                                "application": {
                                  "argument": {"literal": {"string": "set element"}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "union": {
                                                "field": {
                                                  "name": "set",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "terms"},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.sets.fromList"}},
                                                          "type": {"variable": "hydra.core.Term"}}}}}},
                                                "typeName": "hydra.core.Term"}},
                                            "domain": [{"list": {"variable": "hydra.core.Term"}}],
                                            "parameter": "terms"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "function": {
                                              "lambda": {
                                                "body": {
                                                  "union": {
                                                    "field": {"name": "set", "term": {"variable": "x"}},
                                                    "typeName": "hydra.core.Type"}},
                                                "domain": [{"variable": "hydra.core.Type"}],
                                                "parameter": "x"}}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "cx"},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"variable": "hydra.inference.inferTypeOfCollection"},
                                                  "type": {"variable": "t0"}}}}}}}}}}}}},
                          "domain": [{"set": {"variable": "hydra.core.Term"}}],
                          "parameter": "s"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"set": {"variable": "hydra.core.Term"}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfTerm",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a given term"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "let": {
                                    "bindings": [
                                      {
                                        "name": "matchTerm",
                                        "term": {
                                          "application": {
                                            "argument": {"variable": "term"},
                                            "function": {
                                              "function": {
                                                "elimination": {
                                                  "union": {
                                                    "cases": [
                                                      {
                                                        "name": "annotated",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "a"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfAnnotatedTerm"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.AnnotatedTerm"}],
                                                              "parameter": "a"}}}},
                                                      {
                                                        "name": "application",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "a"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfApplication"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Application"}],
                                                              "parameter": "a"}}}},
                                                      {
                                                        "name": "either",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "e"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfEither"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [
                                                                {
                                                                  "either": {
                                                                    "left": {"variable": "hydra.core.Term"},
                                                                    "right": {"variable": "hydra.core.Term"}}}],
                                                              "parameter": "e"}}}},
                                                      {
                                                        "name": "function",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "f"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfFunction"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Function"}],
                                                              "parameter": "f"}}}},
                                                      {
                                                        "name": "let",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "l"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfLet"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Let"}],
                                                              "parameter": "l"}}}},
                                                      {
                                                        "name": "list",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "els"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfList"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"list": {"variable": "hydra.core.Term"}}],
                                                              "parameter": "els"}}}},
                                                      {
                                                        "name": "literal",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "l"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"variable": "hydra.inference.inferTypeOfLiteral"},
                                                                              "type": {"variable": "hydra.typing.InferenceContext"}}},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Literal"}],
                                                              "parameter": "l"}}}},
                                                      {
                                                        "name": "map",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "m"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfMap"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [
                                                                {
                                                                  "map": {
                                                                    "keys": {"variable": "hydra.core.Term"},
                                                                    "values": {"variable": "hydra.core.Term"}}}],
                                                              "parameter": "m"}}}},
                                                      {
                                                        "name": "maybe",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "m"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfOptional"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"maybe": {"variable": "hydra.core.Term"}}],
                                                              "parameter": "m"}}}},
                                                      {
                                                        "name": "pair",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "p"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfPair"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [
                                                                {
                                                                  "pair": {
                                                                    "first": {"variable": "hydra.core.Term"},
                                                                    "second": {"variable": "hydra.core.Term"}}}],
                                                              "parameter": "p"}}}},
                                                      {
                                                        "name": "record",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "r"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfRecord"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Record"}],
                                                              "parameter": "r"}}}},
                                                      {
                                                        "name": "set",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "s"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfSet"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"set": {"variable": "hydra.core.Term"}}],
                                                              "parameter": "s"}}}},
                                                      {
                                                        "name": "typeApplication",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "tt"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfTypeApplication"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.TypeApplicationTerm"}],
                                                              "parameter": "tt"}}}},
                                                      {
                                                        "name": "typeLambda",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "ta"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfTypeLambda"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.TypeLambda"}],
                                                              "parameter": "ta"}}}},
                                                      {
                                                        "name": "union",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "i"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfInjection"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Injection"}],
                                                              "parameter": "i"}}}},
                                                      {
                                                        "name": "unit",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "hydra.inference.inferTypeOfUnit"},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                          "type": {"variable": "t0"}}},
                                                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                              "domain": [{"unit": {}}],
                                                              "parameter": "_"}}}},
                                                      {
                                                        "name": "variable",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "name"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfVariable"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.Name"}],
                                                              "parameter": "name"}}}},
                                                      {
                                                        "name": "wrap",
                                                        "term": {
                                                          "function": {
                                                            "lambda": {
                                                              "body": {
                                                                "application": {
                                                                  "argument": {"variable": "w"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfWrappedTerm"},
                                                                          "type": {"variable": "t0"}}}}}}},
                                                              "domain": [{"variable": "hydra.core.WrappedTerm"}],
                                                              "parameter": "w"}}}}],
                                                    "default": null,
                                                    "typeName": "hydra.core.Term"}}}}}},
                                        "type": [
                                          {
                                            "constraints": null,
                                            "type": {
                                              "application": {
                                                "argument": {"variable": "hydra.typing.InferenceResult"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "t0"},
                                                    "function": {"variable": "hydra.compute.Flow"}}}}},
                                            "variables": []}]}],
                                    "body": {
                                      "application": {
                                        "argument": {"variable": "matchTerm"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "desc"},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {"variable": "hydra.monads.withTrace"},
                                                    "type": {"variable": "t0"}}},
                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}},
                                "domain": [{"literal": {"string": {}}}],
                                "parameter": "desc"}}},
                          "domain": [{"variable": "hydra.core.Term"}],
                          "parameter": "term"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "application": {
                          "argument": {"variable": "hydra.typing.InferenceResult"},
                          "function": {
                            "application": {
                              "argument": {"variable": "t0"},
                              "function": {"variable": "hydra.compute.Flow"}}}}},
                      "domain": {"literal": {"string": {}}}}},
                  "domain": {"variable": "hydra.core.Term"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfTypeLambda",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Infer the type of a type abstraction; just pass through to the lambda body."}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {"literal": {"string": "type abstraction"}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "ta"},
                                      "function": {
                                        "function": {
                                          "elimination": {"record": {"field": "body", "typeName": "hydra.core.TypeLambda"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                          "type": {"variable": "t0"}}}}}}}}},
                          "domain": [{"variable": "hydra.core.TypeLambda"}],
                          "parameter": "ta"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.TypeLambda"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfTypeApplication",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Infer the type of a type application; just pass through to the inner term."}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {"literal": {"string": "type application term"}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "tt"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "body", "typeName": "hydra.core.TypeApplicationTerm"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                          "type": {"variable": "t0"}}}}}}}}},
                          "domain": [{"variable": "hydra.core.TypeApplicationTerm"}],
                          "parameter": "tt"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.TypeApplicationTerm"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfUnit",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "The trivial inference rule for the unit term"}}}],
          "body": {
            "record": {
              "fields": [
                {
                  "name": "term",
                  "term": {
                    "union": {
                      "field": {"name": "unit", "term": {"unit": {}}},
                      "typeName": "hydra.core.Term"}}},
                {
                  "name": "type",
                  "term": {
                    "union": {
                      "field": {"name": "unit", "term": {"unit": {}}},
                      "typeName": "hydra.core.Type"}}},
                {
                  "name": "subst",
                  "term": {"variable": "hydra.substitution.idTypeSubst"}},
                {
                  "name": "classConstraints",
                  "term": {
                    "typeApplication": {
                      "body": {
                        "typeApplication": {
                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                          "type": {"variable": "hydra.core.Name"}}},
                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}],
              "typeName": "hydra.typing.InferenceResult"}}}},
      "type": [
        {
          "constraints": null,
          "type": {"variable": "hydra.typing.InferenceResult"},
          "variables": []}]},
    {
      "name": "hydra.inference.inferTypeOfUnwrap",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of an unwrap operation"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "let": {
                                        "bindings": [
                                          {
                                            "name": "svars",
                                            "term": {
                                              "application": {
                                                "argument": {"variable": "schemaType"},
                                                "function": {
                                                  "function": {
                                                    "elimination": {
                                                      "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                            "type": [
                                              {
                                                "constraints": null,
                                                "type": {"list": {"variable": "hydra.core.Name"}},
                                                "variables": []}]}],
                                        "body": {
                                          "let": {
                                            "bindings": [
                                              {
                                                "name": "stype",
                                                "term": {
                                                  "application": {
                                                    "argument": {"variable": "schemaType"},
                                                    "function": {
                                                      "function": {
                                                        "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                "type": [
                                                  {
                                                    "constraints": null,
                                                    "type": {"variable": "hydra.core.Type"},
                                                    "variables": []}]}],
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "function": {
                                                    "lambda": {
                                                      "body": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {"variable": "hydra.substitution.idTypeSubst"},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "union": {
                                                                      "field": {
                                                                        "name": "function",
                                                                        "term": {
                                                                          "record": {
                                                                            "fields": [
                                                                              {
                                                                                "name": "domain",
                                                                                "term": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "svars"},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "union": {
                                                                                                      "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                      "typeName": "hydra.core.Type"}},
                                                                                                  "domain": [{"variable": "hydra.core.Name"}],
                                                                                                  "parameter": "x"}}},
                                                                                            "function": {
                                                                                              "typeApplication": {
                                                                                                "body": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                                "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "tname"},
                                                                                        "function": {"variable": "hydra.schemas.nominalApplication"}}}}}},
                                                                              {"name": "codomain", "term": {"variable": "wtyp"}}],
                                                                            "typeName": "hydra.core.FunctionType"}}},
                                                                      "typeName": "hydra.core.Type"}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "union": {
                                                                              "field": {
                                                                                "name": "function",
                                                                                "term": {
                                                                                  "union": {
                                                                                    "field": {
                                                                                      "name": "elimination",
                                                                                      "term": {
                                                                                        "union": {
                                                                                          "field": {"name": "wrap", "term": {"variable": "tname"}},
                                                                                          "typeName": "hydra.core.Elimination"}}},
                                                                                    "typeName": "hydra.core.Function"}}},
                                                                              "typeName": "hydra.core.Term"}},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "svars"},
                                                                              "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                      "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                      "domain": [{"variable": "hydra.core.Type"}],
                                                      "parameter": "wtyp"}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"variable": "stype"},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "tname"},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {"variable": "hydra.extract.core.wrappedType"},
                                                                "type": {"variable": "t0"}}}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                "type": {"variable": "t0"}}},
                                                            "type": {"variable": "hydra.core.Type"}}},
                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                    "domain": [{"variable": "hydra.core.TypeScheme"}],
                                    "parameter": "schemaType"}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "tname"},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {
                                            "typeApplication": {
                                              "body": {"variable": "hydra.schemas.requireSchemaType"},
                                              "type": {"variable": "t0"}}}}}}},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                              "type": {"variable": "t0"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}},
                                      "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                          "domain": [{"variable": "hydra.core.Name"}],
                          "parameter": "tname"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Name"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfVariable",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a variable"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "dataTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "name"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                              "type": {"variable": "hydra.core.Name"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                              "function": {
                                "application": {
                                  "argument": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "constraints",
                                                          "term": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "ts"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}},
                                                                      "type": {
                                                                        "map": {
                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                          "type": [
                                                            {
                                                              "constraints": null,
                                                              "type": {
                                                                "map": {
                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                              "variables": []}]}],
                                                      "body": {
                                                        "application": {
                                                          "argument": {
                                                            "record": {
                                                              "fields": [
                                                                {
                                                                  "name": "term",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "union": {
                                                                          "field": {"name": "variable", "term": {"variable": "name"}},
                                                                          "typeName": "hydra.core.Term"}},
                                                                      "function": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "application": {
                                                                              "argument": {"variable": "ts"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                          "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}}},
                                                                {
                                                                  "name": "type",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "ts"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}}},
                                                                {
                                                                  "name": "subst",
                                                                  "term": {"variable": "hydra.substitution.idTypeSubst"}},
                                                                {"name": "classConstraints", "term": {"variable": "constraints"}}],
                                                              "typeName": "hydra.typing.InferenceResult"}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                  "type": {"variable": "t0"}}},
                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                                  "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                  "parameter": "ts"}}},
                                            "function": {
                                              "application": {
                                                "argument": {
                                                  "application": {
                                                    "argument": {"variable": "scheme"},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {"variable": "hydra.schemas.instantiateTypeScheme"},
                                                        "type": {"variable": "t0"}}}}},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                            "type": {"variable": "t0"}}},
                                                        "type": {"variable": "hydra.core.TypeScheme"}}},
                                                    "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                        "domain": [{"variable": "hydra.core.TypeScheme"}],
                                        "parameter": "scheme"}}},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "name"},
                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {"literal": {"string": "Variable not bound to type: "}},
                                                  "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                  "type": {"variable": "t0"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                              "type": {
                                                "application": {
                                                  "argument": {"variable": "hydra.typing.InferenceResult"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "t0"},
                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}},
                          "domain": [{"variable": "hydra.core.Name"}],
                          "parameter": "name"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.Name"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypeOfWrappedTerm",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Infer the type of a wrapped term"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "tname",
                                  "term": {
                                    "application": {
                                      "argument": {"variable": "wt"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "typeName", "typeName": "hydra.core.WrappedTerm"}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {"variable": "hydra.core.Name"},
                                      "variables": []}]}],
                              "body": {
                                "let": {
                                  "bindings": [
                                    {
                                      "name": "term",
                                      "term": {
                                        "application": {
                                          "argument": {"variable": "wt"},
                                          "function": {
                                            "function": {
                                              "elimination": {"record": {"field": "body", "typeName": "hydra.core.WrappedTerm"}}}}}},
                                      "type": [
                                        {
                                          "constraints": null,
                                          "type": {"variable": "hydra.core.Term"},
                                          "variables": []}]}],
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "function": {
                                                    "lambda": {
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "svars",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "schemaType"},
                                                                  "function": {
                                                                    "function": {
                                                                      "elimination": {
                                                                        "record": {"field": "variables", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                              "type": [
                                                                {
                                                                  "constraints": null,
                                                                  "type": {"list": {"variable": "hydra.core.Name"}},
                                                                  "variables": []}]}],
                                                          "body": {
                                                            "let": {
                                                              "bindings": [
                                                                {
                                                                  "name": "stype",
                                                                  "term": {
                                                                    "application": {
                                                                      "argument": {"variable": "schemaType"},
                                                                      "function": {
                                                                        "function": {
                                                                          "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                  "type": [
                                                                    {
                                                                      "constraints": null,
                                                                      "type": {"variable": "hydra.core.Type"},
                                                                      "variables": []}]}],
                                                              "body": {
                                                                "let": {
                                                                  "bindings": [
                                                                    {
                                                                      "name": "iterm",
                                                                      "term": {
                                                                        "application": {
                                                                          "argument": {"variable": "result"},
                                                                          "function": {
                                                                            "function": {
                                                                              "elimination": {
                                                                                "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                      "type": [
                                                                        {
                                                                          "constraints": null,
                                                                          "type": {"variable": "hydra.core.Term"},
                                                                          "variables": []}]}],
                                                                  "body": {
                                                                    "let": {
                                                                      "bindings": [
                                                                        {
                                                                          "name": "itype",
                                                                          "term": {
                                                                            "application": {
                                                                              "argument": {"variable": "result"},
                                                                              "function": {
                                                                                "function": {
                                                                                  "elimination": {
                                                                                    "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                          "type": [
                                                                            {
                                                                              "constraints": null,
                                                                              "type": {"variable": "hydra.core.Type"},
                                                                              "variables": []}]}],
                                                                      "body": {
                                                                        "let": {
                                                                          "bindings": [
                                                                            {
                                                                              "name": "isubst",
                                                                              "term": {
                                                                                "application": {
                                                                                  "argument": {"variable": "result"},
                                                                                  "function": {
                                                                                    "function": {
                                                                                      "elimination": {
                                                                                        "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                              "type": [
                                                                                {
                                                                                  "constraints": null,
                                                                                  "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                  "variables": []}]}],
                                                                          "body": {
                                                                            "let": {
                                                                              "bindings": [
                                                                                {
                                                                                  "name": "ityp",
                                                                                  "term": {
                                                                                    "union": {
                                                                                      "field": {
                                                                                        "name": "wrap",
                                                                                        "term": {
                                                                                          "record": {
                                                                                            "fields": [
                                                                                              {"name": "typeName", "term": {"variable": "tname"}},
                                                                                              {"name": "body", "term": {"variable": "itype"}}],
                                                                                            "typeName": "hydra.core.WrappedType"}}},
                                                                                      "typeName": "hydra.core.Type"}},
                                                                                  "type": [
                                                                                    {
                                                                                      "constraints": null,
                                                                                      "type": {"variable": "hydra.core.Type"},
                                                                                      "variables": []}]}],
                                                                              "body": {
                                                                                "application": {
                                                                                  "argument": {
                                                                                    "list": [
                                                                                      {
                                                                                        "record": {
                                                                                          "fields": [
                                                                                            {"name": "left", "term": {"variable": "stype"}},
                                                                                            {"name": "right", "term": {"variable": "ityp"}},
                                                                                            {
                                                                                              "name": "comment",
                                                                                              "term": {"literal": {"string": "schema type of wrapper"}}}],
                                                                                          "typeName": "hydra.typing.TypeConstraint"}}]},
                                                                                  "function": {
                                                                                    "application": {
                                                                                      "argument": {
                                                                                        "function": {
                                                                                          "lambda": {
                                                                                            "body": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "subst"},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {"variable": "isubst"},
                                                                                                        "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                "function": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "svars"},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {
                                                                                                                  "function": {
                                                                                                                    "lambda": {
                                                                                                                      "body": {
                                                                                                                        "union": {
                                                                                                                          "field": {"name": "variable", "term": {"variable": "x"}},
                                                                                                                          "typeName": "hydra.core.Type"}},
                                                                                                                      "domain": [{"variable": "hydra.core.Name"}],
                                                                                                                      "parameter": "x"}}},
                                                                                                                "function": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.map"}},
                                                                                                                        "type": {"variable": "hydra.core.Name"}}},
                                                                                                                    "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                        "function": {
                                                                                                          "application": {
                                                                                                            "argument": {"variable": "tname"},
                                                                                                            "function": {"variable": "hydra.schemas.nominalApplication"}}}}},
                                                                                                    "function": {
                                                                                                      "application": {
                                                                                                        "argument": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "union": {
                                                                                                                "field": {
                                                                                                                  "name": "wrap",
                                                                                                                  "term": {
                                                                                                                    "record": {
                                                                                                                      "fields": [
                                                                                                                        {"name": "typeName", "term": {"variable": "tname"}},
                                                                                                                        {"name": "body", "term": {"variable": "iterm"}}],
                                                                                                                      "typeName": "hydra.core.WrappedTerm"}}},
                                                                                                                "typeName": "hydra.core.Term"}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "svars"},
                                                                                                                "function": {"variable": "hydra.inference.buildTypeApplicationTerm"}}}}},
                                                                                                        "function": {"variable": "hydra.inference.yield"}}}}}}},
                                                                                            "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                            "parameter": "subst"}}},
                                                                                      "function": {
                                                                                        "application": {
                                                                                          "argument": {"variable": "cx"},
                                                                                          "function": {
                                                                                            "typeApplication": {
                                                                                              "body": {
                                                                                                "typeApplication": {
                                                                                                  "body": {"variable": "hydra.inference.mapConstraints"},
                                                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                                                              "type": {"variable": "t0"}}}}}}}}}}}}}}}}}}}}},
                                                      "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                      "parameter": "result"}}},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"literal": {"string": "wrapped term"}},
                                                        "function": {
                                                          "application": {
                                                            "argument": {"variable": "term"},
                                                            "function": {
                                                              "application": {
                                                                "argument": {"variable": "cx"},
                                                                "function": {
                                                                  "typeApplication": {
                                                                    "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                    "type": {"variable": "t0"}}}}}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                "type": {"variable": "t0"}}},
                                                            "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}},
                                            "domain": [{"variable": "hydra.core.TypeScheme"}],
                                            "parameter": "schemaType"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "tname"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "cx"},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {"variable": "hydra.schemas.requireSchemaType"},
                                                      "type": {"variable": "t0"}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {"variable": "hydra.core.TypeScheme"}}},
                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                          "domain": [{"variable": "hydra.core.WrappedTerm"}],
                          "parameter": "wt"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {"variable": "hydra.typing.InferenceResult"},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"variable": "hydra.core.WrappedTerm"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.inferTypesOfTemporaryBindings",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Infer types for temporary let bindings. Returns a 4-tuple of (terms, types, substitution, accumulated constraints)"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "let": {
                              "bindings": [
                                {
                                  "name": "dflt",
                                  "term": {
                                    "let": {
                                      "bindings": [
                                        {
                                          "name": "binding",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "bins"},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.lists.head"}},
                                                  "type": {"variable": "hydra.core.Binding"}}}}},
                                          "type": [
                                            {
                                              "constraints": null,
                                              "type": {"variable": "hydra.core.Binding"},
                                              "variables": []}]}],
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "k",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "binding"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"variable": "hydra.core.Name"},
                                                  "variables": []}]}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "v",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "binding"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "term", "typeName": "hydra.core.Binding"}}}}}},
                                                  "type": [
                                                    {
                                                      "constraints": null,
                                                      "type": {"variable": "hydra.core.Term"},
                                                      "variables": []}]}],
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "tl",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "bins"},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.lists.tail"}},
                                                              "type": {"variable": "hydra.core.Binding"}}}}},
                                                      "type": [
                                                        {
                                                          "constraints": null,
                                                          "type": {"list": {"variable": "hydra.core.Binding"}},
                                                          "variables": []}]}],
                                                  "body": {
                                                    "application": {
                                                      "argument": {
                                                        "function": {
                                                          "lambda": {
                                                            "body": {
                                                              "let": {
                                                                "bindings": [
                                                                  {
                                                                    "name": "j",
                                                                    "term": {
                                                                      "application": {
                                                                        "argument": {"variable": "result1"},
                                                                        "function": {
                                                                          "function": {
                                                                            "elimination": {
                                                                              "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                    "type": [
                                                                      {
                                                                        "constraints": null,
                                                                        "type": {"variable": "hydra.core.Term"},
                                                                        "variables": []}]}],
                                                                "body": {
                                                                  "let": {
                                                                    "bindings": [
                                                                      {
                                                                        "name": "u_prime",
                                                                        "term": {
                                                                          "application": {
                                                                            "argument": {"variable": "result1"},
                                                                            "function": {
                                                                              "function": {
                                                                                "elimination": {
                                                                                  "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                        "type": [
                                                                          {
                                                                            "constraints": null,
                                                                            "type": {"variable": "hydra.core.Type"},
                                                                            "variables": []}]}],
                                                                    "body": {
                                                                      "let": {
                                                                        "bindings": [
                                                                          {
                                                                            "name": "u",
                                                                            "term": {
                                                                              "application": {
                                                                                "argument": {"variable": "result1"},
                                                                                "function": {
                                                                                  "function": {
                                                                                    "elimination": {
                                                                                      "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                            "type": [
                                                                              {
                                                                                "constraints": null,
                                                                                "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                "variables": []}]}],
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "c1Inferred",
                                                                                "term": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "result1"},
                                                                                    "function": {
                                                                                      "function": {
                                                                                        "elimination": {
                                                                                          "record": {
                                                                                            "field": "classConstraints",
                                                                                            "typeName": "hydra.typing.InferenceResult"}}}}}},
                                                                                "type": [
                                                                                  {
                                                                                    "constraints": null,
                                                                                    "type": {
                                                                                      "map": {
                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                    "variables": []}]}],
                                                                            "body": {
                                                                              "application": {
                                                                                "argument": {
                                                                                  "function": {
                                                                                    "lambda": {
                                                                                      "body": {
                                                                                        "let": {
                                                                                          "bindings": [
                                                                                            {
                                                                                              "name": "c1",
                                                                                              "term": {
                                                                                                "application": {
                                                                                                  "argument": {"variable": "originalBindingConstraints"},
                                                                                                  "function": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "c1Inferred"},
                                                                                                      "function": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                          "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                              "type": [
                                                                                                {
                                                                                                  "constraints": null,
                                                                                                  "type": {
                                                                                                    "map": {
                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                  "variables": []}]}],
                                                                                          "body": {
                                                                                            "application": {
                                                                                              "argument": {
                                                                                                "function": {
                                                                                                  "lambda": {
                                                                                                    "body": {
                                                                                                      "let": {
                                                                                                        "bindings": [
                                                                                                          {
                                                                                                            "name": "h",
                                                                                                            "term": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "result2"},
                                                                                                                "function": {
                                                                                                                  "typeApplication": {
                                                                                                                    "body": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                        "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                    "type": {
                                                                                                                      "pair": {
                                                                                                                        "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                        "second": {
                                                                                                                          "pair": {
                                                                                                                            "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                            "second": {
                                                                                                                              "map": {
                                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                            "type": [
                                                                                                              {
                                                                                                                "constraints": null,
                                                                                                                "type": {"list": {"variable": "hydra.core.Term"}},
                                                                                                                "variables": []}]}],
                                                                                                        "body": {
                                                                                                          "let": {
                                                                                                            "bindings": [
                                                                                                              {
                                                                                                                "name": "r_prime",
                                                                                                                "term": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "application": {
                                                                                                                        "argument": {"variable": "result2"},
                                                                                                                        "function": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                            "type": {
                                                                                                                              "pair": {
                                                                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                                "second": {
                                                                                                                                  "pair": {
                                                                                                                                    "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                    "second": {
                                                                                                                                      "map": {
                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                                    "function": {
                                                                                                                      "typeApplication": {
                                                                                                                        "body": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                            "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                                        "type": {
                                                                                                                          "pair": {
                                                                                                                            "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                            "second": {
                                                                                                                              "map": {
                                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                                "type": [
                                                                                                                  {
                                                                                                                    "constraints": null,
                                                                                                                    "type": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                    "variables": []}]}],
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "restPair",
                                                                                                                    "term": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "result2"},
                                                                                                                            "function": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                    "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                                "type": {
                                                                                                                                  "pair": {
                                                                                                                                    "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                                    "second": {
                                                                                                                                      "pair": {
                                                                                                                                        "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                        "second": {
                                                                                                                                          "map": {
                                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                                        "function": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                                            "type": {
                                                                                                                              "pair": {
                                                                                                                                "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                "second": {
                                                                                                                                  "map": {
                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                                    "type": [
                                                                                                                      {
                                                                                                                        "constraints": null,
                                                                                                                        "type": {
                                                                                                                          "pair": {
                                                                                                                            "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                            "second": {
                                                                                                                              "map": {
                                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                                                        "variables": []}]}],
                                                                                                                "body": {
                                                                                                                  "let": {
                                                                                                                    "bindings": [
                                                                                                                      {
                                                                                                                        "name": "r",
                                                                                                                        "term": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "restPair"},
                                                                                                                            "function": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                                                                                    "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                                                "type": {
                                                                                                                                  "map": {
                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                                                        "type": [
                                                                                                                          {
                                                                                                                            "constraints": null,
                                                                                                                            "type": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                            "variables": []}]}],
                                                                                                                    "body": {
                                                                                                                      "let": {
                                                                                                                        "bindings": [
                                                                                                                          {
                                                                                                                            "name": "c2",
                                                                                                                            "term": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "restPair"},
                                                                                                                                "function": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {
                                                                                                                                      "typeApplication": {
                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                                                                                        "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                                                    "type": {
                                                                                                                                      "map": {
                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                                                            "type": [
                                                                                                                              {
                                                                                                                                "constraints": null,
                                                                                                                                "type": {
                                                                                                                                  "map": {
                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                "variables": []}]}],
                                                                                                                        "body": {
                                                                                                                          "let": {
                                                                                                                            "bindings": [
                                                                                                                              {
                                                                                                                                "name": "c1Subst",
                                                                                                                                "term": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {"variable": "c1"},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "r"},
                                                                                                                                        "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                                "type": [
                                                                                                                                  {
                                                                                                                                    "constraints": null,
                                                                                                                                    "type": {
                                                                                                                                      "map": {
                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                    "variables": []}]}],
                                                                                                                            "body": {
                                                                                                                              "let": {
                                                                                                                                "bindings": [
                                                                                                                                  {
                                                                                                                                    "name": "mergedConstraints",
                                                                                                                                    "term": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "c2"},
                                                                                                                                        "function": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "c1Subst"},
                                                                                                                                            "function": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {"variable": "hydra.inference.mergeClassConstraints"},
                                                                                                                                                "type": {"variable": "hydra.core.Name"}}}}}}},
                                                                                                                                    "type": [
                                                                                                                                      {
                                                                                                                                        "constraints": null,
                                                                                                                                        "type": {
                                                                                                                                          "map": {
                                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                                        "variables": []}]}],
                                                                                                                                "body": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "typeApplication": {
                                                                                                                                        "body": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {
                                                                                                                                              "pair": {
                                                                                                                                                "@first": {
                                                                                                                                                  "application": {
                                                                                                                                                    "argument": {"variable": "h"},
                                                                                                                                                    "function": {
                                                                                                                                                      "application": {
                                                                                                                                                        "argument": {
                                                                                                                                                          "application": {
                                                                                                                                                            "argument": {"variable": "j"},
                                                                                                                                                            "function": {
                                                                                                                                                              "application": {
                                                                                                                                                                "argument": {"variable": "r"},
                                                                                                                                                                "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                                                                                                                        "function": {
                                                                                                                                                          "typeApplication": {
                                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.lists.cons"}},
                                                                                                                                                            "type": {"variable": "hydra.core.Term"}}}}}}},
                                                                                                                                                "@second": {
                                                                                                                                                  "typeApplication": {
                                                                                                                                                    "body": {
                                                                                                                                                      "typeApplication": {
                                                                                                                                                        "body": {
                                                                                                                                                          "pair": {
                                                                                                                                                            "@first": {
                                                                                                                                                              "application": {
                                                                                                                                                                "argument": {"variable": "r_prime"},
                                                                                                                                                                "function": {
                                                                                                                                                                  "application": {
                                                                                                                                                                    "argument": {
                                                                                                                                                                      "application": {
                                                                                                                                                                        "argument": {"variable": "u_prime"},
                                                                                                                                                                        "function": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "r"},
                                                                                                                                                                            "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                                                                                                                    "function": {
                                                                                                                                                                      "typeApplication": {
                                                                                                                                                                        "body": {"function": {"primitive": "hydra.lib.lists.cons"}},
                                                                                                                                                                        "type": {"variable": "hydra.core.Type"}}}}}}},
                                                                                                                                                            "@second": {
                                                                                                                                                              "typeApplication": {
                                                                                                                                                                "body": {
                                                                                                                                                                  "typeApplication": {
                                                                                                                                                                    "body": {
                                                                                                                                                                      "pair": {
                                                                                                                                                                        "@first": {
                                                                                                                                                                          "application": {
                                                                                                                                                                            "argument": {"variable": "r"},
                                                                                                                                                                            "function": {
                                                                                                                                                                              "application": {
                                                                                                                                                                                "argument": {"variable": "u"},
                                                                                                                                                                                "function": {"variable": "hydra.substitution.composeTypeSubst"}}}}},
                                                                                                                                                                        "@second": {"variable": "mergedConstraints"}}},
                                                                                                                                                                    "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                                                                                "type": {
                                                                                                                                                                  "map": {
                                                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                                                                                        "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                                                                                                                    "type": {
                                                                                                                                                      "pair": {
                                                                                                                                                        "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                                        "second": {
                                                                                                                                                          "map": {
                                                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                                                            "type": {"list": {"variable": "hydra.core.Term"}}}},
                                                                                                                                        "type": {
                                                                                                                                          "pair": {
                                                                                                                                            "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                                            "second": {
                                                                                                                                              "pair": {
                                                                                                                                                "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                                "second": {
                                                                                                                                                  "map": {
                                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "typeApplication": {
                                                                                                                                        "body": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                                                            "type": {"variable": "t0"}}},
                                                                                                                                        "type": {
                                                                                                                                          "pair": {
                                                                                                                                            "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                                                            "second": {
                                                                                                                                              "pair": {
                                                                                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                                                "second": {
                                                                                                                                                  "pair": {
                                                                                                                                                    "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                                                    "second": {
                                                                                                                                                      "map": {
                                                                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}}}}}}}}}}}}}}}},
                                                                                                    "domain": [
                                                                                                      {
                                                                                                        "pair": {
                                                                                                          "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                          "second": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                              "second": {
                                                                                                                "pair": {
                                                                                                                  "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                  "second": {
                                                                                                                    "map": {
                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}],
                                                                                                    "parameter": "result2"}}},
                                                                                              "function": {
                                                                                                "application": {
                                                                                                  "argument": {
                                                                                                    "application": {
                                                                                                      "argument": {"variable": "tl"},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "cx"},
                                                                                                              "function": {
                                                                                                                "application": {
                                                                                                                  "argument": {"variable": "u"},
                                                                                                                  "function": {"variable": "hydra.substitution.substInContext"}}}}},
                                                                                                          "function": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"variable": "hydra.inference.inferTypesOfTemporaryBindings"},
                                                                                                              "type": {"variable": "t0"}}}}}}},
                                                                                                  "function": {
                                                                                                    "typeApplication": {
                                                                                                      "body": {
                                                                                                        "typeApplication": {
                                                                                                          "body": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                              "type": {"variable": "t0"}}},
                                                                                                          "type": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                              "second": {
                                                                                                                "pair": {
                                                                                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                                  "second": {
                                                                                                                    "pair": {
                                                                                                                      "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                      "second": {
                                                                                                                        "map": {
                                                                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                      "type": {
                                                                                                        "pair": {
                                                                                                          "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                                          "second": {
                                                                                                            "pair": {
                                                                                                              "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                              "second": {
                                                                                                                "pair": {
                                                                                                                  "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                                  "second": {
                                                                                                                    "map": {
                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}}}}}},
                                                                                      "domain": [
                                                                                        {
                                                                                          "map": {
                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                                                                      "parameter": "originalBindingConstraints"}}},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {
                                                                                      "application": {
                                                                                        "argument": {
                                                                                          "application": {
                                                                                            "argument": {"variable": "binding"},
                                                                                            "function": {
                                                                                              "function": {
                                                                                                "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                                                                        "function": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "function": {
                                                                                                "lambda": {
                                                                                                  "body": {
                                                                                                    "application": {
                                                                                                      "argument": {
                                                                                                        "function": {
                                                                                                          "lambda": {
                                                                                                            "body": {
                                                                                                              "let": {
                                                                                                                "bindings": [
                                                                                                                  {
                                                                                                                    "name": "freshConstraints",
                                                                                                                    "term": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"variable": "instantiatedTs"},
                                                                                                                            "function": {
                                                                                                                              "function": {
                                                                                                                                "elimination": {
                                                                                                                                  "record": {"field": "constraints", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                        "function": {
                                                                                                                          "application": {
                                                                                                                            "argument": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                                                                                "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                            "function": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {"function": {"primitive": "hydra.lib.maybes.fromMaybe"}},
                                                                                                                                "type": {
                                                                                                                                  "map": {
                                                                                                                                    "keys": {"variable": "hydra.core.Name"},
                                                                                                                                    "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                                    "type": [
                                                                                                                      {
                                                                                                                        "constraints": null,
                                                                                                                        "type": {
                                                                                                                          "map": {
                                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                                        "variables": []}]}],
                                                                                                                "body": {
                                                                                                                  "application": {
                                                                                                                    "argument": {
                                                                                                                      "function": {
                                                                                                                        "lambda": {
                                                                                                                          "body": {
                                                                                                                            "application": {
                                                                                                                              "argument": {
                                                                                                                                "application": {
                                                                                                                                  "argument": {"variable": "freshConstraints"},
                                                                                                                                  "function": {
                                                                                                                                    "application": {
                                                                                                                                      "argument": {"variable": "unifySubst"},
                                                                                                                                      "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                                                                                              "function": {
                                                                                                                                "typeApplication": {
                                                                                                                                  "body": {
                                                                                                                                    "typeApplication": {
                                                                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                                                      "type": {"variable": "t0"}}},
                                                                                                                                  "type": {
                                                                                                                                    "map": {
                                                                                                                                      "keys": {"variable": "hydra.core.Name"},
                                                                                                                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                                                          "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                                                                                          "parameter": "unifySubst"}}},
                                                                                                                    "function": {
                                                                                                                      "application": {
                                                                                                                        "argument": {
                                                                                                                          "application": {
                                                                                                                            "argument": {"literal": {"string": "original binding type"}},
                                                                                                                            "function": {
                                                                                                                              "application": {
                                                                                                                                "argument": {"variable": "u_prime"},
                                                                                                                                "function": {
                                                                                                                                  "application": {
                                                                                                                                    "argument": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {"variable": "instantiatedTs"},
                                                                                                                                        "function": {
                                                                                                                                          "function": {
                                                                                                                                            "elimination": {"record": {"field": "type", "typeName": "hydra.core.TypeScheme"}}}}}},
                                                                                                                                    "function": {
                                                                                                                                      "application": {
                                                                                                                                        "argument": {
                                                                                                                                          "application": {
                                                                                                                                            "argument": {"variable": "cx"},
                                                                                                                                            "function": {
                                                                                                                                              "function": {
                                                                                                                                                "elimination": {
                                                                                                                                                  "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                                                                                                        "function": {
                                                                                                                                          "typeApplication": {
                                                                                                                                            "body": {
                                                                                                                                              "typeApplication": {
                                                                                                                                                "body": {"variable": "hydra.unification.unifyTypes"},
                                                                                                                                                "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                                                            "type": {"variable": "t0"}}}}}}}}}}},
                                                                                                                        "function": {
                                                                                                                          "typeApplication": {
                                                                                                                            "body": {
                                                                                                                              "typeApplication": {
                                                                                                                                "body": {
                                                                                                                                  "typeApplication": {
                                                                                                                                    "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                                    "type": {"variable": "t0"}}},
                                                                                                                                "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                                                                            "type": {
                                                                                                                              "map": {
                                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                                                            "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                                                                            "parameter": "instantiatedTs"}}},
                                                                                                      "function": {
                                                                                                        "application": {
                                                                                                          "argument": {
                                                                                                            "application": {
                                                                                                              "argument": {"variable": "ts"},
                                                                                                              "function": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {"variable": "hydra.schemas.instantiateTypeScheme"},
                                                                                                                  "type": {"variable": "t0"}}}}},
                                                                                                          "function": {
                                                                                                            "typeApplication": {
                                                                                                              "body": {
                                                                                                                "typeApplication": {
                                                                                                                  "body": {
                                                                                                                    "typeApplication": {
                                                                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                                      "type": {"variable": "t0"}}},
                                                                                                                  "type": {"variable": "hydra.core.TypeScheme"}}},
                                                                                                              "type": {
                                                                                                                "map": {
                                                                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                                                  "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                                                                  "parameter": "ts"}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                                            "type": {"variable": "hydra.core.Name"}}},
                                                                                                        "type": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                    "function": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {
                                                                                                          "typeApplication": {
                                                                                                            "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                                            "type": {"variable": "t0"}}},
                                                                                                        "type": {
                                                                                                          "map": {
                                                                                                            "keys": {"variable": "hydra.core.Name"},
                                                                                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {
                                                                                                      "typeApplication": {
                                                                                                        "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                                                        "type": {
                                                                                                          "application": {
                                                                                                            "argument": {
                                                                                                              "map": {
                                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                                                                            "function": {
                                                                                                              "application": {
                                                                                                                "argument": {"variable": "t0"},
                                                                                                                "function": {"variable": "hydra.compute.Flow"}}}}}}},
                                                                                                    "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}},
                                                                                    "function": {
                                                                                      "typeApplication": {
                                                                                        "body": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                                "type": {"variable": "t0"}}},
                                                                                            "type": {
                                                                                              "map": {
                                                                                                "keys": {"variable": "hydra.core.Name"},
                                                                                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                                        "type": {
                                                                                          "pair": {
                                                                                            "first": {"list": {"variable": "hydra.core.Term"}},
                                                                                            "second": {
                                                                                              "pair": {
                                                                                                "first": {"list": {"variable": "hydra.core.Type"}},
                                                                                                "second": {
                                                                                                  "pair": {
                                                                                                    "first": {"variable": "hydra.typing.TypeSubst"},
                                                                                                    "second": {
                                                                                                      "map": {
                                                                                                        "keys": {"variable": "hydra.core.Name"},
                                                                                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}}}}}}}}}}}},
                                                            "domain": [{"variable": "hydra.typing.InferenceResult"}],
                                                            "parameter": "result1"}}},
                                                      "function": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {
                                                                    "list": [
                                                                      {"literal": {"string": "temporary let binding '"}},
                                                                      {
                                                                        "application": {
                                                                          "argument": {"variable": "k"},
                                                                          "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                                      {"literal": {"string": "'"}}]},
                                                                  "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"variable": "v"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "cx"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {"variable": "hydra.inference.inferTypeOfTerm"},
                                                                          "type": {"variable": "t0"}}}}}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                      "type": {"variable": "t0"}}},
                                                                  "type": {"variable": "hydra.typing.InferenceResult"}}},
                                                              "type": {
                                                                "pair": {
                                                                  "first": {"list": {"variable": "hydra.core.Term"}},
                                                                  "second": {
                                                                    "pair": {
                                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                                      "second": {
                                                                        "pair": {
                                                                          "first": {"variable": "hydra.typing.TypeSubst"},
                                                                          "second": {
                                                                            "map": {
                                                                              "keys": {"variable": "hydra.core.Name"},
                                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}}}}}}}}}}}},
                                  "type": [
                                    {
                                      "constraints": null,
                                      "type": {
                                        "application": {
                                          "argument": {
                                            "pair": {
                                              "first": {"list": {"variable": "hydra.core.Term"}},
                                              "second": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                  "second": {
                                                    "pair": {
                                                      "first": {"variable": "hydra.typing.TypeSubst"},
                                                      "second": {
                                                        "map": {
                                                          "keys": {"variable": "hydra.core.Name"},
                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                          "function": {
                                            "application": {
                                              "argument": {"variable": "t0"},
                                              "function": {"variable": "hydra.compute.Flow"}}}}},
                                      "variables": []}]}],
                              "body": {
                                "application": {
                                  "argument": {"variable": "dflt"},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "pair": {
                                                      "@first": {
                                                        "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Term"}}},
                                                      "@second": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "pair": {
                                                                  "@first": {
                                                                    "typeApplication": {"body": {"list": []}, "type": {"variable": "hydra.core.Type"}}},
                                                                  "@second": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "pair": {
                                                                              "@first": {"variable": "hydra.substitution.idTypeSubst"},
                                                                              "@second": {
                                                                                "typeApplication": {
                                                                                  "body": {
                                                                                    "typeApplication": {
                                                                                      "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                      "type": {"variable": "hydra.core.Name"}}},
                                                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                          "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                                      "type": {
                                                                        "map": {
                                                                          "keys": {"variable": "hydra.core.Name"},
                                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                              "type": {"list": {"variable": "hydra.core.Type"}}}},
                                                          "type": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.typing.TypeSubst"},
                                                              "second": {
                                                                "map": {
                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                  "type": {"list": {"variable": "hydra.core.Term"}}}},
                                              "type": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Type"}},
                                                  "second": {
                                                    "pair": {
                                                      "first": {"variable": "hydra.typing.TypeSubst"},
                                                      "second": {
                                                        "map": {
                                                          "keys": {"variable": "hydra.core.Name"},
                                                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                  "type": {"variable": "t0"}}},
                                              "type": {
                                                "pair": {
                                                  "first": {"list": {"variable": "hydra.core.Term"}},
                                                  "second": {
                                                    "pair": {
                                                      "first": {"list": {"variable": "hydra.core.Type"}},
                                                      "second": {
                                                        "pair": {
                                                          "first": {"variable": "hydra.typing.TypeSubst"},
                                                          "second": {
                                                            "map": {
                                                              "keys": {"variable": "hydra.core.Name"},
                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {"variable": "bins"},
                                              "function": {
                                                "typeApplication": {
                                                  "body": {"function": {"primitive": "hydra.lib.lists.null"}},
                                                  "type": {"variable": "hydra.core.Binding"}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.logic.ifElse"}},
                                              "type": {
                                                "application": {
                                                  "argument": {
                                                    "pair": {
                                                      "first": {"list": {"variable": "hydra.core.Term"}},
                                                      "second": {
                                                        "pair": {
                                                          "first": {"list": {"variable": "hydra.core.Type"}},
                                                          "second": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.typing.TypeSubst"},
                                                              "second": {
                                                                "map": {
                                                                  "keys": {"variable": "hydra.core.Name"},
                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "t0"},
                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}}}}}}}}}},
                          "domain": [{"list": {"variable": "hydra.core.Binding"}}],
                          "parameter": "bins"}}},
                    "domain": [{"variable": "hydra.typing.InferenceContext"}],
                    "parameter": "cx"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "application": {
                      "argument": {
                        "pair": {
                          "first": {"list": {"variable": "hydra.core.Term"}},
                          "second": {
                            "pair": {
                              "first": {"list": {"variable": "hydra.core.Type"}},
                              "second": {
                                "pair": {
                                  "first": {"variable": "hydra.typing.TypeSubst"},
                                  "second": {
                                    "map": {
                                      "keys": {"variable": "hydra.core.Name"},
                                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                      "function": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {"variable": "hydra.compute.Flow"}}}}},
                  "domain": {"list": {"variable": "hydra.core.Binding"}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.initialTypeContext",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Create an initial type context from a graph"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "let": {
                        "bindings": [
                          {
                            "name": "toPair",
                            "term": {
                              "typeLambda": {
                                "body": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "name",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "el"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "name", "typeName": "hydra.core.Binding"}}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"variable": "hydra.core.Name"},
                                                  "variables": []}]}],
                                          "body": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {"variable": "el"},
                                                  "function": {
                                                    "function": {
                                                      "elimination": {"record": {"field": "type", "typeName": "hydra.core.Binding"}}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {
                                                                      "pair": {
                                                                        "@first": {"variable": "name"},
                                                                        "@second": {
                                                                          "application": {
                                                                            "argument": {"variable": "ts"},
                                                                            "function": {"variable": "hydra.schemas.typeSchemeToFType"}}}}},
                                                                    "type": {"variable": "hydra.core.Name"}}},
                                                                "type": {"variable": "hydra.core.Type"}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                    "type": {"variable": "t1"}}},
                                                                "type": {
                                                                  "pair": {
                                                                    "first": {"variable": "hydra.core.Name"},
                                                                    "second": {"variable": "hydra.core.Type"}}}}}}},
                                                        "domain": [{"variable": "hydra.core.TypeScheme"}],
                                                        "parameter": "ts"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "name"},
                                                                  "function": {"function": {"elimination": {"wrap": "hydra.core.Name"}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {"literal": {"string": "untyped element: "}},
                                                                  "function": {"function": {"primitive": "hydra.lib.strings.cat2"}}}}}},
                                                          "function": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.fail"}},
                                                                  "type": {"variable": "t1"}}},
                                                              "type": {
                                                                "pair": {
                                                                  "first": {"variable": "hydra.core.Name"},
                                                                  "second": {"variable": "hydra.core.Type"}}}}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                              "type": {
                                                                "application": {
                                                                  "argument": {
                                                                    "pair": {
                                                                      "first": {"variable": "hydra.core.Name"},
                                                                      "second": {"variable": "hydra.core.Type"}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "t1"},
                                                                      "function": {"variable": "hydra.compute.Flow"}}}}}}},
                                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}}}}}},
                                      "domain": [{"variable": "hydra.core.Binding"}],
                                      "parameter": "el"}}},
                                "parameter": "t1"}},
                            "type": [
                              {
                                "constraints": null,
                                "type": {
                                  "function": {
                                    "codomain": {
                                      "application": {
                                        "argument": {
                                          "pair": {
                                            "first": {"variable": "hydra.core.Name"},
                                            "second": {"variable": "hydra.core.Type"}}},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "t1"},
                                            "function": {"variable": "hydra.compute.Flow"}}}}},
                                    "domain": {"variable": "hydra.core.Binding"}}},
                                "variables": ["t1"]}]}],
                        "body": {
                          "application": {
                            "argument": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "application": {
                                                "argument": {
                                                  "record": {
                                                    "fields": [
                                                      {"name": "types", "term": {"variable": "types"}},
                                                      {
                                                        "name": "metadata",
                                                        "term": {
                                                          "typeApplication": {
                                                            "body": {
                                                              "typeApplication": {
                                                                "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                "type": {"variable": "hydra.core.Name"}}},
                                                            "type": {"variable": "hydra.core.Term"}}}},
                                                      {
                                                        "name": "typeVariables",
                                                        "term": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.sets.empty"}},
                                                            "type": {"variable": "hydra.core.Name"}}}},
                                                      {
                                                        "name": "lambdaVariables",
                                                        "term": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.sets.empty"}},
                                                            "type": {"variable": "hydra.core.Name"}}}},
                                                      {
                                                        "name": "letVariables",
                                                        "term": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.sets.empty"}},
                                                            "type": {"variable": "hydra.core.Name"}}}},
                                                      {"name": "inferenceContext", "term": {"variable": "ix"}}],
                                                    "typeName": "hydra.typing.TypeContext"}},
                                                "function": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                        "type": {"variable": "t0"}}},
                                                    "type": {"variable": "hydra.typing.TypeContext"}}}}},
                                            "domain": [
                                              {
                                                "map": {
                                                  "keys": {"variable": "hydra.core.Name"},
                                                  "values": {"variable": "hydra.core.Type"}}}],
                                            "parameter": "types"}}},
                                      "function": {
                                        "application": {
                                          "argument": {
                                            "application": {
                                              "argument": {
                                                "application": {
                                                  "argument": {
                                                    "application": {
                                                      "argument": {"variable": "g"},
                                                      "function": {
                                                        "function": {
                                                          "elimination": {"record": {"field": "elements", "typeName": "hydra.graph.Graph"}}}}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "typeApplication": {"body": {"variable": "toPair"}, "type": {"variable": "t0"}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.mapList"}},
                                                                  "type": {"variable": "hydra.core.Binding"}}},
                                                              "type": {"variable": "t0"}}},
                                                          "type": {
                                                            "pair": {
                                                              "first": {"variable": "hydra.core.Name"},
                                                              "second": {"variable": "hydra.core.Type"}}}}}}}}},
                                              "function": {
                                                "application": {
                                                  "argument": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {"function": {"primitive": "hydra.lib.maps.fromList"}},
                                                          "type": {"variable": "hydra.core.Name"}}},
                                                      "type": {"variable": "hydra.core.Type"}}},
                                                  "function": {
                                                    "typeApplication": {
                                                      "body": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.flows.map"}},
                                                              "type": {
                                                                "list": {
                                                                  "pair": {
                                                                    "first": {"variable": "hydra.core.Name"},
                                                                    "second": {"variable": "hydra.core.Type"}}}}}},
                                                          "type": {
                                                            "map": {
                                                              "keys": {"variable": "hydra.core.Name"},
                                                              "values": {"variable": "hydra.core.Type"}}}}},
                                                      "type": {"variable": "t0"}}}}}}},
                                          "function": {
                                            "typeApplication": {
                                              "body": {
                                                "typeApplication": {
                                                  "body": {
                                                    "typeApplication": {
                                                      "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                      "type": {"variable": "t0"}}},
                                                  "type": {
                                                    "map": {
                                                      "keys": {"variable": "hydra.core.Name"},
                                                      "values": {"variable": "hydra.core.Type"}}}}},
                                              "type": {"variable": "hydra.typing.TypeContext"}}}}}}},
                                  "domain": [{"variable": "hydra.typing.InferenceContext"}],
                                  "parameter": "ix"}}},
                            "function": {
                              "application": {
                                "argument": {
                                  "application": {
                                    "argument": {"variable": "g"},
                                    "function": {
                                      "typeApplication": {
                                        "body": {"variable": "hydra.schemas.graphToInferenceContext"},
                                        "type": {"variable": "t0"}}}}},
                                "function": {
                                  "typeApplication": {
                                    "body": {
                                      "typeApplication": {
                                        "body": {
                                          "typeApplication": {
                                            "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                            "type": {"variable": "t0"}}},
                                        "type": {"variable": "hydra.typing.InferenceContext"}}},
                                    "type": {"variable": "hydra.typing.TypeContext"}}}}}}}}},
                    "domain": [{"variable": "hydra.graph.Graph"}],
                    "parameter": "g"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "application": {
                  "argument": {"variable": "hydra.typing.TypeContext"},
                  "function": {
                    "application": {
                      "argument": {"variable": "t0"},
                      "function": {"variable": "hydra.compute.Flow"}}}}},
              "domain": {"variable": "hydra.graph.Graph"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.isUnbound",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Check if a variable is unbound in context"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "application": {
                          "argument": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {"variable": "cx"},
                                      "function": {
                                        "function": {
                                          "elimination": {
                                            "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "v"},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.maps.member"}},
                                              "type": {"variable": "hydra.core.Name"}}},
                                          "type": {"variable": "hydra.core.TypeScheme"}}}}}}},
                              "function": {"function": {"primitive": "hydra.lib.logic.not"}}}},
                          "function": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {
                                    "application": {
                                      "argument": {
                                        "application": {
                                          "argument": {"variable": "cx"},
                                          "function": {"variable": "hydra.inference.freeVariablesInContext"}}},
                                      "function": {
                                        "application": {
                                          "argument": {"variable": "v"},
                                          "function": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.sets.member"}},
                                              "type": {"variable": "hydra.core.Name"}}}}}}},
                                  "function": {"function": {"primitive": "hydra.lib.logic.not"}}}},
                              "function": {"function": {"primitive": "hydra.lib.logic.and"}}}}}},
                      "domain": [{"variable": "hydra.core.Name"}],
                      "parameter": "v"}}},
                "domain": [{"variable": "hydra.typing.InferenceContext"}],
                "parameter": "cx"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {"literal": {"boolean": {}}},
                  "domain": {"variable": "hydra.core.Name"}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.mapConstraints",
      "term": {
        "typeLambda": {
          "body": {
            "typeLambda": {
              "body": {
                "annotated": {
                  "annotation": [
                    {
                      "@key": "description",
                      "@value": {"literal": {"string": "Map over type constraints after unification"}}}],
                  "body": {
                    "function": {
                      "lambda": {
                        "body": {
                          "function": {
                            "lambda": {
                              "body": {
                                "function": {
                                  "lambda": {
                                    "body": {
                                      "application": {
                                        "argument": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "application": {
                                                  "argument": {
                                                    "function": {
                                                      "lambda": {
                                                        "body": {
                                                          "application": {
                                                            "argument": {
                                                              "application": {"argument": {"variable": "s"}, "function": {"variable": "f"}}},
                                                            "function": {
                                                              "typeApplication": {
                                                                "body": {
                                                                  "typeApplication": {
                                                                    "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                    "type": {"variable": "t1"}}},
                                                                "type": {"variable": "t0"}}}}},
                                                        "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                        "parameter": "_"}}},
                                                  "function": {
                                                    "application": {
                                                      "argument": {
                                                        "application": {
                                                          "argument": {"variable": "s"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "cx"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {"variable": "hydra.checking.checkTypeSubst"},
                                                                  "type": {"variable": "t1"}}}}}}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {
                                                                "typeApplication": {
                                                                  "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                  "type": {"variable": "t1"}}},
                                                              "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                          "type": {"variable": "t0"}}}}}}},
                                              "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                              "parameter": "s"}}},
                                        "function": {
                                          "application": {
                                            "argument": {
                                              "application": {
                                                "argument": {"variable": "constraints"},
                                                "function": {
                                                  "application": {
                                                    "argument": {
                                                      "application": {
                                                        "argument": {"variable": "cx"},
                                                        "function": {
                                                          "function": {
                                                            "elimination": {
                                                              "record": {"field": "schemaTypes", "typeName": "hydra.typing.InferenceContext"}}}}}},
                                                    "function": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"variable": "hydra.unification.unifyTypeConstraints"},
                                                            "type": {"variable": "hydra.core.TypeScheme"}}},
                                                        "type": {"variable": "t1"}}}}}}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {
                                                      "typeApplication": {
                                                        "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                        "type": {"variable": "t1"}}},
                                                    "type": {"variable": "hydra.typing.TypeSubst"}}},
                                                "type": {"variable": "t0"}}}}}}},
                                    "domain": [{"list": {"variable": "hydra.typing.TypeConstraint"}}],
                                    "parameter": "constraints"}}},
                              "domain": [
                                {
                                  "function": {
                                    "codomain": {"variable": "t0"},
                                    "domain": {"variable": "hydra.typing.TypeSubst"}}}],
                              "parameter": "f"}}},
                        "domain": [{"variable": "hydra.typing.InferenceContext"}],
                        "parameter": "cx"}}}}},
              "parameter": "t1"}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "application": {
                          "argument": {"variable": "t0"},
                          "function": {
                            "application": {
                              "argument": {"variable": "t1"},
                              "function": {"variable": "hydra.compute.Flow"}}}}},
                      "domain": {"list": {"variable": "hydra.typing.TypeConstraint"}}}},
                  "domain": {
                    "function": {
                      "codomain": {"variable": "t0"},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}}}},
              "domain": {"variable": "hydra.typing.InferenceContext"}}},
          "variables": ["t0", "t1"]}]},
    {
      "name": "hydra.inference.mergeClassConstraints",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {
                      "string": "Merge two maps of class constraints. When both maps have constraints for the same variable, union the class sets."}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "application": {
                              "argument": {
                                "application": {
                                  "argument": {"variable": "m2"},
                                  "function": {
                                    "typeApplication": {
                                      "body": {
                                        "typeApplication": {
                                          "body": {"function": {"primitive": "hydra.lib.maps.toList"}},
                                          "type": {"variable": "t0"}}},
                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                              "function": {
                                "application": {
                                  "argument": {"variable": "m1"},
                                  "function": {
                                    "application": {
                                      "argument": {
                                        "function": {
                                          "lambda": {
                                            "body": {
                                              "function": {
                                                "lambda": {
                                                  "body": {
                                                    "let": {
                                                      "bindings": [
                                                        {
                                                          "name": "k",
                                                          "term": {
                                                            "application": {
                                                              "argument": {"variable": "pair"},
                                                              "function": {
                                                                "typeApplication": {
                                                                  "body": {
                                                                    "typeApplication": {
                                                                      "body": {"function": {"primitive": "hydra.lib.pairs.first"}},
                                                                      "type": {"variable": "t0"}}},
                                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                          "type": [{"constraints": null, "type": {"variable": "t0"}, "variables": []}]}],
                                                      "body": {
                                                        "let": {
                                                          "bindings": [
                                                            {
                                                              "name": "v",
                                                              "term": {
                                                                "application": {
                                                                  "argument": {"variable": "pair"},
                                                                  "function": {
                                                                    "typeApplication": {
                                                                      "body": {
                                                                        "typeApplication": {
                                                                          "body": {"function": {"primitive": "hydra.lib.pairs.second"}},
                                                                          "type": {"variable": "t0"}}},
                                                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                              "type": [
                                                                {
                                                                  "constraints": null,
                                                                  "type": {"variable": "hydra.core.TypeVariableMetadata"},
                                                                  "variables": []}]}],
                                                          "body": {
                                                            "application": {
                                                              "argument": {
                                                                "application": {
                                                                  "argument": {"variable": "acc"},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {"variable": "k"},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"function": {"primitive": "hydra.lib.maps.lookup"}},
                                                                              "type": {"variable": "t0"}}},
                                                                          "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}},
                                                              "function": {
                                                                "application": {
                                                                  "argument": {
                                                                    "function": {
                                                                      "lambda": {
                                                                        "body": {
                                                                          "let": {
                                                                            "bindings": [
                                                                              {
                                                                                "name": "merged",
                                                                                "term": {
                                                                                  "record": {
                                                                                    "fields": [
                                                                                      {
                                                                                        "name": "classes",
                                                                                        "term": {
                                                                                          "application": {
                                                                                            "argument": {
                                                                                              "application": {
                                                                                                "argument": {"variable": "v"},
                                                                                                "function": {
                                                                                                  "function": {
                                                                                                    "elimination": {
                                                                                                      "record": {"field": "classes", "typeName": "hydra.core.TypeVariableMetadata"}}}}}},
                                                                                            "function": {
                                                                                              "application": {
                                                                                                "argument": {
                                                                                                  "application": {
                                                                                                    "argument": {"variable": "existing"},
                                                                                                    "function": {
                                                                                                      "function": {
                                                                                                        "elimination": {
                                                                                                          "record": {"field": "classes", "typeName": "hydra.core.TypeVariableMetadata"}}}}}},
                                                                                                "function": {
                                                                                                  "typeApplication": {
                                                                                                    "body": {"function": {"primitive": "hydra.lib.sets.union"}},
                                                                                                    "type": {"variable": "hydra.core.Name"}}}}}}}}],
                                                                                    "typeName": "hydra.core.TypeVariableMetadata"}},
                                                                                "type": [
                                                                                  {
                                                                                    "constraints": null,
                                                                                    "type": {"variable": "hydra.core.TypeVariableMetadata"},
                                                                                    "variables": []}]}],
                                                                            "body": {
                                                                              "application": {
                                                                                "argument": {"variable": "acc"},
                                                                                "function": {
                                                                                  "application": {
                                                                                    "argument": {"variable": "merged"},
                                                                                    "function": {
                                                                                      "application": {
                                                                                        "argument": {"variable": "k"},
                                                                                        "function": {
                                                                                          "typeApplication": {
                                                                                            "body": {
                                                                                              "typeApplication": {
                                                                                                "body": {"function": {"primitive": "hydra.lib.maps.insert"}},
                                                                                                "type": {"variable": "t0"}}},
                                                                                            "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                                                                        "domain": [{"variable": "hydra.core.TypeVariableMetadata"}],
                                                                        "parameter": "existing"}}},
                                                                  "function": {
                                                                    "application": {
                                                                      "argument": {
                                                                        "application": {
                                                                          "argument": {"variable": "acc"},
                                                                          "function": {
                                                                            "application": {
                                                                              "argument": {"variable": "v"},
                                                                              "function": {
                                                                                "application": {
                                                                                  "argument": {"variable": "k"},
                                                                                  "function": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.maps.insert"}},
                                                                                          "type": {"variable": "t0"}}},
                                                                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}},
                                                                      "function": {
                                                                        "typeApplication": {
                                                                          "body": {
                                                                            "typeApplication": {
                                                                              "body": {"function": {"primitive": "hydra.lib.maybes.maybe"}},
                                                                              "type": {
                                                                                "map": {
                                                                                  "keys": {"variable": "t0"},
                                                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                                                          "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}}}},
                                                  "domain": [
                                                    {
                                                      "pair": {
                                                        "first": {"variable": "t0"},
                                                        "second": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                                  "parameter": "pair"}}},
                                            "domain": [
                                              {
                                                "map": {
                                                  "keys": {"variable": "t0"},
                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                            "parameter": "acc"}}},
                                      "function": {
                                        "typeApplication": {
                                          "body": {
                                            "typeApplication": {
                                              "body": {"function": {"primitive": "hydra.lib.lists.foldl"}},
                                              "type": {
                                                "map": {
                                                  "keys": {"variable": "t0"},
                                                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                                          "type": {
                                            "pair": {
                                              "first": {"variable": "t0"},
                                              "second": {"variable": "hydra.core.TypeVariableMetadata"}}}}}}}}}}},
                          "domain": [
                            {
                              "map": {
                                "keys": {"variable": "t0"},
                                "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                          "parameter": "m2"}}},
                    "domain": [
                      {
                        "map": {
                          "keys": {"variable": "t0"},
                          "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                    "parameter": "m1"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": [[{"@key": "t0", "@value": {"classes": ["ordering"]}}]],
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "map": {
                      "keys": {"variable": "t0"},
                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                  "domain": {
                    "map": {
                      "keys": {"variable": "t0"},
                      "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
              "domain": {
                "map": {
                  "keys": {"variable": "t0"},
                  "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.showInferenceResult",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {"literal": {"string": "Show an inference result for debugging"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "let": {
                    "bindings": [
                      {
                        "name": "term",
                        "term": {
                          "application": {
                            "argument": {"variable": "result"},
                            "function": {
                              "function": {
                                "elimination": {
                                  "record": {"field": "term", "typeName": "hydra.typing.InferenceResult"}}}}}},
                        "type": [
                          {
                            "constraints": null,
                            "type": {"variable": "hydra.core.Term"},
                            "variables": []}]}],
                    "body": {
                      "let": {
                        "bindings": [
                          {
                            "name": "typ",
                            "term": {
                              "application": {
                                "argument": {"variable": "result"},
                                "function": {
                                  "function": {
                                    "elimination": {
                                      "record": {"field": "type", "typeName": "hydra.typing.InferenceResult"}}}}}},
                            "type": [
                              {
                                "constraints": null,
                                "type": {"variable": "hydra.core.Type"},
                                "variables": []}]}],
                        "body": {
                          "let": {
                            "bindings": [
                              {
                                "name": "subst",
                                "term": {
                                  "application": {
                                    "argument": {"variable": "result"},
                                    "function": {
                                      "function": {
                                        "elimination": {
                                          "record": {"field": "subst", "typeName": "hydra.typing.InferenceResult"}}}}}},
                                "type": [
                                  {
                                    "constraints": null,
                                    "type": {"variable": "hydra.typing.TypeSubst"},
                                    "variables": []}]}],
                            "body": {
                              "application": {
                                "argument": {
                                  "list": [
                                    {"literal": {"string": "{term="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {"variable": "hydra.show.core.term"}}},
                                    {"literal": {"string": ", type="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "typ"},
                                        "function": {"variable": "hydra.show.core.type"}}},
                                    {"literal": {"string": ", subst="}},
                                    {
                                      "application": {
                                        "argument": {"variable": "subst"},
                                        "function": {"variable": "hydra.show.typing.typeSubst"}}},
                                    {"literal": {"string": "}"}}]},
                                "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}}}}}}}},
                "domain": [{"variable": "hydra.typing.InferenceResult"}],
                "parameter": "result"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {"literal": {"string": {}}},
              "domain": {"variable": "hydra.typing.InferenceResult"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.yield",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create an inference result with no class constraints"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "record": {
                                "fields": [
                                  {
                                    "name": "term",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "term"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "subst"},
                                            "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                  {
                                    "name": "type",
                                    "term": {
                                      "application": {
                                        "argument": {"variable": "typ"},
                                        "function": {
                                          "application": {
                                            "argument": {"variable": "subst"},
                                            "function": {"variable": "hydra.substitution.substInType"}}}}}},
                                  {"name": "subst", "term": {"variable": "subst"}},
                                  {
                                    "name": "classConstraints",
                                    "term": {
                                      "typeApplication": {
                                        "body": {
                                          "typeApplication": {
                                            "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                            "type": {"variable": "hydra.core.Name"}}},
                                        "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}],
                                "typeName": "hydra.typing.InferenceResult"}},
                            "domain": [{"variable": "hydra.typing.TypeSubst"}],
                            "parameter": "subst"}}},
                      "domain": [{"variable": "hydra.core.Type"}],
                      "parameter": "typ"}}},
                "domain": [{"variable": "hydra.core.Term"}],
                "parameter": "term"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {"variable": "hydra.typing.InferenceResult"},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}},
                  "domain": {"variable": "hydra.core.Type"}}},
              "domain": {"variable": "hydra.core.Term"}}},
          "variables": []}]},
    {
      "name": "hydra.inference.yieldChecked",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {"literal": {"string": "Create a checked inference result"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "let": {
                                    "bindings": [
                                      {
                                        "name": "iterm",
                                        "term": {
                                          "application": {
                                            "argument": {"variable": "term"},
                                            "function": {
                                              "application": {
                                                "argument": {"variable": "subst"},
                                                "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                        "type": [
                                          {
                                            "constraints": null,
                                            "type": {"variable": "hydra.core.Term"},
                                            "variables": []}]}],
                                    "body": {
                                      "let": {
                                        "bindings": [
                                          {
                                            "name": "itype",
                                            "term": {
                                              "application": {
                                                "argument": {"variable": "typ"},
                                                "function": {
                                                  "application": {
                                                    "argument": {"variable": "subst"},
                                                    "function": {"variable": "hydra.substitution.substInType"}}}}},
                                            "type": [
                                              {
                                                "constraints": null,
                                                "type": {"variable": "hydra.core.Type"},
                                                "variables": []}]}],
                                        "body": {
                                          "application": {
                                            "argument": {
                                              "record": {
                                                "fields": [
                                                  {"name": "term", "term": {"variable": "iterm"}},
                                                  {"name": "type", "term": {"variable": "itype"}},
                                                  {"name": "subst", "term": {"variable": "subst"}},
                                                  {
                                                    "name": "classConstraints",
                                                    "term": {
                                                      "typeApplication": {
                                                        "body": {
                                                          "typeApplication": {
                                                            "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                            "type": {"variable": "hydra.core.Name"}}},
                                                        "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}],
                                                "typeName": "hydra.typing.InferenceResult"}},
                                            "function": {
                                              "typeApplication": {
                                                "body": {
                                                  "typeApplication": {
                                                    "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                    "type": {"variable": "t0"}}},
                                                "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}},
                                "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                "parameter": "subst"}}},
                          "domain": [{"variable": "hydra.core.Type"}],
                          "parameter": "typ"}}},
                    "domain": [{"variable": "hydra.core.Term"}],
                    "parameter": "term"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "application": {
                          "argument": {"variable": "hydra.typing.InferenceResult"},
                          "function": {
                            "application": {
                              "argument": {"variable": "t0"},
                              "function": {"variable": "hydra.compute.Flow"}}}}},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}},
                  "domain": {"variable": "hydra.core.Type"}}},
              "domain": {"variable": "hydra.core.Term"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.yieldCheckedWithConstraints",
      "term": {
        "typeLambda": {
          "body": {
            "annotated": {
              "annotation": [
                {
                  "@key": "description",
                  "@value": {
                    "literal": {"string": "Create a checked inference result with class constraints"}}}],
              "body": {
                "function": {
                  "lambda": {
                    "body": {
                      "function": {
                        "lambda": {
                          "body": {
                            "function": {
                              "lambda": {
                                "body": {
                                  "function": {
                                    "lambda": {
                                      "body": {
                                        "let": {
                                          "bindings": [
                                            {
                                              "name": "iterm",
                                              "term": {
                                                "application": {
                                                  "argument": {"variable": "term"},
                                                  "function": {
                                                    "application": {
                                                      "argument": {"variable": "subst"},
                                                      "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                              "type": [
                                                {
                                                  "constraints": null,
                                                  "type": {"variable": "hydra.core.Term"},
                                                  "variables": []}]}],
                                          "body": {
                                            "let": {
                                              "bindings": [
                                                {
                                                  "name": "itype",
                                                  "term": {
                                                    "application": {
                                                      "argument": {"variable": "typ"},
                                                      "function": {
                                                        "application": {
                                                          "argument": {"variable": "subst"},
                                                          "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                  "type": [
                                                    {
                                                      "constraints": null,
                                                      "type": {"variable": "hydra.core.Type"},
                                                      "variables": []}]}],
                                              "body": {
                                                "let": {
                                                  "bindings": [
                                                    {
                                                      "name": "iconstraints",
                                                      "term": {
                                                        "application": {
                                                          "argument": {"variable": "constraints"},
                                                          "function": {
                                                            "application": {
                                                              "argument": {"variable": "subst"},
                                                              "function": {"variable": "hydra.substitution.substInClassConstraints"}}}}},
                                                      "type": [
                                                        {
                                                          "constraints": null,
                                                          "type": {
                                                            "map": {
                                                              "keys": {"variable": "hydra.core.Name"},
                                                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}},
                                                          "variables": []}]}],
                                                  "body": {
                                                    "application": {
                                                      "argument": {
                                                        "record": {
                                                          "fields": [
                                                            {"name": "term", "term": {"variable": "iterm"}},
                                                            {"name": "type", "term": {"variable": "itype"}},
                                                            {"name": "subst", "term": {"variable": "subst"}},
                                                            {"name": "classConstraints", "term": {"variable": "iconstraints"}}],
                                                          "typeName": "hydra.typing.InferenceResult"}},
                                                      "function": {
                                                        "typeApplication": {
                                                          "body": {
                                                            "typeApplication": {
                                                              "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                              "type": {"variable": "t0"}}},
                                                          "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                      "domain": [
                                        {
                                          "map": {
                                            "keys": {"variable": "hydra.core.Name"},
                                            "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                      "parameter": "constraints"}}},
                                "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                "parameter": "subst"}}},
                          "domain": [{"variable": "hydra.core.Type"}],
                          "parameter": "typ"}}},
                    "domain": [{"variable": "hydra.core.Term"}],
                    "parameter": "term"}}}}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "function": {
                          "codomain": {
                            "application": {
                              "argument": {"variable": "hydra.typing.InferenceResult"},
                              "function": {
                                "application": {
                                  "argument": {"variable": "t0"},
                                  "function": {"variable": "hydra.compute.Flow"}}}}},
                          "domain": {
                            "map": {
                              "keys": {"variable": "hydra.core.Name"},
                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}},
                  "domain": {"variable": "hydra.core.Type"}}},
              "domain": {"variable": "hydra.core.Term"}}},
          "variables": ["t0"]}]},
    {
      "name": "hydra.inference.yieldDebug",
      "term": {
        "typeLambda": {
          "body": {
            "typeLambda": {
              "body": {
                "typeLambda": {
                  "body": {
                    "annotated": {
                      "annotation": [
                        {
                          "@key": "description",
                          "@value": {
                            "literal": {"string": "Create an inference result with debug output"}}}],
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "function": {
                                      "lambda": {
                                        "body": {
                                          "function": {
                                            "lambda": {
                                              "body": {
                                                "function": {
                                                  "lambda": {
                                                    "body": {
                                                      "let": {
                                                        "bindings": [
                                                          {
                                                            "name": "rterm",
                                                            "term": {
                                                              "application": {
                                                                "argument": {"variable": "term"},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {"variable": "subst"},
                                                                    "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}},
                                                            "type": [
                                                              {
                                                                "constraints": null,
                                                                "type": {"variable": "hydra.core.Term"},
                                                                "variables": []}]}],
                                                        "body": {
                                                          "let": {
                                                            "bindings": [
                                                              {
                                                                "name": "rtyp",
                                                                "term": {
                                                                  "application": {
                                                                    "argument": {"variable": "typ"},
                                                                    "function": {
                                                                      "application": {
                                                                        "argument": {"variable": "subst"},
                                                                        "function": {"variable": "hydra.substitution.substInType"}}}}},
                                                                "type": [
                                                                  {
                                                                    "constraints": null,
                                                                    "type": {"variable": "hydra.core.Type"},
                                                                    "variables": []}]}],
                                                            "body": {
                                                              "application": {
                                                                "argument": {
                                                                  "function": {
                                                                    "lambda": {
                                                                      "body": {
                                                                        "application": {
                                                                          "argument": {
                                                                            "record": {
                                                                              "fields": [
                                                                                {"name": "term", "term": {"variable": "rterm"}},
                                                                                {"name": "type", "term": {"variable": "rtyp"}},
                                                                                {"name": "subst", "term": {"variable": "subst"}},
                                                                                {
                                                                                  "name": "classConstraints",
                                                                                  "term": {
                                                                                    "typeApplication": {
                                                                                      "body": {
                                                                                        "typeApplication": {
                                                                                          "body": {"function": {"primitive": "hydra.lib.maps.empty"}},
                                                                                          "type": {"variable": "hydra.core.Name"}}},
                                                                                      "type": {"variable": "hydra.core.TypeVariableMetadata"}}}}],
                                                                              "typeName": "hydra.typing.InferenceResult"}},
                                                                          "function": {
                                                                            "typeApplication": {
                                                                              "body": {
                                                                                "typeApplication": {
                                                                                  "body": {"function": {"primitive": "hydra.lib.flows.pure"}},
                                                                                  "type": {"variable": "t2"}}},
                                                                              "type": {"variable": "hydra.typing.InferenceResult"}}}}},
                                                                      "domain": [{"unit": {}}],
                                                                      "parameter": "result"}}},
                                                                "function": {
                                                                  "application": {
                                                                    "argument": {
                                                                      "application": {
                                                                        "argument": {
                                                                          "application": {
                                                                            "argument": {
                                                                              "list": [
                                                                                {"literal": {"string": "\n\tterm: "}},
                                                                                {
                                                                                  "application": {
                                                                                    "argument": {"variable": "term"},
                                                                                    "function": {"variable": "hydra.show.core.term"}}},
                                                                                {"literal": {"string": "\n\ttyp: "}},
                                                                                {
                                                                                  "application": {
                                                                                    "argument": {"variable": "typ"},
                                                                                    "function": {"variable": "hydra.show.core.type"}}},
                                                                                {"literal": {"string": "\n\tsubst: "}},
                                                                                {
                                                                                  "application": {
                                                                                    "argument": {"variable": "subst"},
                                                                                    "function": {"variable": "hydra.show.typing.typeSubst"}}},
                                                                                {"literal": {"string": "\n\trterm: "}},
                                                                                {
                                                                                  "application": {
                                                                                    "argument": {"variable": "rterm"},
                                                                                    "function": {"variable": "hydra.show.core.term"}}},
                                                                                {"literal": {"string": "\n\trtyp: "}},
                                                                                {
                                                                                  "application": {
                                                                                    "argument": {"variable": "rtyp"},
                                                                                    "function": {"variable": "hydra.show.core.type"}}}]},
                                                                            "function": {"function": {"primitive": "hydra.lib.strings.cat"}}}},
                                                                        "function": {
                                                                          "application": {
                                                                            "argument": {"variable": "debugId"},
                                                                            "function": {
                                                                              "typeApplication": {
                                                                                "body": {
                                                                                  "typeApplication": {
                                                                                    "body": {"variable": "hydra.annotations.debugIf"},
                                                                                    "type": {"variable": "t1"}}},
                                                                                "type": {"variable": "t2"}}}}}}},
                                                                    "function": {
                                                                      "typeApplication": {
                                                                        "body": {
                                                                          "typeApplication": {
                                                                            "body": {
                                                                              "typeApplication": {
                                                                                "body": {"function": {"primitive": "hydra.lib.flows.bind"}},
                                                                                "type": {"variable": "t2"}}},
                                                                            "type": {"unit": {}}}},
                                                                        "type": {"variable": "hydra.typing.InferenceResult"}}}}}}}}}}},
                                                    "domain": [{"variable": "hydra.typing.TypeSubst"}],
                                                    "parameter": "subst"}}},
                                              "domain": [{"variable": "hydra.core.Type"}],
                                              "parameter": "typ"}}},
                                        "domain": [{"variable": "hydra.core.Term"}],
                                        "parameter": "term"}}},
                                  "domain": [{"variable": "t1"}],
                                  "parameter": "debugId"}}},
                            "domain": [{"variable": "t0"}],
                            "parameter": "cx"}}}}},
                  "parameter": "t2"}},
              "parameter": "t1"}},
          "parameter": "t0"}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "function": {
                          "codomain": {
                            "function": {
                              "codomain": {
                                "application": {
                                  "argument": {"variable": "hydra.typing.InferenceResult"},
                                  "function": {
                                    "application": {
                                      "argument": {"variable": "t2"},
                                      "function": {"variable": "hydra.compute.Flow"}}}}},
                              "domain": {"variable": "hydra.typing.TypeSubst"}}},
                          "domain": {"variable": "hydra.core.Type"}}},
                      "domain": {"variable": "hydra.core.Term"}}},
                  "domain": {"variable": "t1"}}},
              "domain": {"variable": "t0"}}},
          "variables": ["t0", "t1", "t2"]}]},
    {
      "name": "hydra.inference.yieldWithConstraints",
      "term": {
        "annotated": {
          "annotation": [
            {
              "@key": "description",
              "@value": {
                "literal": {"string": "Create an inference result with class constraints"}}}],
          "body": {
            "function": {
              "lambda": {
                "body": {
                  "function": {
                    "lambda": {
                      "body": {
                        "function": {
                          "lambda": {
                            "body": {
                              "function": {
                                "lambda": {
                                  "body": {
                                    "record": {
                                      "fields": [
                                        {
                                          "name": "term",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "term"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "subst"},
                                                  "function": {"variable": "hydra.substitution.substTypesInTerm"}}}}}},
                                        {
                                          "name": "type",
                                          "term": {
                                            "application": {
                                              "argument": {"variable": "typ"},
                                              "function": {
                                                "application": {
                                                  "argument": {"variable": "subst"},
                                                  "function": {"variable": "hydra.substitution.substInType"}}}}}},
                                        {"name": "subst", "term": {"variable": "subst"}},
                                        {"name": "classConstraints", "term": {"variable": "constraints"}}],
                                      "typeName": "hydra.typing.InferenceResult"}},
                                  "domain": [
                                    {
                                      "map": {
                                        "keys": {"variable": "hydra.core.Name"},
                                        "values": {"variable": "hydra.core.TypeVariableMetadata"}}}],
                                  "parameter": "constraints"}}},
                            "domain": [{"variable": "hydra.typing.TypeSubst"}],
                            "parameter": "subst"}}},
                      "domain": [{"variable": "hydra.core.Type"}],
                      "parameter": "typ"}}},
                "domain": [{"variable": "hydra.core.Term"}],
                "parameter": "term"}}}}},
      "type": [
        {
          "constraints": null,
          "type": {
            "function": {
              "codomain": {
                "function": {
                  "codomain": {
                    "function": {
                      "codomain": {
                        "function": {
                          "codomain": {"variable": "hydra.typing.InferenceResult"},
                          "domain": {
                            "map": {
                              "keys": {"variable": "hydra.core.Name"},
                              "values": {"variable": "hydra.core.TypeVariableMetadata"}}}}},
                      "domain": {"variable": "hydra.typing.TypeSubst"}}},
                  "domain": {"variable": "hydra.core.Type"}}},
              "domain": {"variable": "hydra.core.Term"}}},
          "variables": []}]}],
  "namespace": "hydra.inference",
  "termDependencies": [
    "hydra.annotations",
    "hydra.checking",
    "hydra.extract.core",
    "hydra.lexical",
    "hydra.monads",
    "hydra.reflect",
    "hydra.rewriting",
    "hydra.schemas",
    "hydra.show.core",
    "hydra.show.typing",
    "hydra.sorting",
    "hydra.substitution",
    "hydra.unification"],
  "typeDependencies": [
    "hydra.accessors",
    "hydra.ast",
    "hydra.classes",
    "hydra.coders",
    "hydra.compute",
    "hydra.constraints",
    "hydra.core",
    "hydra.grammar",
    "hydra.graph",
    "hydra.json.model",
    "hydra.module",
    "hydra.parsing",
    "hydra.phantoms",
    "hydra.query",
    "hydra.relational",
    "hydra.tabular",
    "hydra.testing",
    "hydra.topology",
    "hydra.typing",
    "hydra.util",
    "hydra.variants",
    "hydra.workflow"]}
