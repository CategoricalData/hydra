description: "The Hydra Core model (in progress)"

definitions:

  - name: Application
    description: "A term which applies a function to an argument"
    type:
      record:
        - name: function
          type: Term

        - name: argument
          type: Term

  - name: AtomicType
    description: "Any of a fixed set of atomic types, also called base types, primitive types, or type constants"
    comments:
      - "The so-called term constants, or valid values, of each atomic type are unspecified"
    type:
      union:
        - name: binary

        - name: boolean

        - name: float
          type: FloatType

        - name: integer
          type: IntegerType

        - name: string

  - name: AtomicValue
    description: "A term constant; an instance of an atomic type"
    type:
      union:
        - name: binary
          type: binary

        - name: boolean
          type: BooleanValue

        - name: float
          type: FloatValue

        - name: integer
          type: IntegerValue

        - name: string
          type: string

  - name: BooleanValue
    type:
      enum:
        - name: "false"
        - name: "true"

  - name: CaseStatement
    type:
      record:
        - name: cases
          description: "A handler for each alternative in a union type. The term of each case must be function-typed."
          type:
            list: Field
            
        - name: default
          description: >
            A convenience which allows certain "don't care" cases to be omitted.
            The result is a term which does not otherwise depend on the variant value.
          type: Term

  - name: Field
    description: "A labeled term"
    type:
      record:
        - name: name
          type: FieldName

        - name: term
          type: Term

  - name: FieldName
    type: string

  - name: FieldType
    type:
      record:
        - name: name
          type: FieldName

        - name: type
          type: Type

  - name: FloatType
    type:
      enum:
        - name: bigfloat
        - name: float32
        - name: float64

  - name: FloatValue
    type:
      union:
        - name: bigfloat
          type:
            float:
              precision: arbitrary

        - name: float32
          type:
            float:
              precision:
                bits: 32

        - name: float64
          type:
            float:
              precision:
                bits: 64

  - name: FunctionType
    description: "A function type, also known as an arrow type"
    type:
      record:
        - name: domain
          type: Type

        - name: codomain
          type: Type

  - name: IntegerType
    type:
      enum:
        - bigint
        - int8
        - int16
        - int32
        - int64
        - uint8
        - uint16
        - uint32
        - uint64

  - name: IntegerValue
    type:
      union:
        - name: bigint
          type:
            integer:
              precision: arbitrary

        - name: int8
          type:
            integer:
              precision:
                bits: 8

        - name: int16
          type:
            integer:
              precision:
                bits: 16

        - name: int32
          type:
            integer:
              precision:
                bits: 32

        - name: int64
          type:
            integer:
              precision:
                bits: 64

        - name: uint8
          type:
            integer:
              precision:
                bits: 8
              signed: false

        - name: uint16
          type:
            integer:
              precision:
                bits: 16
              signed: false

        - name: uint32
          type:
            integer:
              precision:
                bits: 32
              signed: false

        - name: uint64
          type:
            integer:
              precision:
                bits: 64
              signed: false

  - name: Lambda
    description: "A function abstraction (lambda)"
    type:
      record:
        - name: parameter
          description: "The parameter of the lambda"
          type: Variable

        - name: body
          description: "The body of the lambda"
          type: Term

  - name: Name
    type: string

#  - name: Name
#    type:
#      list: NamePart
#
#  - name: NamePart
#    type: string

  - name: Term
    type:
      union:
        - name: application
          description: "A function application"
          type: Application

        - name: atomic
          description: "An atomic value"
          type: AtomicValue

        - name: cases
          description: "A case statement applied to a variant record"
          type: CaseStatement

        - name: data
          description: "Hydra's delta function, which maps an element to its data term"

        - name: element
          description: "An element reference"
          type: Name

        - name: function
          description: "A reference to a built-in function"
          type: Name

        - name: lambda
          description: "A function abstraction (lambda)"
          type: Lambda

        - name: list
          description: "A list"
          type:
            list: Term

        # TODO: list elimination

        - name: projection
          description: "A projection of a field from a record"
          type: FieldName

        - name: record
          description: "A record, or labeled tuple"
          type:
            list: Field

        - name: union
          description: "A union term, i.e. a generalization of inl() or inr()"
          type: Field

        - name: variable
          description: "A variable reference"
          type: Variable

  - name: Type
    type:
      union:
        - name: atomic
          type: AtomicType

        - name: element
          type: Type

        - name: function
          type: FunctionType

        - name: list
          type: Type

        - name: nominal
          type: Name

        - name: record
          type:
            list: FieldType

        - name: union
          type:
            list: FieldType

  - name: Variable
    description: "A symbol which stands in for a term"
    type: string
